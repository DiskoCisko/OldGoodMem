(window.webpackJsonp=window.webpackJsonp||[]).push([["42c63f80984342f2f64e56433dd0512e"],{DfBR:function(_,e,t){"use strict";t.r(e),t.d(e,"getNavigableTabs",(function(){return o})),t.d(e,"showHiddenNavigableTabs",(function(){return i}));var l=t("zxIV"),o=function(_){var e=document.querySelector("#wall_tabs");return e?Array.from(e.querySelectorAll(".ui_tab")).filter((function(e){var t=e.parentNode;return null!==t&&t!==_&&!Object(l.hasClass)(t,"unshown")&&!Object(l.matchesSelector)(t,'[data-ui-tab="no_posts"]')})):[]},i=function(){var _=document.querySelector("#wall_tabs"),e=null==_?void 0:_.querySelector(".page_wall_no_posts");null==e||e.remove(),Object(l.removeClass)(document.querySelector("#wall_tabs"),"page_tabs_hidden")}},DzCs:function(_,e,t){"use strict";t.r(e);var l=t("2vnv");t.d(e,"FriendsRecommendGlobals",(function(){return l.FriendsRecommendGlobals}))},F5gA:function(_,e,t){"use strict";t.r(e),t.d(e,"scrollOutsideFixedReplyArea",(function(){return s}));var l=t("lXE5"),o=t("zxIV"),i=function(_){window.cur.wallLayer?window.wkLayerWrap&&(window.wkLayerWrap.scrollTop=_):Object(l.scrollToY)(_,0,!1,!0)},a=function(_){var e,t;i((window.cur.wallLayer?null!==(t=null===(e=window.wkLayerWrap)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0:Object(l.scrollGetY)())+_)},s=function(_,e){if(_ instanceof HTMLElement&&e instanceof HTMLElement){var t="fixed"===Object(o.getStyle)(e,"position"),l=void 0!==window.cur.wallLayer;if(t){var s=_.getBoundingClientRect(),r=20-(e.getBoundingClientRect().top-s.bottom);r>0&&a(r)}else{if(l)return;var n=e.closest(".replies_wrap");n&&function(_){var e=Object(o.clientHeight)();if(_.getBoundingClientRect().bottom>e){var t=Object(o.getXY)(_)[1]+Object(o.getH)(_)-e;i(t)}}(n)}}}},QxcO:function(_,e,t){"use strict";t.r(e),t.d(e,"getReactionsButtonTemplateBase",(function(){return i})),t.d(e,"getReactionsButtonPostTemplate",(function(){return a})),t.d(e,"getReactionsButtonReplyTemplate",(function(){return s}));var l=t("W9Tc"),o=t("zxIV"),i=function(_,e){var t,i=null===(t=function(_){try{var e=JSON.parse(_);if(null!==e&&"object"!=typeof e)return;return e}catch(_){return}}(_))||void 0===t?void 0:t.set_id,a="string"==typeof i?i:void 0;if(Object(l.partConfigEnabled)("reactions_enabled")&&e&&!!a)return{likeClassName:"like_btn--hidden",template:Object(o.rs)(e,{reactions_set_id:a})}},a=function(_,e){var t,l=null===(t=e.wallTpl)||void 0===t?void 0:t.post_likes_reactions,o=_.length>14?_[14]:void 0;if("string"==typeof o)return i(o,l)},s=function(_,e){var t,l=null===(t=e.wallTpl)||void 0===t?void 0:t.reply_likes_reactions,o=_.length>14?_[14]:void 0;if("string"==typeof o)return i(o,l)}},YIAi:function(_,e,t){"use strict";t.r(e),t.d(e,"VISIBILITY_ACCESS_OPTIONS",(function(){return l}));var l={PUBLIC:0,ONLY_FRIENDS:1}},bWc2:function(_,e,t){"use strict";t.r(e),t.d(e,"getFixedReplyField",(function(){return l}));var l=function(){var _,e;return window.cur.wallLayer?null!==(_=document.getElementById("wl_reply_form"))&&void 0!==_?_:void 0:"full"===window.cur.wallType&&null!==(e=document.querySelector("#reply_box_wrap"+window.cur.oid+"_"+window.cur.pid+" .reply_box_inner_wrap"))&&void 0!==e?e:void 0}},ofcU:function(_,e,t){"use strict";t.r(e),t.d(e,"createMutations",(function(){return n})),t.d(e,"createModule",(function(){return d})),t.d(e,"destroyModule",(function(){return E}));t("HEwt"),t("a1Th"),t("rE2o"),t("ioFf"),t("rGqo"),t("Btvt"),t("KKXr");function l(_,e){return function(_){if(Array.isArray(_))return _}(_)||function(_,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(_)))return;var t=[],l=!0,o=!1,i=void 0;try{for(var a,s=_[Symbol.iterator]();!(l=(a=s.next()).done)&&(t.push(a.value),!e||t.length!==e);l=!0);}catch(_){o=!0,i=_}finally{try{l||null==s.return||s.return()}finally{if(o)throw i}}return t}(_,e)||function(_,e){if(!_)return;if("string"==typeof _)return o(_,e);var t=Object.prototype.toString.call(_).slice(8,-1);"Object"===t&&_.constructor&&(t=_.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(_,e)}(_,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(_,e){(null==e||e>_.length)&&(e=_.length);for(var t=0,l=new Array(e);t<e;t++)l[t]=_[t];return l}var i=new window.Map;function a(_){var e=i.get(_.currentTarget);if(e){var t=e[_.type];if(t)for(var o,a=0;a<t.length;a++){var s=l(t[a],2),r=s[0],n=s[1],c=void 0;if(hasClass(_.target,r)?c=n(_,_.target):(o=gpeByClass(r,_.target,_.currentTarget))&&(c=n(_,o)),!1===c)break}}}var s=t("Egk5"),r=function(){for(var _=0,e=0,t=arguments.length;e<t;e++)_+=arguments[e].length;var l=Array(_),o=0;for(e=0;e<t;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)l[o]=i[a];return l};function n(_){return{callMutations:function(){if("function"==typeof _)throw console.trace(),new Error("Mutations are not initialized");return _},bindMutations:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("function"!=typeof _)throw console.trace(),new Error("Mutations are already initialized");return _=_.apply(void 0,e)}}}function c(_,e,t,l){Object(s.addEvent)(e,t,l),_._registeredHandlers.push({handlerType:"bind",elem:e,types:t,handler:l})}function b(_,e,t,l,o){!function(_,e,t,l){var o=i.get(_);o||(i.set(_,{}),o=i.get(_));for(var s=e.split(" "),r=0;r<s.length;r++){var n=s[r];o[n]||(o[n]=[],addEvent(_,n,a)),o[n].push([t,l])}}(e,t,l,o),_._registeredHandlers.push({handlerType:"delegate",elem:e,types:t,selector:l,handler:o})}function d(_){var e={_registeredHandlers:[]};return _.handlers((function(){for(var _=[],t=0;t<arguments.length;t++)_[t]=arguments[t];return c.apply(void 0,r([e],_))}),(function(){for(var _=[],t=0;t<arguments.length;t++)_[t]=arguments[t];return b.apply(void 0,r([e],_))})),e}function E(_){_._registeredHandlers.forEach((function(_){var e=_.handlerType,t=_.elem,l=_.types,o=_.handler;"delegate"===e?function(_,e,t,l){var o=i.get(_);o&&(e.split(" ").forEach(e=>{o[e]&&(o[e]=o[e].filter(_=>_[0]!==t||_[1]!==l),0===o[e].length&&removeEvent(_,e,a))}),0===Object.keys(o).map(_=>o[_].length).reduce((_,e)=>_+e)&&i.delete(_))}(t,l,_.selector,o):Object(s.removeEvent)(t,l,o)})),_._registeredHandlers=[]}},qwyz:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HEwt"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("rGqo"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("rE2o"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ioFf"),core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("OG14"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a1Th"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("VRzm"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("Oyvg"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("KKXr"),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("91GP"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("pIFo"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("SRfc"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("zxIV"),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("/PiP"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("Egk5"),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("FWc3"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("v+DW"),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("Xrg9"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("t7n3"),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("kcIO"),_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("XzvV"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("lXE5"),_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("7jxN"),_web_lib_video__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("Ia1d"),_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("4+be"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("cGUQ"),_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("t/FQ"),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("QGEU"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("98sY"),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("o7bv"),_web_lib_utils__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("aong"),_web_donut__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("7GuL"),_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("DzCs"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("YIAi"),_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("QxcO"),_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__("te1c"),_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__("hzb7"),_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__("jE6c"),_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__("oK+H"),_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__("F5gA"),_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__("bWc2"),_internal_nospam_common__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__("FThC"),_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__("DfBR"),_web_lib_date__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__("1BRX"),_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__("g4nd");function _slicedToArray(_,e){return _arrayWithHoles(_)||_iterableToArrayLimit(_,e)||_unsupportedIterableToArray(_,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var t=Object.prototype.toString.call(_).slice(8,-1);return"Object"===t&&_.constructor&&(t=_.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var t=0,l=new Array(e);t<e;t++)l[t]=_[t];return l}function _iterableToArrayLimit(_,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(_)){var t=[],l=!0,o=!1,i=void 0;try{for(var a,s=_[Symbol.iterator]();!(l=(a=s.next()).done)&&(t.push(a.value),!e||t.length!==e);l=!0);}catch(_){o=!0,i=_}finally{try{l||null==s.return||s.return()}finally{if(o)throw i}}return t}}function _arrayWithHoles(_){if(Array.isArray(_))return _}var Wall={LS_ADS_EVENTS:"ads.events",deleteAll:function(_,e,t){ajax.post("al_wall.php",{act:"delete_all",post:e,hash:t},{onDone:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_));t.oldt=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,e)},showProgress:function(){hide(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"progress"})))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_))}})},restoreAll:function(_,e,t){var l=Math.floor(1e5*Math.random());cur.wallRnd=l,ajax.post("al_wall.php",{act:"restore_all",post:e,hash:t,rnd:l},{onDone:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,t.oldt)},showProgress:function(){hide(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"progress_inline"})))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_))}})},deleteThread:function(_,e,t){ajax.post("al_wall.php",{act:"delete_thread",post:e,hash:t,from_deleted:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(ge("post"+e),"reply_deleted")},{onDone:function(t){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("dld_inner",_);if(l)l.oldElements=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(l,t);else{var o=ge("post"+e),i=geByClass1("reply_wrap",o);hide(i),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{id:"post_del"+e,className:"dld",innerHTML:'<span class="dld_inner">'+t+"</span>"}),o.appendChild(l)}hide("replies_wrap_deep"+e)},showProgress:function(){hide(_);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post_actions",_);if(e)addClass(e,"post_actions_progress");else{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_);t||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"progress"}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_).appendChild(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(t))}},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(_);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post_actions",_);e?removeClass(e,"post_actions_progress"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_))}})},restoreThread:function(_,e,t){ajax.post("al_wall.php",{act:"restore_thread",post:e,hash:t},{onDone:function(){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("replies_wrap_deep"+e),t.oldElements)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,t.oldElements);else{var l=geByClass1("reply_wrap","post"+e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("post_del"+e)}},showProgress:function(){hide(_);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_);e||(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"progress"}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_).appendChild(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(e))},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_))}})},block:function(_,e,t,l,o){ajax.post("al_wall.php",{act:"block",post:e,hash:t,bl:l,from:o},{onDone:function(e){l?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_).insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{innerHTML:e}),_),hide(_)):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_)))},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.showProgress)(_,"post_inline_progress","post_inline_progress",!0)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("post_inline_progress")}})},blockEx:function(_,e){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showBox)("groupsedit.php",{act:"bl_edit",name:"id"+e,gid:_,auto:1},{stat:["page.css","ui_controls.js","ui_controls.css"],dark:1})},withMentions:!(browser.mozilla&&browser.version.match(/^2\./)||browser.mobile),editPost:function(_,e,t,l,o){if(cur.editingPost&&ge("wpe_text")){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wall_posts",ge("wpe_text"));if(!i||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(i))return l&&l(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.notaBene)("wpe_text");Wall.cancelEdit()}cur.editingPost=[e],Wall.withMentions?stManager.add(["ui_controls.css","ui_controls.js","mentions.js",jsc("web/wall_edit.js")]):stManager.add([jsc("web/wall_edit.js")]),ajax.post("al_wall.php",extend({act:"edit",post:e,mention:Wall.withMentions?1:""},t),{onDone:function(){var _=Array.prototype.slice.call(arguments);if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(_[4])&&cur.options&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(cur.options.filter_media_types)){var t=[];each(_[4],(function(_,e){each(cur.options.filter_media_types,(function(_,l){if(e[0]===l[0])return t.push(l),!1}))})),_[4]=t}_.unshift(e),WallEdit.editPost.apply(window,_),o&&o()},onFail:function(){cur.editingPost=!1,l&&l()},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(_):addClass(geByClass1("post_actions","post"+e),"post_actions_progress")},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(_):removeClass(geByClass1("post_actions","post"+e),"post_actions_progress")},noSort:!0})},fixPost:function fixPost(link,post,hash,value){return ajax.post("al_wall.php",{act:"a_fix_post",post,hash,value},{onDone:function onDone(js){if(js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.logEvalError)(_,js)}var postEl=cur.wallLayer==post?ge("wl_post"):ge("post"+post);each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post_fixed"),(function(){removeClass(this,"post_fixed")})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(postEl,"post_fixed",value),link&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(link,getLang(value?"wall_unfix_post":"wall_fix_post")),link.onclick=function(){return Wall.fixPost(link,post,hash,value?0:1)}),cur.onWKFix&&(cur.onWKFix(value),delete cur.onWKFix)},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(link,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind("wpe_fix"+post)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(link,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem)(link):_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind("wpe_fix"+post)}}),!1},cancelEdit:function(_){if(cur.editingPost){if(!0===_&&cur.editingPost[0].match(/^-?\d+_/))return;window.WallEdit?WallEdit.cancelEditPost():cur.editingPost=!1}},searchWall:function(){},switchTabContent:function(_){switch(hide("page_wall_posts","page_postponed_posts","page_suggested_posts","page_search_posts","page_top_posts","page_archive_posts","page_donut_posts"),_){case"own":case"all":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_wall_posts");break;case"postponed":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_postponed_posts"),hide("wall_more_link");break;case"suggested":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_suggested_posts");break;case"search":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_search_posts");break;case"top":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_top_posts");break;case"archive":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_archive_posts");break;case"donut":Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_donut_posts")}},switchWall:function(_,e,t){if(e&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.checkEvent)(e))return!0;if(t||(t="own"==cur.wallType?"all":"own"),e&&"click"==e.type&&e.clientX&&e.offsetX&&cur.wallTab==t&&cur.wallType==t&&"top"!==t)return nav.go(_,e);if("postponed"==cur.wallTab&&wall.checkPostponedCount(),"archive"!==cur.wallTab&&"archive"!==t||((cur.wallLayer?wkcur:cur).wallMyDeleted={}),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(cur.wallArchiveFeatureTooltipHide)&&cur.wallArchiveFeatureTooltipHide(),!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(t,["top","archive","donut"])){var l=ge("page_wall_posts");removeClass(l,"own"),removeClass(l,"all"),addClass(l,t)}cur.wallType=t,cur.wallTab=t,uiTabs.switchTab(_),uiTabs.hideProgress(_),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(t,["top","archive","donut"])?(cur.baseWallModule=cur.module,cur.module="wall_"+t,cur.topWallFeatureTT&&cur.topWallFeatureTT.hide()):cur.baseWallModule&&(cur.module=cur.baseWallModule,delete cur.baseWallModule);var o="donut"===t&&Wall.cantAccessDonutPosts();return Wall.hasPosts()||o?(Wall.update(),Wall.showWall()):(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,cur.wallArchiveRestored=0,cur.wallArchiveArchived=0,cur.wallArchiveRolledback=0,cur.wallDonutNextFrom=0,"top"===t?delete cur.wallTopFinished:"archive"===t?delete cur.wallArchiveFinished:"donut"===t&&delete cur.wallDonutFinished,uiTabs.showProgress(_),Wall.showMore(0,_)),_.dataset.logEvent&&Object(_shared_donut_stats_donut_log__WEBPACK_IMPORTED_MODULE_46__.logDonutEvent)(_.dataset.logEvent),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(e)},resetWall:function(){if(cur.wallType&&cur.wallTab){var _=geByClass1("_wall_tab_"+cur.wallType);_&&(cur.wallNextFrom=0,cur.wallTopNextFrom=0,cur.wallArchiveNextFrom=0,(cur.wallLayer?wkcur:cur).wallMyDeleted={},"top"===cur.wallType?delete cur.wallTopFinished:"archive"===cur.wallType?delete cur.wallArchiveFinished:"donut"===cur.wallType&&delete cur.wallDonutFinished,uiTabs.showProgress(_),Wall.showMore(0,_,!0))}},hasPosts:function(_){_=_||cur.wallType;var e=Wall.getPostsWrap(_);return!!geByClass1("post",e)},getPostsWrap:function(_){switch(_){case"archive":return ge("page_archive_posts");case"top":return ge("page_top_posts");case"donut":return ge("page_donut_posts");default:return ge("page_wall_posts")}},showSuggested:function showSuggested(ev,rows,notAll){if(ev&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.checkEvent)(ev))return!0;if(!cur.oid)return!1;var el=ge("page_wall_suggest");if(el=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(el,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domQuery1)("#page_wall_suggest_more .ui_tab_group_item"):geByClass1("ui_tab",el),!el)return!1;if(uiTabs.switchTab(el),cur.wallTab="suggested",delete cur.suggestedDeletedCount,void 0!==rows)wall.suggestLoaded(rows,notAll);else{if(cur.suggestedLoading)return!1;var curOid=cur.suggestedLoading=cur.oid;uiTabs.showProgress(el),ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid},{onDone:function onDone(rows,notAll,js,count){if(js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.logEvalError)(_,js)}cur.suggestedLoading=!1,uiTabs.hideProgress(el),Wall.updateTabCounter("page_wall_suggested_cnt",count),curOid===cur.oid&&"suggested"==cur.wallTab&&wall.suggestLoaded.apply(window,arguments)}})}return!1},deleteSuggested:function(_,e,t,l){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isButtonLocked)(l)){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(l);var o=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)({title:getLang("global_action_confirmation"),onHide:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(l)}},getLang("wall_delete_suggested_box"),getLang("wall_delete_suggested_btn"),(function(l){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isButtonLocked)(l)||(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(l),ajax.post("al_wall.php",{act:"delete_suggested",post_id:_,hash:t,group_id:e},{onDone:function(_){if("full_own"==cur.wallType||"full_all"==cur.wallType){var e=(Math.ceil(_/cur.pgPerPage)-1)*cur.pgPerPage;e<cur.pgOffset&&(e>0?nav.objLoc.offset=e:delete nav.objLoc.offset,nav.setLoc(nav.objLoc)),nav.reload()}else Wall.showSuggested();o.hide()},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind(l),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind(l)}))}),getLang("global_cancel"))}},suggestLoaded:function(_,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_suggested_posts",_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)("wall_more_link",e),wall.switchTabContent("suggested")},suggestMore:function(){var _=ge("page_suggested_posts"),e=ge("wall_more_link");Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isButtonLocked)(e)||ajax.post("al_wall.php",{act:"get_suggests",owner_id:cur.oid,offset:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post",_).length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("dld",_).length},{onDone:function(t,l){for(var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:t}),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(o);i;)ge(i.id)||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"post")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(i):_.appendChild(i),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(o);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)(e,l)},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind(e),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind(e)})},suggestUpdate:function(_){var e=ge("page_suggests_count"),t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e));e&&(-1!==_&&1!==_||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,t+=_),Wall.updateTabCounter("page_wall_suggested_cnt",t))},suggestPublished:function(_,e,t){if(cur.onepost)return nav.go("/wall"+cur.oid);if(Wall.suggestUpdate(-1),Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.showDoneBox)(e),cur.wallMyDeleted[_]=1,cur.editingPost=!1,Wall.deinitComposer(ge("wpe_text")),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),cur.postWpeIsPoster=!!cur.posterWpeSendParams,cur.posterWpe&&cur.posterWpeSendParams&&WallEdit.posterDestroy(),t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_postponed_posts",t),wall.postponeUpdateCount()),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_suggests_count")))Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("post"+_);else{var l=ge("wall_rmenu");l?(geByClass1("ui_rmenu_item",l).click(),hide(geByClass1("_wall_menu_suggested",l))):ge("wall_tabs")&&(geByClass1("ui_tab",ge("wall_tabs")).click(),wall.updateTabVisibility("page_wall_suggest",!1))}},showDonutWall:function(_){if(!cur.oid)return!1;Wall.updateTabVisibility("page_wall_donut",!0);var e=Wall.getWallTabLink("donut");if(!e)return!1;uiTabs.switchTab(e),cur.wallTab="donut",cur.wallType="donut",void 0!==_&&Wall.donutWallSetRows(_)},donutWallSetRows(_){var e=Wall.getPostsWrap("donut");e&&(e.innerHTML=_,Wall.switchTabContent("donut"),Wall.update())},getWallTabLink:_=>{var e=ge("page_wall_"+_);return(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domQuery1)(`#page_wall_${_}_more .ui_tab_group_item`):geByClass1("ui_tab",e))||null},showPostponedFull:function(_){var e=ge("ui_rmenu_postponed"),t=ge("page_wall_posts");if(!e||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"ui_rmenu_item_sel")||!t){var l={0:nav.objLoc[0],postponed:1};return nav.go(l)}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(t,_),FullWall.updateSummary(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post",t).length)},showPostponed:function(_,e){if(_&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.checkEvent)(_))return!0;if(!cur.oid)return!1;var t=ge("page_wall_postponed");if(!(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"unshown")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domQuery1)("#page_wall_postponed_more .ui_tab_group_item"):geByClass1("ui_tab",t)))return!1;if(uiTabs.switchTab(t),cur.wallTab="postponed",void 0!==e)Wall.postponedLoaded(e);else{if(cur.postponedLoading)return!1;var l=cur.postponedLoading=cur.oid;uiTabs.showProgress(t),ajax.post("al_wall.php",{act:"get_postponed",owner_id:cur.oid},{onDone:function(_){cur.postponedLoading=!1,uiTabs.hideProgress(t),l===cur.oid&&"postponed"==cur.wallTab&&Wall.postponedLoaded(_)}})}return!1},postponedLoaded:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_postponed_posts",_),wall.postponeUpdateCount(),wall.switchTabContent("postponed")},postponeUpdateCount:function(){var _=ge("page_postponed_posts"),e=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post",_).length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("dld",_).length||0;_&&Wall.updateTabCounter("page_wall_postponed_cnt",e)},checkPostponedCount:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post","page_postponed_posts"),e=0;each(_,(function(){var _=this.id.replace("post","");cur.wallMyDeleted[_]||e++})),e||wall.updateTabVisibility("page_wall_postponed",!1)},updateTabCounter:function(_,e){e=e?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.langNumeric)(e,"%s",!0):"",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)(_).forEach((function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_,e);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"ui_tab_group_item")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"default-label",t.innerHTML)}))},updateTabVisibility:function(_,e){var t=ge("page_wall_more_tab");if(t)if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(t))if(e){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"unshown")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_+"_more","unshown")){var l=!1;cur.wallTabsMorePriority.forEach((function(e){l||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"unshown")||(addClass(e,"unshown"),removeClass(e+"_more","unshown"),removeClass(_,"unshown"),l=!0)})),l||removeClass(_+"_more","unshown")}}else{var o=ge(_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"unshown"))addClass(ge(_+"_more"),"unshown");else{addClass(o,"unshown");var i=cur.wallTabsLimit-1-Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_44__.getNavigableTabs)(t).length;if(i>0){var a=i;cur.wallTabsMorePriority.forEach((function(_){if(!(a<=0)){var e=ge(_+"_more");e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"unshown")&&(removeClass(ge(_),"unshown"),addClass(e,"unshown"),a--)}}))}}var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("ui_tab_group_item",t);s.length-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("unshown",t).length<=1&&(s.forEach((function(_){_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"unshown")||(removeClass(ge(_.id.replace(/_more$/,"")),"unshown"),addClass(_,"unshown"))})),addClass(t,"unshown"))}else{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(ge(_),"unshown",!e);var r=Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_44__.getNavigableTabs)(t).length;if(r>cur.wallTabsLimit){var n=r-(cur.wallTabsLimit-1);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("ui_tab_group_item",t).forEach((function(_){addClass(_,"unshown")})),cur.wallTabsMorePriority.forEach((function(_){if(!(n<=0)){var e=ge(_);e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"unshown")&&(addClass(e,"unshown"),removeClass(ge(_+"_more"),"unshown"),n--)}})),removeClass(t,"unshown"),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.statlogsValueEvent)("wall_more_tab_shown",cur.oid)}}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(ge(_),"unshown",!e)},postponedPublished:function(_,e){if(cur.onepost)return nav.go("/wall"+cur.oid);"full_own"!=cur.wallType&&"full_all"!=cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),e&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.showDoneBox)(e),cur.wallMyDeleted[_]=1;var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post",ge("page_postponed_posts")),l=ge("post"+_);if(t.length<=1&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(l,t)){var o=ge("wall_rmenu");o?(geByClass1("ui_rmenu_item",o).click(),hide(geByClass1("_wall_menu_postponed",o))):ge("wall_tabs")&&(geByClass1("ui_tab",ge("wall_tabs")).click(),wall.updateTabVisibility("page_wall_postponed",!1))}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(l),wall.postponeUpdateCount()},onWallSearchSend:function(_,e){e?Wall.showSearch(e,0):Wall.hideSearch()},showSearch:function(_,e){if(cur.searchLoading&&cur.searchLoading==_||!cur.oid)return!1;var t=cur.oid;cur.wallQuery=cur.searchLoading=_,"search"!=cur.wallTab&&(cur.prevWallTab=cur.wallTab,cur.wallTab="search");var l=ge("wall_more_link"),o=+new Date;return ajax.post("al_wall.php",{act:"s",search:1,q:_,owner_id:cur.oid,offset:e,inline:1,owners_only:1},{onDone:function(i,a,s){if(t===cur.oid&&"search"==cur.wallTab){var r=ge("page_search_posts");e||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(r,""),r.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(i)),wall.switchTabContent("search"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)(l,a<s),l.onclick=Wall.showSearch.pbind(_,a);var n=cur.oid>0?_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.serviceWallUsers:_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.serviceWallGroups,c=+new Date-o;Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.saveSearchAttemptStats)(n,0,s,_,0,0,c)}},showProgress:function(){uiSearch.showProgress("wall_search"),e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(l)},hideProgress:function(){cur.searchLoading=!1,uiSearch.hideProgress("wall_search"),e&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(l)}}),!1},hideSearch:function(){if(delete cur.wallQuery,cur.prevWallTab){var _=(cur.oid,_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.serviceWallUsers);Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.removeSearchPositionTracker)(_),cur.wallTab=cur.prevWallTab,cur.prevWallTab=!1,wall.switchTabContent(cur.wallTab),wall.update()}},publishPostponedPost:function(_,e,t){Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)(getLang("publish_postponed_title"),getLang("publish_postponed_confirm"),getLang("publish_postponed_btn"),(function(){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)().hide(),ajax.post("al_wall.php",{act:"publish_postponed",post:_,from:t,hash:e},{onDone:Wall.postponedPublished.pbind(_),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind("wpe_publish"+_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind("wpe_publish"+_)})}),getLang("global_cancel"))},publishFreeDonutCopy:function(_,e,t,l){var o=_.currentTarget,i=l?{title:getLang("global_warning"),content:getLang("wall_publish_donut_as_free_confirmation_warn")}:{title:getLang("wall_publish_donut_as_free_confirmation_title"),content:getLang("wall_publish_donut_as_free_confirmation_confirm")},a=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)(i.title,i.content,getLang("wall_publish_donut_as_free_confirmation_btn"),()=>{var _=()=>{a.hide()},l=a.btns.ok[0];ajax.post("al_wall.php",{act:"publish_free_donut_copy",post_id:e,hash:t},{onDone:e=>{Wall.publishFreeDonutCopyDone({menuActionEl:o,message:e}),_()},onFail:()=>{_()},showProgress:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(l)},hideProgress:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(l)}})},getLang("global_cancel"))},publishFreeDonutCopyDone(_){var e=_.message,t=_.menuActionEl;"full_own"!==cur.wallType&&"full_all"!==cur.wallType||(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)),e&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.showDoneBox)(e,{timeout:3e3}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(t)},cmp:function(_,e){var t=_.length,l=e.length;return t<l?-1:t>l?1:_<e?-1:_>e?1:0},receive:function(_,e,t,l){l=!0===l;var o,i,a,s,r="top"===(t=t||cur.wallType),n="archive"===t,c="donut"===t,b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:_}),d=!!cur.options.revert,E=Wall.getPostsWrap(t),O=[],p=[],u=["page_top_posts","page_wall_posts","page_archive_posts","page_donut_posts"],w=0;if(l)p=u;else{var P=[[n,"page_archive_posts"],[r,"page_top_posts"],[c,"page_donut_posts"],[!0,"page_wall_posts"]].find(_=>_slicedToArray(_,1)[0]),D=_slicedToArray(P,2)[1];p=u.filter(_=>_!==D),a=d?E.firstChild:E.lastChild}function m(_){return!!(_&&_.tagName&&"div"===_.tagName.toLowerCase()&&_.id&&"post"===_.id.substr(0,4))&&_.id}p.forEach((function(_){if("page_donut_posts"!==_||!ge("wall_donut_info"))for(var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(ge(_));e;){var t=e;e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(e),t.tagName&&"input"===t.tagName.toLowerCase()||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(t)}}));for(var M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(d?b.firstChild:b.lastChild);M;M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(d?b.firstChild:b.lastChild))if("input"!=M.tagName.toLowerCase()){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(M,"post_fixed")||!ge(M.id))if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(M,"_ads_promoted_post"))O.push({el:M,beforePost:m(d?b.firstChild:o),afterPost:m(d?o:b.lastChild)});else{for(;a&&a.tagName&&"div"==a.tagName.toLowerCase()&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(a,"post_fixed")&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(a,"_ads_promoted_post")||!r&&!n&&Wall.cmp(a.id,M.id)<0);)a=d?a.nextSibling:a.previousSibling;++w,a?Wall.cmp(a.id,M.id)?(s=a,(i=d?a.previousSibling:a.nextSibling)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"_ads_promoted_post")&&(s=i),d?(E!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(s)&&Wall.sendInsertBeforeError(),E.insertBefore(M,s)):(E!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(s.nextSibling)&&Wall.sendInsertBeforeError(),E.insertBefore(M,s.nextSibling))):(E.replaceChild(M,a),a=M,--w):d?E.appendChild(M):E.insertBefore(M,E.firstChild),o=M,Object(_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_31__.placeholderSetup)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByTag1)("textarea",M),{fast:1})}}else{var C=ge(M.id);C?E.replaceChild(M,C):E.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(M,E.firstChild):E.appendChild(M)}if(O.length)for(var g=0,T=O.length;g<T;++g){var h=O[g];if(h.beforePost||h.afterPost){for(var f="no_position",W=d?E.firstChild:E.lastChild;W;W=d?W.nextSibling:W.previousSibling){s=null;var A=m(W);if(A){if(h.beforePost===A?s=W:h.afterPost===A&&(s=W.nextSibling),s&&(s.previousSibling&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(s.previousSibling,"_ads_promoted_post")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(s,"_ads_promoted_post"))){s=null,f="ads_sibling";break}if(s){E!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(s)&&Wall.sendInsertBeforeError(),E.insertBefore(h.el,s),f=!1;break}}}f&&Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.statlogsValueEvent)("debug_watch",1,"js_page_ads_promoted_post_no_position",f)}}r&&!w?cur.wallTopFinished=cur.oid:n&&!w?cur.wallArchiveFinished=cur.oid:c&&!w&&(cur.wallDonutFinished=cur.oid),"full_own"!==t&&"full_all"!==t||(Pagination.recache(w),FullWall.updateSummary(cur.pgCount)),Wall.update(),wall.addReplyNames(e),Wall.updateMentionsIndex(),w&&Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.getAudioPlayer)().updateCurrentPlaying()},showMore:function(_,e,t){if(cur.viewAsBox)return cur.viewAsBox();if(!cur.wallLayer){if("suggested"===cur.wallTab)return Wall.suggestMore();if(!(cur.wallTypeLoading&&cur.wallTypeLoading[cur.wallType]||"top"===cur.wallType&&cur.wallTopFinished===cur.oid||"archive"===cur.wallType&&cur.wallArchiveFinished===cur.oid||"donut"===cur.wallType&&cur.wallDonutFinished===cur.oid)){var l=cur.wallType,o="top"===l,i="archive"===l,a="donut"===l,s=ge("wall_more_link"),r=cur.wallLoading=cur.oid,n=o&&!!cur.wallTopOnlyCache,c="";0!==_&&(c=i?cur.wallArchiveNextFrom:o?cur.wallTopNextFrom:a?cur.wallDonutNextFrom:cur.wallNextFrom),cur.wallTypeLoading=cur.wallTypeLoading||{},cur.wallTypeLoading[l]=!0,t=!0===t&&!_,ajax.post("al_wall.php",{act:"get_wall",owner_id:cur.oid,offset:_,type:l,fixed:cur.options.fixed_post_id||"",wall_start_from:c,onlyCache:n},{onDone:function(s,n,c,b){return e&&uiTabs.hideProgress(e),r!==cur.oid||l!==cur.wallType?(delete cur.wallLoading,void delete cur.wallTypeLoading[l]):o&&isObject(s)&&s.wait?(cur.wallTopLoadingDelay=cur.wallTopLoadingDelay?cur.wallTopLoadingDelay+100:200,void(cur.wallTopLoadingDelay<500?setTimeout((function(){delete cur.wallLoading,delete cur.wallTypeLoading[l],Wall.showMore(_)}),cur.wallTopLoadingDelay):(delete cur.wallLoading,delete cur.wallTypeLoading[l],cur.wallTopOnlyCache=!1,Wall.showMore(_)))):(delete cur.wallTopLoadingDelay,cur.wallVideos&&each(c,(function(_,e){cur.wallVideos[_]&&(cur.wallVideos[_].list=cur.wallVideos[_].list.concat(e.list))})),i?cur.wallArchiveNextFrom=b:o?cur.wallTopNextFrom=b:a?cur.wallDonutNextFrom=b:cur.wallNextFrom=b,void setTimeout((function(){Wall.receive(s,n,l,t),_||l!==cur.wallType||Wall.showWall(),delete cur.wallLoading,delete cur.wallTypeLoading[l]}),0))},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind(s),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind(s)})}}},showWall:function(){wall.switchTabContent(cur.wallType);var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("wall_module",ge("page_wall_posts")))[1];_<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)()&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(_-15)},checkTextLen:function(_,e,t){var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Emoji.editableVal(_).replace(/\n\n\n+/g,"\n\n"));if(_.lastLen!==l.length||t){var o=_.lastLen=l.length,i=(cur.options||{}).max_post_len||(window.mvcur||{}).maxReplyLength,a=o-l.replace(/\n/g,"").length;e=ge(e),o>i-100||a>4?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(e),e.innerHTML=o>i?getLang("global_recommended_exceeded",o-i):a>4?getLang("global_recommended_lines",a-4):getLang("text_N_symbols_remain",i-o)):hide(e),window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()}else window.FullWall&&cur.onepost&&FullWall.onePostOnScroll()},checkPostLen:function(_,e,t,l){var o=ge(_);if(t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(t).replace(/\n\n\n+/g,"\n\n"),o&&(o.lastLen!==t.length||l)){var i=o.lastLen=t.length,a=cur.options.max_post_len,s=i-t.replace(/\n/g,"").length,r=ge(e);i>a-100||s>4?(r.innerHTML=i>a?getLang("global_recommended_exceeded",i-a):s>4?getLang("global_recommended_lines",s-4):getLang("text_N_symbols_remain",a-i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(r)):hide(r)}},postChanged:function(_){var e,t=Wall.isPosterEditorOpen();if((t||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)("submit_post"))&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(ge("submit_post_box"),"shown")||Wall.showEditPost(),vk.id&&!vk.widget&&!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)){clearTimeout(cur.postAutosave);var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(cur.oid)==vk.id?Wall.saveDraft:Wall.saveOwnerDraftText.pbind(cur.oid);!0===_?l():cur.postAutosave=setTimeout(l,10===_?10:1e3)}t||setTimeout(Wall.checkPosterAvailability)},ownerDraftKey:function(_){return"wall_draft"+vk.id+"_"+_},ownerDraftData:function(){return cur.wallDraftData||(cur.wallDraftData={}),cur.wallDraftData},addOwnerDraftMedia:function(_,e){var t;if(!(null===(t=cur.options)||void 0===t?void 0:t.no_draft)){var l=Wall.ownerDraftData(),o=e[0],i=e[1],a=e[2];l._attach_cache=l._attach_cache||{},a?l._attach_cache[o+i]=a:a=l._attach_cache[o+i],l.attaches=l.attaches||[];var s=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.get(Wall.ownerDraftKey(_))||{};!1!==o?l.attaches.push([o,i,a,l.attaches.length]):!1===o&&void 0!==i&&(l.attaches=l.attaches.filter((function(_){return _[3]!==i}))),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.set(Wall.ownerDraftKey(_),extend(s,{txt:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Wall.getDraftData().message||""),medias:l.attaches}))}},cleanOwnerDraftMedia:function(_){var e;if(!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)){var t=Wall.ownerDraftData(),l=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.get(Wall.ownerDraftKey(_))||{};t.attaches=[],_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.set(Wall.ownerDraftKey(_),extend({txt:""},l,{medias:[]}))}},saveOwnerDraftText:function(_){var e;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)){var t=Wall.ownerDraftData(),l=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.get(Wall.ownerDraftKey(_))||{},o=Wall.getDraftData(),i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(o.message||""),a=null;if(t.txt=i,each(l.medias||{},(function(_,e){switch(e[0]){case"postpone":o.postpone&&(l.medias[_][1]=o.postpone,l.medias[_][2].draft=1);break;case"poll":var t=(cur.wallAddMedia||{}).pollData(!0,!0);t&&extend(l.medias[_][2],t);break;case"copyright":var i=(cur.wallAddMedia||{}).copyrightData(!0);i&&extend(l.medias[_][2],i);break;case _web_donut__WEBPACK_IMPORTED_MODULE_33__.ATTACH_DATA_DONUT_DURATION:o[_web_donut__WEBPACK_IMPORTED_MODULE_33__.ATTACH_DATA_DONUT_DURATION]&&(l.medias[_][2]=Object.assign(l.medias[_][2]||{},{[_web_donut__WEBPACK_IMPORTED_MODULE_33__.ATTACH_DATA_DONUT_DURATION]:o[_web_donut__WEBPACK_IMPORTED_MODULE_33__.ATTACH_DATA_DONUT_DURATION]}))}})),i&&o.bkg_id&&(a={id:o.bkg_id},cur.poster&&cur.poster.isCustomBkgId(o.bkg_id)&&extend(a,cur.poster.getCustomBkg()),l.bkg_id&&delete l.bkg_id),extend(l,{txt:i,bkg:a}),cur.shareShowImg&&extend(l,{shareShowImg:cur.shareShowImg}),_<0){var s=cur.poster?ge("submit_post_box"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_submit_post_box",ge("official"));extend(l,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(s,"from-oid")||vk.id,signed:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("signed")?1:0}),Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.fieldValueIsDonutOnlyPost)(s,cur.wallAddMedia)?l.donutOnly=1:delete l.donutOnly}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.set(Wall.ownerDraftKey(_),l)}},getOwnerDraft:function(_){var e;if(null===(e=cur.options)||void 0===e?void 0:e.no_draft)return[];var t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.get(Wall.ownerDraftKey(_))||[],l={from:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(t.from),signed:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(t.signed),shareShowImg:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(t.shareShowImg)};return Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(t.donutOnly)&&(l.donutOnly=1),[t.txt,t.medias,!0,l,t.bkg]},saveOwnerDraftMedia:function(_,e,t,l){var o;if(!(null===(o=cur.options)||void 0===o?void 0:o.no_draft)){Wall.cleanOwnerDraftMedia(_);var i=cur.wallAddMedia||{},a=[],s=(cur.wallAddMedia?i.getMedias():[]).slice().map((function(_){return _.slice(0,2)}));void 0!==t&&e?a=[[e,t,l]]:e||void 0===t||s.splice(t,1),s=s.concat(a),each(s,(function(){Wall.addOwnerDraftMedia(_,this)}))}},saveDraft:function(){var _;if(cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia),!(null===(_=cur.options)||void 0===_?void 0:_.no_draft))if(cur.noDraftSave)cur.noDraftSave=!1;else if(!cur.postSent&&vk.id==Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(cur.oid)){var e=Wall.getDraftData();e.delayed||ajax.post("al_wall.php",Wall.fixPostParams(extend({act:"save_draft",hash:cur.options.post_hash},e)),{onFail:function(){return!0}})}},getDraftData:function(){var _;if(null===(_=cur.options)||void 0===_?void 0:_.no_draft)return{};var e=cur.wallAddMedia||{},t=e.chosenMedia||{},l=cur.wallAddMedia?e.getMedias():[],o=e.shareData||{},i="",a=0,s=null;if(Wall.isPosterEditorOpen())s=(i=cur.poster.getText())?cur.poster.getBkgId():null;else{var r=ge("post_field");i=window.Emoji?Emoji.editableVal(r):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(r),i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(i)}var n={message:i,bkg_id:s};return Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(t)&&t.length&&l.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clone)(t)),l.length&&each(l,(function(_,t){if(t){var l=this[0],s=this[1];switch(l){case"poll":var r=e.pollData(!0,!0);if(!r)return n.delayed=!0,!1;s=r.question,delete r.question,n=extend(n,r);break;case"copyright":var c=e.copyrightData(!0);if(c)return void(n=extend(n,c));break;case"share":if(o.failed||!o.title&&(!o.images||!o.images.length)&&!o.photo_url&&!o.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(n.delayed=!0,!1):void 0;o.video?(s=o.video_owner_id+"_"+o.video_id,n.snippet_video=1):s=o.user_id&&o.photo_id&&!o.noPhoto?o.user_id+"_"+o.photo_id:"",o.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(i)==o.initialPattern&&(n.message=""),n=extend(n,{url:o.url,mode:o.mode,title:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(o.title),description:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(o.description),button_text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(o.button_text),button_action:o.button_action,extra:o.extra,extra_data:o.extraData,photo_url:o.video?"":Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(o.photo_url),open_graph_data:(o.openGraph||{}).data,open_graph_hash:(o.openGraph||{}).hash});break;case"page":o.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(i)==o.initialPattern&&(n.message="");break;case"postpone":var b=+e.postponeDate;return void(n=extend(n,{postpone:b}));case"mark_as_ads":return void(n=extend(n,{mark_as_ads:1}));case _web_donut__WEBPACK_IMPORTED_MODULE_33__.ATTACH_DATA_DONUT_DURATION:return void(n=extend(n,Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.getPostParamsFromDurationMedia)(t)))}this[3]&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(i)==this[3]&&(n.message=""),n["attach"+(a+1)+"_type"]=l,n["attach"+(a+1)]=s,a++}})),n},setDraft:function(_){var e;if(!(null===(e=cur.options)||void 0===e?void 0:e.no_draft)&&(_[0]||_[1]&&_[1].length||null!=_[4])){var t=ge("post_field");if(t){var l=_[4];l||Emoji.val(t,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(_[0]||"")).replace(/\n/g,"<br/>")),Wall.showEditPost((function(){setTimeout((function(){if(l&&cur.poster){Wall.hidePosterFeatureTooltip();var e={text:_[0]||""};if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isString)(l)?e.bkgId=_[4]:isObject(l)&&(cur.poster.isCustomBkgId(l.id)&&cur.poster.addCustomBkg(l),e.bkgId=l.id),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(Wall.getMainPostBlock()))return cur.poster.setBkg(e.bkgId,!0),cur.poster.setText(e.text),void Emoji.val(t,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(_[0])).replace(/\n/g,"<br/>"));Wall.openPosterEditor(e)}if(_[1]&&cur.wallAddMedia)for(var o in _[1])cur.noDraftSave=!0,cur.wallAddMedia.chooseMedia.apply(cur.wallAddMedia,_[1][o]);Wall.checkPosterAvailability(),Wall.saveDraft()}),0)})),_[2]&&wall.focusOnEnd(),_[3]&&(wall.setReplyAsGroup(ge("official"),_[3]),_[3].shareShowImg&&(cur.shareShowImgRestored=_[3].shareShowImg),_[3].donutOnly&&cur.wallAddMedia&&cur.wallAddMedia.donutPostSettings&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly&&cur.wallAddMedia.donutPostSettings.setPostDonutOnly()),cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}}},initPostEditable:function(_){var e=cur.postField;if(!e||e.emojiInited)return!1;e.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(e,{ttDiff:-42,rPointer:!0,controlsCont:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(e),noStickers:!0,onSend:Wall.sendPost,noEnterSend:!0,ref:"post",checkEditable:Wall.postChanged,initUploadForImagePasteCallback:function(_,e,t){window.Upload&&Upload.onFileApiSend(cur.wallUploadInd,[t])}}),addClass(e,"submit_post_inited"),_?setTimeout(Wall.setDraft.pbind(_),0):cur.postFieldZoomText&&cur.postFieldZoomText(cur.postField,cur.wallAddMedia)})),setTimeout((function(){cur.postFieldZoomText&&addEvent(e,"keydown paste",(function(){setTimeout((function(){cur.postFieldZoomText(cur.postField,cur.wallAddMedia)}),0)}))}),0)},showEditPost:function(_){var e=ge("post_field");if(cur.viewAsBox)return setTimeout((function(){e.blur()}),0),cur.viewAsBox();0!==cur.editing&&(setTimeout(WallUpload.init,0),Wall.initComposer(e,{lang:{introText:getLang("profile_mention_start_typing"),noResult:getLang("profile_mention_not_found")},checkLen:Wall.postChanged,onValueChange:Wall.onPostValChange,onItemSelect:Wall.onPostItemSelect},_),Wall.hideEditPostReply(),addClass("submit_post_box","shown"),cur.editing=0,Wall.showPosterFeatureTooltip(),Wall.showPostCopyrightFeatureTooltip(),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(cur.onShowEditPost)&&cur.onShowEditPost(),cur.wallAdsReplacedFeatureTooltip&&Wall.showAdsReplacedTooltip(),stManager.add(["ui_controls.css","ui_controls.js","datepicker.css",window.jsc("web/datepicker.js")]))},postBoxFocus:function(_,e){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.stopEvent)(_||window.event);var t=Wall.isPosterEditorOpen();(cur.postField&&window.Emoji||t)&&setTimeout((function(){e?t?(cur.poster.focusPoster(),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(cur.poster.getPosterElement())[1]-15)):(Emoji.focus(cur.postField),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(cur.postField)[1]-15)):t?cur.poster.focusPoster():Emoji.focus(cur.postField,!0,ge("submit_post_box"))}),0)},initComposer:function(_,e,t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"composer"))t&&t();else if(cur.composerAdded){var l=Composer.init(_,e);t&&t(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(l))}else stManager.add(["wide_dd.css","wide_dd.js"],(function(){cur.composerAdded=!0;var l=Composer.init(_,e);t&&t(),cur.destroy.push(Composer.destroy.bind(Composer).pbind(l))}))},deinitComposer:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"composer");e&&Composer.destroy(e),_.emojiId&&window.Emoji&&Emoji.destroy(_.emojiId)},hasComposerMedia:function(_){var e=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"composer");return!(!e||!e.addMedia)&&e.addMedia.attachCount()>0},composerListShown:function(_){var e=_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"composer");if(!e)return!1;var t=e.wdd,l=0;for(var o in t.shown)l+=1;return!!(t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(t.listWrap)&&l)},onPostValChange:function(_){if(cur.wallAddMedia&&cur.wallAddMedia.checkMessageURLs.apply(window,arguments),"full_own"!=cur.wallType&&"full_all"!=cur.wallType||Pagination.pageTopUpdated(),browser.msie&&!_){var e=ge("post_field");hide(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.elfocus)(e)}},onPostItemSelect:function(_){if(_&&!(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(_[0])>=0)&&cur.wallAddMedia){var e="vk.com/event"+-_[0];cur.wallAddMedia.checkMessageURLs(e,!0)}},hideEditPost:function(_){cur.editing=!1;var e=ge("post_field"),t=cur.wallAddMedia||{},l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e));!browser.opera_mobile&&e&&(!_&&(l||t.chosenMedia||t.getMedias&&t.getMedias().length>0||t.activeState||t.attachCount&&t.attachCount()>0)||(removeClass("submit_post_box","shown"),e&&!l&&cur.postMention&&(cur.postMention.options.minHeight=cur.emptyPostheight||14),cur.onWallSendCancel&&cur.onWallSendCancel(),window.WallUpload&&WallUpload.hide(),cur.wallAddMedia&&cur.wallAddMedia._hideAddMedia(!0)))},clearInput:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("page_add_media");var _=ge("post_field");if(Wall.withMentions){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"mention");e&&(e.rtaEl.innerHTML="",hide(e.cont),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(_))}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_,""),_.blur(),_.phonblur(),Wall.hideEditPost(!0),cur.wallAddMedia&&cur.wallAddMedia.unchooseMedia(),Wall.resetPostVisibilityAccess(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)("export_status",!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)("close_comments",!1),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.forEach(_=>{_()});var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"composer");t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(t.articleConvertEl),t.articleConvertEl=!1)},fixPostParams:function(_){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clone)(_);return e.Message=_.message,delete e.message,e},focusOnEnd:function(_){if(_=ge(_)||ge("post_field"))if("TEXTAREA"!=_.tagName){var e=_.innerHTML?_.innerHTML.length:_.length?_.length:_.childNodes.length-1;if(_.focus(),document.selection){var t=document.selection.createRange();t.moveStart("character",e),t.select()}else window.getSelection().collapse(_,_.childNodes.length)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.elfocus)(_)},isAnonPost:function(){var _=geByClass1("anon_toggle");return _&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(geByClass1("_ui_toggler",_),"on")?1:""},saveAnon:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(geByClass1("_ui_toggler",_),"on");var e=Wall.isAnonPost();Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)("friends_only",!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)("status_export",!e),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)("facebook_export",!e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(ge("submit_post_box"),"anon_field_on");var t=cur.anonPostBtn||getLang("wall_send");cur.anonPostBtn=ge("send_post").innerHTML,ge("send_post").innerHTML=e?getLang("wall_send"):t},showPostSettings:function(_,e){var t=cur.wallAdsReplacedFeatureTooltip&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"addpost_opt");if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"ett")||t){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_),o=l&&l.querySelector(".Post__copyrightButton");t&&Wall.hideAdsReplacedTT(),new ElementTooltip(_,{cls:"post_settings_tooltip"+(o?" post_settings_tooltip_with_custom_btn":""),content:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(l),defaultSide:"top",offset:[0,-5],appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_)}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(l)}e&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.checkKeyboardEvent)(e)&&"click"===e.type&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"ett").toggle()},saveExport:function(_,e,t){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("friends_only")||Wall.isAnonPost()||Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(_),cur.saveExportTO=cur.saveExportTO||{},clearTimeout(cur.saveExportTO[e]),cur.saveExportTO[e]=setTimeout((function(){ajax.post("/al_settings.php",{act:"a_save_export",service:e,disabled:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(_)?0:1,hash:t})}),300)},togglePostVisibilityAccess:function(_,e,t,l){var o=!!t;if(!Wall.isAnonPost()||o){t=t||"";var i="post_visibility_btn",a=cur[i+t];a&&a.hide(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.radiobtn)(_,e,"post_settings_btn"+i+t);var s=ge("post_visibility_btn"+t),r=o?ge("wpe_status_export"):ge("status_export"),n=o?ge("wpe_facebook_export"):ge("facebook_export"),c=geByClass1("post_action_btn_text",s),b=e!==_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.VISIBILITY_ACCESS_OPTIONS.ONLY_FRIENDS;if(b){var d=ge("no_friends_only"+t).innerHTML;c.innerHTML=d,c.setAttribute("aria-label",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(d)),removeClass(s,"on")}else{var E=ge("friends_only"+t),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(E);c.innerHTML=O,c.setAttribute("aria-label",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(O)),addClass(s,"on"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(r,!1),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(n,!1)}r&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(r,!b),n&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(n,!b),l||Wall.postChanged()}},resetPostVisibilityAccess(){Wall.canChangeVisibilityForNewPost()&&Wall.togglePostVisibilityAccess(ge("no_friends_only"),_web_page_wall_constants__WEBPACK_IMPORTED_MODULE_35__.VISIBILITY_ACCESS_OPTIONS.PUBLIC,!1,!0)},canChangeVisibilityForNewPost:()=>!!ge("post_visibility_btn"),initPostVisibilitySelector(_){Wall.canChangeVisibilityForNewPost()&&Object(_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_40__.createPostTooltip)("post_visibility_btn",_.id)},cantAccessDonutPosts:()=>!1===window.cur.donutGroupUserHasWallAccess,togglePostMarkAsAds:function(_,e){e=e||"mute_notifications";var t=ge(e);if(t){var l=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(_);if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(t,l),l)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"prev-state",+Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(t)),addClass(t,"on");else{var o=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"prev-state");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(t,"on",o)}}},needCheckSign:function(){var _=ge("check_sign");return _&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(_)},saveCheckSign:function(_){var e=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"title",e?getLang("wall_check_sign_disabled"):getLang("wall_check_sign_enabled")),window.tooltips&&tooltips.hide(_,{onHide:_.onmouseover.bind(_)}),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(_,!e)},checkAsGroup:function(_){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(_),wall.setReplyAsGroup(_,{fromGroup:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(_)})},sendPost:function(_,e){var t=cur.wallAddMedia||{},l=t.chosenMedia||{},o=cur.wallAddMedia?t.getMedias():[],i=t.shareData||{},a=cur.poster&&!!e,s=a?e.text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(ge("post_field"))),r=!1,n=Wall.isAnonPost(),c=a?null:ge("send_post"),b=cur.options.suggesting?"suggest":cur.wallType;"top"===b&&(b="all"),a&&(o=o.filter(_=>{if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(_)){var e=_slicedToArray(_,1)[0];return["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_33__.MEDIA_TYPE_DONUT_DURATION].includes(e)}}));var d=a?ge("submit_post_box"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_submit_post_box",ge("official")),E=Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.fieldValueIsDonutOnlyPost)(d,t),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(d,"from-oid")==cur.postTo?1:"";d&&cur.postTo||O||cur.defaultPostSettings&&(O=cur.defaultPostSettings.official?1:"");var p={act:"post",message:s,to_id:cur.postTo,type:b,friends_only:!n&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("friends_only"),check_sign:Wall.needCheckSign(),status_export:!n&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("status_export"),close_comments:ge("close_comments")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("close_comments")?1:0:"",mute_notifications:ge("mute_notifications")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("mute_notifications")?1:0:"",mark_as_ads:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("mark_as_ads")?1:0,official:O,signed:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)("signed"),anonymous:n,hash:cur.options.post_hash,from:cur.from?cur.from:"",fixed:cur.options.fixed_post_id||"",situational_suggest_id:cur.options.situational_suggest_id||null},u=0;extend(p,Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.getDonutPostParams)(E,t)),cur.options.additional_save_params&&(p=extend(p,cur.options.additional_save_params));var w,P=cur.wallAddMedia&&cur.wallAddMedia.id||"";function D(_){var e=ge("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)("submit_post_error")||(Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.slideDown)("submit_post_error",100),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.animate)(ge("box_layer_wrap"),{scrollTop:0})),Wall.isPosterEditorOpen()){var t=cur.poster.getErrorWrapperElement();t.innerHTML="",t.appendChild(e)}}if(extend(p,Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.getPostTopicSelectorParams)(String(P))),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(l)&&l.length&&o.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clone)(l)),a&&(p.poster_bkg_id=e.bkgId,p.poster_bkg_access_hash=e.accessHash,e.fallbackObj&&(o.push(["photo",e.fallbackObj.owner_id+"_"+e.fallbackObj.id,!1]),p.poster_photo_hash=e.fallbackObj.post_hash),p.poster_bkg_id!==cur.posterCtaBkgId&&(p.poster_author_bkg_check=!0)),hide("submit_post_error"),o.length){var m=0;w=!1,each(o,(function(_,e){if(e){var l=this[0],a=this[1];switch(l){case"video":if(r||"suggest"==b)break;var d=Wall.getOwnerDraft(cur.oid)[1];if(!d)break;each(d,(function(_,e){e[1]===a&&e[2]&&e[2].upload_new&&m++}));break;case"poll":if(n)return;var E=t.pollData();if(!E)return w=!0,!1;a=E.question,delete E.question,p=extend(p,E);break;case"copyright":if(n)return;var O=t.copyrightData();if(O)return void(p=extend(p,O));break;case"share":if(i.failed||!i.title&&(!i.images||!i.images.length)&&!i.photo_url&&!i.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(w=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&i.button_text&&i.button_action){var P;o.length>1&&(P=getLang("global_share_too_many_attachments")),s.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(P=getLang("global_share_too_many_newlines")),s.length>(cur.options.share||{}).button_exclusive_max_message_len&&(P=getLang("global_share_too_long_message"));var M=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.extractUrls)(" "+s+" "),C=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.extractUrls)(" "+i.url+" ")[0];if(C&&M.length){"/"===C.query&&(C.query=""),"www."===C.domain.substr(0,4)&&(C.domain=C.domain.substr(4));for(var g=0;g<M.length;++g){var T=M[g];if("/"===T.query&&(T.query=""),"www."===T.domain.substr(0,4)&&(T.domain=T.domain.substr(4)),C.domain!=T.domain||C.query!=T.query){P=getLang("global_share_too_many_links");break}}}if(P)return D(P),w=!0,!1}if(!i.title)return D(getLang("global_share_title_required")),w=!0,!1;if(!i.url)return D(getLang("global_share_url_required")),w=!0,!1;if(i.url=new URL(i.url).href,i.video?(a=i.video_owner_id+"_"+i.video_id,p.snippet_video=1):a=i.user_id&&i.photo_id&&!i.noPhoto?i.user_id+"_"+i.photo_id:"",i.share_upload_failed&&!a)return void(i.share_upload_failed=0);if(i.images&&i.images.length&&!Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(i.images[cur.shareShowImg])&&!a&&!i.noPhoto&&!i.share_own_image&&!i.video)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(c),t.uploadShare((function(){Wall.sendPost(!0)})),w=!0,!1;if((cur.options.share||{}).require_image&&!a)return D(getLang("global_share_image_required")),w=!0,!1;i.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(s)==i.initialPattern&&(p.message=""),p=extend(p,{url:i.url,mode:i.mode,title:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(i.title),description:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(i.description),button_text:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(i.button_text),button_action:i.button_action,extra:i.extra,extra_data:i.extraData,photo_url:i.noPhoto||i.video?"":Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.replaceEntities)(i.photo_url),open_graph_data:(i.openGraph||{}).data,open_graph_hash:(i.openGraph||{}).hash});break;case"page":i.initialPattern&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(s)==i.initialPattern&&(p.message="");break;case"postpone":if(n)return;var h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("postpone_date"+t.lnkId);return p=extend(p,{postpone:h}),cur.postponedLastDate=h,void(r=!0);case"mark_as_ads":return void(p=extend(p,{mark_as_ads:1}));case"pretty_cards":if(!t.prettyCardGallery)return;if(t.prettyCardGallery.needSendData())return t.prettyCardGallery.saveCards(Wall.sendPost,(function(_){D(_)})),w=!0,!1;var f=t.prettyCardGallery.getSendData();a=f.attachVal;break;case"podcast":if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(this[2],"attach_disabled"))return!1;break;case _web_donut__WEBPACK_IMPORTED_MODULE_33__.MEDIA_TYPE_DONUT_DURATION:return}this[3]&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(s)==this[3]&&(p.message=""),n&&"photo"!==l||(p["attach"+(u+1)+"_type"]=l,p["attach"+(u+1)]=a,u++)}}));var M=cur.postTo<0||cur.postTo===vk.id;if(cur.wallUploadVideoOpts&&cur.wallUploadVideoOpts.vars.is_wall_postponed_allowed&&M&&m&&!_&&!cur.postponeVideoPost)return Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)()&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)().hide(),void Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showBox)("al_video.php?act=postponed_post_box",{videos_count:m},{onDone:function(_,e){_.removeButtons(),_.addButton(e.video_post_later_text,(function(){cur.postponeVideoPost=!0,Wall.sendPost(!0),_.hide()})),_.addButton(e.video_post_now_text,(function(){Wall.sendPost(!0),_.hide()}),"no")}});if(w)return void(_&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(c))}if(!u&&!s)return _&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(c),void Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.elfocus)("post_field");if(!c||_||!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isButtonLocked)(c)){cur.postponeVideoPost&&(p=extend(p,{postpone_video:!0,postpone_video_hd:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(ge("postponed_post_hd"))})),cur.postAutosave&&clearTimeout(cur.postAutosave),hide("submit_post_error"),cur.postSent=!0;var C=window.GroupsAdminTips&&window.GroupsAdminTips.isShownSection()?1:0;p.update_admin_tips=C;var g=Object(_web_donut__WEBPACK_IMPORTED_MODULE_33__.isPaidAttachPicked)(t,cur.oid);p.donut_duration&&-1!==p.donut_duration&&g&&!cur.donutAttachesApproved?Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)({title:getLang("publish_postponed_title"),onHide:()=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(c)}},getLang("wall_publish_donut_freeing_attaches_confirmation_title"),getLang("publish_postponed_btn"),()=>{Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)().hide(),cur.donutAttachesApproved=!0,Wall.sendPost(_,e)},getLang("global_cancel"),()=>{Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)().hide(),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(c)}):setTimeout((function(){ajax.post("al_wall.php",Wall.fixPostParams(p),{onDone:function(_,e,l,o){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isString)(l)||(l=null),cur.poster&&a&&(cur.poster.unlockEditPoster(),cur.poster.closeEditor(),cur.poster.resetPoster(),cur.posterCtaBkgId&&(cur.posterCtaBkgId=null)),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),Wall.clearInput(),cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1;var i=ge("mark_as_ads"),s=ge("mute_notifications");if(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(i)&&s&&(removeClass(s,"on"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(s,0)),i&&(removeClass(i,"on"),t.donutUpdateVisibility()),cur.options.onSendPostDone)cur.options.onSendPostDone.apply(window,arguments);else{if(o&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.showDoneBox)(o),!isObject(_)||!_.redirect){if(Object(_wall_tabs_utils__WEBPACK_IMPORTED_MODULE_44__.showHiddenNavigableTabs)(),r){if("feed"==b)Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.showDoneBox)(_,{out:3e3});else if("full_own"==b||"full_all"==b)return Wall.showPostponedFull(_);return wall.updateTabVisibility("page_wall_postponed",!0),void Wall.showPostponed(!1,_)}if(("full_own"==b||"full_all"==b)&&(cur.pgStart||nav.objLoc.postponed)){var n=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clone)(nav.objLoc);return delete n.offset,delete n.postponed,vk.id!=cur.oid&&delete n.own,nav.go(n)}if(vk.id!=cur.oid&&"full_own"==b){var c=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clone)(nav.objLoc);return delete c.own,nav.go(c)}return"feed"==b?cur.wallPostCb():"suggest"==b?(wall.updateTabVisibility("page_wall_suggest",!0),Wall.showSuggested(!1,_,e),Wall.suggestUpdate()):void(E?Wall.showDonutWall(_):(ge("wall_tabs")&&geByClass1("ui_tab",ge("wall_tabs")).click(),Wall.receive(_,e),cur.onWallSendPost&&cur.onWallSendPost(),C&&null!==l&&window.GroupsAdminTips&&window.GroupsAdminTips.refreshSection(l)))}nav.go(_.redirect)}},onFail:function(_){if(cur.postSent=!1,cur.postponeVideoPost=!1,cur.donutAttachesApproved=!1,cur.poster&&a&&cur.poster.unlockEditPoster(),cur.posterFeatureTT&&cur.posterFeatureTT.hide(),!cur.options.onSendPostFail){if(!_)return!0;var e=ge("submit_post_error");if(e.innerHTML=_.length>60?'<div class="msg_text">'+_+"</div>":_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)("submit_post_error")||Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.slideDown)("submit_post_error",100),Wall.isPosterEditorOpen()){var t=cur.poster.getErrorWrapperElement();t.innerHTML="",t.appendChild(e)}return!0}cur.options.onSendPostFail.apply(window,arguments)},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(c)},hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(c)},noSort:!0})}),0)}},_repliesLoaded:function(_,e,t,l,o){var i=ge("replies"+_);if(i){var a=i.nextSibling;if(e){var s=i.offsetHeight;i.innerHTML=t,Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)()+(i.offsetHeight-s),0,void 0,!0),setTimeout(Wall.scrollHighlightReply.pbind("post"+e),0)}else i.innerHTML=t;if(a&&"replies_open"==a.className&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(a),ajax._framenext(),_==cur.wallLayer){var r=wkcur.reverse;extend(wkcur,{offset:!r&&o.offset||0,loaded:o.num||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply",i,"div").length,count:o.count}),wall.addReplyNames(l),WkView.wallUpdateReplies(),r||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll())}else wall.addReplyNames(l),Wall.repliesSideSetup(_);Wall.updateMentionsIndex(),setTimeout((function(){Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.getAudioPlayer)().updateCurrentPlaying()}),10),o&&Likes.updateComments("wall"+_,o.count)}},repliesSideSetup:function(_){if(cur.wallLayer!=_){var e=ge("replies"+_);if(e){var t=geByClass1("wr_header",e,"a"),l=ge("post"+_),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(l,"deep_active"),i=ge("replies_side"+_);if(cur.wallMyOpened[_]&&(t||o)){if(!i){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)('<div class="replies_side_wrap"><div id="replies_side'+_+'" class="replies_side"></div></div>');e.parentNode.insertBefore(a,e),(i=a.firstChild).onmouseover=Wall.repliesSideOver.pbind(_),i.onmouseout=Wall.repliesSideOut.pbind(_),i.onclick=o?Wall.hideDeepReplies.pbind(_):Wall.repliesSideClick.pbind(_)}e.onmouseover=Wall.repliesSideOver.pbind(_),e.onmouseout=Wall.repliesSideOut.pbind(_),Wall.repliesSideOver(_)}else hide(i),e.onmouseover=null,e.onmouseout=null}}else WkView.wallUpdateReplies()},repliesSideClick:function(_){var e=ge("replies"+_),t=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)(),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(e)[1];return t>l&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(l-100,0),hide("replies_side"+_),Wall.showReplies(_,3,!1)},repliesSideOver:function(_){var e=ge("replies"+_),t=ge("replies_side"+_);if(e){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(t))[1],o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(t)[1],i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(e)[1],a=e.offsetHeight,s=window.lastWindowHeight||0,r=l+o-s+15,n=i+a-s;cur.wallRepliesSideOver=[_,t,r,n],Wall.repliesSideUpdate()}},repliesSideOut:function(_){cur.wallRepliesSideOver&&cur.wallRepliesSideOver[0]==_&&delete cur.wallRepliesSideOver},repliesSideUpdate:function(_){var e=cur.wallRepliesSideOver;if(e){var t,l=e[1],o=e[4]||{},i=e[5]||"",a="replies_side";void 0===_&&(_=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)()),_<e[2]?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(l),t={marginTop:0,opacity:1}):_<e[3]?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(l),a+=" replies_side_fixed",t={opacity:Math.max(0,Math.min(1,(e[3]-_)/200))}):(a+=" replies_side_hidden",t={marginTop:e[3]-e[2],opacity:0,display:null}),JSON.stringify(o)!==JSON.stringify(t)&&(each(o,(function(_,e){o[_]=null})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(l,extend(o,t)),e[4]=t),i!=a&&(l&&(l.className=a),e[5]=a)}},highlightReply:function(_){(_=ge(_))&&(addClass(_,"reply_highlighted"),setTimeout((function(){removeClass(_,"reply_highlighted")}),1500))},scrollHighlightReply:function(_){if(_=ge(_))if(cur.wallLayer||_.id.match(/^post-?\d+(photo|video|market)?_\d+$/)&&(window.wkcur&&wkcur.shown||window.mvcur&&mvcur.mvShown||cur.pvShown)){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(_,!0)[1];e<0||e>lastWindowHeight-200?Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.animate)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+e-50},300,Wall.highlightReply.pbind(_)):Wall.highlightReply(_)}else{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(_)[1];t<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)()+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header")[1]?(Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(t,300),setTimeout(Wall.highlightReply.pbind(_),300)):Wall.highlightReply(_)}},showReply:function(_,e,t,l){if(cur.viewAsBox)return!1;if(l&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.checkEvent)(l))return!0;if(window.mvcur&&mvcur.post==e)return Videoview.showComment(t),!1;var o=ge("post"+t);if(o)Wall.scrollHighlightReply(o);else if(cur.wallLayer==e)WkView.wallShowPreviousReplies(t);else if(e.match(/market/))Market.comments(e);else{if(_.tt&&_.tt.hide&&_.tt.hide(),"full"==cur.wallType){var i=t.split("_");return delete nav.objLoc.offset,nav.go(extend(nav.objLoc,{reply:i[1]}))}Wall.showReplies(e,!1,t)}return!1},showReplies:function(_,e,t,l){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.checkEvent)(l||window.event))return!0;if(cur.viewAsBox)return cur.viewAsBox();if(cur.wallLayer!=_||!wkcur.reverse){cur.wallMyOpened[_]=3!=e;var o={act:"get_replies",post:_,count:e},i={onDone:Wall._repliesLoaded.pbind(_,t),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind("wrh"+_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind("wrh"+_),local:1};if(t||e&&!(e>20)||(extend(o,{cont:"replies"+_}),extend(i,{frame:1}),cur.onFrameBlocksDone=function(){setTimeout(Wall.repliesSideSetup.pbind(_),browser.msie?100:10)}),ajax.post("al_wall.php",o,i),!browser.msie&&e>0&&e<10){for(var a=ge("replies"+_),s=a&&a.lastChild,r=[];r.length<e&&s;)"DIV"==s.tagName&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(s,"reply")&&r.push(s),s=s.previousSibling;if(r.length==e){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply",a,"div").length;for(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(a,'<a class="wr_header wrh_all"></a>'),Wall.updateRepliesHeader(_,a.firstChild,e,n),hide("replies_side"+_);r.length;)a.appendChild(r.pop());Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)("wrh"+_)}}return!1}},moreReplies:function(_,e,t,l){var o;if(l.deep){var i=_.split("_");o={act:"get_post_replies",offset:e,owner_id:i[0],item_id:i[1],count:t},l.order&&(o.order=l.order)}else o={act:"get_replies",offset:e,post:_,count:t};return extend(o,{rev:l.rev,from:l.from}),ajax.post("al_wall.php",o,{onDone:function(e,t,o){var i=ge("replies"+_);l.clear?i.innerHTML=e:l.rev||l.append?i.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(e)):i.innerHTML=e+i.innerHTML,wall.addReplyNames(t),l.onDone&&l.onDone(e,t,o),Wall.updateMentionsIndex()},onFail:()=>!1,showProgress:l.showProgress,hideProgress:l.hideProgress}),!1},openDeepShortReplies:function(_,e){var t=geByClass1("replies_next",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_));return t&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(t),t.focus(),t.click(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(_)),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(e)},collapseDeepReplies:function(_,e){var t=ge("replies"+e);if(t&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"replies_list_deep")){var l=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)(),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(_)[1],i=Math.round(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.clientHeight)()/2);cur.wallLayer?(o-=l)<i&&Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.animate)(wkLayerWrap,{scrollTop:wkLayerWrap.scrollTop+o-i},300):l>o-i&&Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(o-i),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(ge("post"+e));var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"progress_inline replies_next_loader"});Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(_),t.innerHTML="";var s=ge("reply_box_wrap"+e);s&&hide(s);var r=ge("replies_wrap_deep"+e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",t),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(n,"post-id"),b=wall.getRepliesOrder(c);removeClass(r,"replies_deep_has_field"),addClass(r,"replies_deep_has_short"),wall.updateRepliesOnScroll(),ajax.post("al_wall.php",{act:"get_collapsed_replies",reply_id:e,order:b},{onDone:function(_){t.innerHTML=_},onFail:function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(cur.wallTpl.reply_deep_next,{post_id:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(n,"post-id"),reply_id:e,offset:0,text:getLang("wall_next_n_replies",cur.options&&cur.options.replies_page_count||20),class:" replies_next_deep"}));t.appendChild(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(_)},showProgress:function(){t.appendChild(a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(a)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(a)}})}},overCollapseDeepReplies:function(_){var e=geByClass1("replies_deep_collapse_icon",_),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(e),l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getStyle)(e,"bottom")),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(_),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(_),a=Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)(),s=cur.wallLayer?wkLayerWrap.scrollTop:a;cur.wallLayer&&(i[1]-=a);var r,n,c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.clientHeight)(),b=i[1]+o[1],d=Object(_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_42__.getFixedReplyField)(),E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(d)[1];cur.wallLayer?(r=s+b-c,n=s+i[1]+t[1]+l+l-c):(r=b-c,n=i[1]+t[1]+l+l-c),cur.onScrollCollapseDeepReplies=wall.updCollapseDeepRepliesIcon.pbind(_,e,{iconSize:t,iconBottom:l,collapseSize:o,collapsePos:i,fixedField:d,fixedFieldSize:E,maxFixedScroll:r,topMaxScroll:n}),addEvent(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),addEvent(window,"resize",cur.onScrollCollapseDeepReplies),cur.onScrollCollapseDeepReplies()},outCollapseDeepReplies:function(_){cur.onScrollCollapseDeepReplies&&(removeEvent(cur.wallLayer?wkLayerWrap:window,"scroll",cur.onScrollCollapseDeepReplies),removeEvent(window,"resize",cur.onScrollCollapseDeepReplies),delete cur.onScrollCollapseDeepReplies);var e=geByClass1("replies_deep_collapse_icon",_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(e,{position:null,bottom:null,left:null,right:null})},updCollapseDeepRepliesIcon:function(_,e,t){var l=cur.wallLayer?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)(),o=t.maxFixedScroll;if((cur.wallLayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t.fixedField,"wl_reply_form_fixed")||"full"===cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t.fixedField,"fixed"))&&(o+=t.fixedFieldSize),l<o){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)((t.collapseSize[0]-t.iconSize[0])/2),a=t.topMaxScroll+t.fixedFieldSize-l,s=t.fixedFieldSize+t.iconBottom;a>0&&(s-=a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(e,{position:"fixed",bottom:s,left:t.collapsePos[0]+i,right:"auto"})}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(e,{position:null,bottom:null,left:null,right:null})},updateCollapseDeepReplies:function(_){if(cur.wallTpl&&cur.wallTpl.reply_deep_collapse){var e=ge("replies_wrap_deep"+_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",ge("post"+_));if(e){_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"post-id");var t=ge("replies"+_);if(!t)return t;var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply",t).length>=2,o=geByClass1("replies_deep_collapse",e);if(l){if(o)return;o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(cur.wallTpl.reply_deep_collapse,{reply_id:_})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(o,t)}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(o)}}},showNextReplies:function(_,e,t){var l=e.split("_"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"offset"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"count"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"collapse"),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"replies_prev"),r=cur.wallLayer?ge("wl_post"):ge("post"+e),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)("post"+e,"reply"),c={act:"get_post_replies",owner_id:l[0],item_id:l[1],offset:o,count:i,collapse:a},b=s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPS)(_);if(b&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(b,"reply")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(b,"replies_wrap_deep"))){var d=(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(b,"post-id")||"").split("_")[1];s?c.next_id=d:c.prev_id=d}if(n)cur.wallLayer||(r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",r));else{var E=ge("replies"+e),O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(E,"top-ids");O&&(c.top_replies=O)}var p=r.offsetHeight,u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"post-id");c.order=wall.getRepliesOrder(u);var w=n&&wall.isDescRepliesOrder(u,c.order);w&&(s=!s);var P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"progress_inline replies_next_loader"});return ajax.post("al_wall.php",c,{onDone:function(t,l,i){var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domChildren)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:t})),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(),b=!1;n.forEach((function(_){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"wr_header")){var e=ge(_.id);e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"reply")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"replies_wrap_deep"))||(c.appendChild(_),b=!0)}}));var d,E,O=s&&!w||!s&&w,P=!1;if(O){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(ge("replies_wrap_deep"+e),"replies_deep_has_short")){var D=window.innerHeight||document.documentElement.clientHeight,m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header")[1],M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_),C=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(M)[1];d=cur.wallLayer?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)(),P=cur.wallLayer?C<D:C<d+D-m}E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(c,_)}else E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domLC)(c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(c,_);var g=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(i.num),T=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(i.offset),h=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(i.count),f=Math.max(0,T+(s?-g:g)),W=h-f,A=0;if(b&&(s&&T>0||!s&&W>0)&&(A=s?o-f:Math.min(W,g),i.closest_inx>=0&&(A=Math.min(A,i.closest_inx))),document.activeElement===_?addEvent(_,"focusout",(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(_)})):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(_),A){var L=_.cloneNode(!0);removeClass(L,"replies_next_pre_deleted"),a||(O?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(L,E),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(L,getLang("wall_prev_n_replies",A))):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(L,E),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(L,getLang("wall_next_n_replies",A))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(L,"count",A),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(L,"offset",f))}removeClass(ge("replies_wrap_deep"+e),"replies_deep_has_short");var B=r.offsetHeight-p;if(P&&B){var R=d+B;cur.wallLayer?wkLayerWrap.scrollTop=R:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(R,0,!1,!0)}wall.updateCollapseDeepReplies(e),wall.updateMentionsIndex(),wall.addReplyNames(l),wall.addDeepRepliesBlock(e),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[u]=1,wall.repliesSideSetup(u),wall.updateRepliesOnScroll()},onFail:function(){removeClass(_,"replies_next_pre_deleted")},showProgress:function(){addClass(_,"replies_next_pre_deleted"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(P,_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(P)},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(P)}}),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(!1)},emojiOpts:{},emojiShowTT:function(_,e,t){return void 0!==Wall.emojiOpts[_]&&Emoji.ttShow(Wall.emojiOpts[_],e,t)},emojiHideTT:function(_,e,t){return void 0!==Wall.emojiOpts[_]&&Emoji.ttHide(Wall.emojiOpts[_],e,t)},initReplyEditable:function(_,e,t,l,o){if(_.emojiInited)return!1;var i=ge("reply_button"+t),a=ge("reply_media_preview"+t);_.emojiInited=!0,stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){var s=Emoji.init(_,{ttDiff:l?-40:-42,rPointer:!0,controlsCont:e,shouldFocus:!o,ref:"reply",onSend:function(){Wall.sendReply(t),_.blur()},ctrlSend:function(){return Wall.customCur().wallTpl.reply_multiline||Wall.composerListShown(_)},checkEditable:function(){cur.onReplyChanged&&cur.onReplyChanged(_,t),Wall.checkTextLen(_,"reply_warn"+t)},onChange:function(){i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(i,"reply_send_disabled",!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Emoji.editableVal(_))&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(a,"media_preview_has_medias")),Wall.hideCheckTimer(t,"editing")},onStickerSend:function(_,e){Wall.sendReply(t,!1,{stickerId:_,sticker_referrer:e})},initUploadForImagePasteCallback:Page.initUploadForImagePaste});if(vk.widget&&!window.emojiStickers&&Emoji.updateTabs(),Wall.emojiOpts[t]=s,cur.afterEmojiInit&&cur.afterEmojiInit[t]){var r=geByClass1("emoji_smile",Emoji.opts[s].controlsCont);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(r)&&(cur.afterEmojiInit[t](),delete cur.afterEmojiInit[t])}}))},initEditReply:function(_,e,t,l){var o,i=_,a=ge("reply_field"+_),s=ge("post"+_),r=ge("reply_fakebox"+_),n=ge("reply_box"+_),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(s,"reply"),b=cur.wallLayer?wkcur:cur,d=!1;if(c){if(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",s)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",s),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"deep_active")){if(!cur.reply_to){var E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(s,"answering-id");if(E){var O=_.split("_")[1];cur.reply_to=[Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(E),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(O)],Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to"+_,O)}}wall.addDeepRepliesBlock(_),r=ge("reply_fakebox"+_)}i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"post-id")}else cur.wallLayer?(d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(ge("wl_post"),"deep_active"),o=ge("wl_reply_form_inner")):(o=s,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"deep_active"));if(!o&&r?o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_post_wrap",r):!o&&n&&(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_post_wrap",n)),r){var p=ge("replies"+i),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(p,"can_reply_as_group"),w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(p,"can_reply_as_any_group"),P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"owner-photo")||"",D=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"owner-href")||"",m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"owner-name")||"",M="";w?M=b.wallTpl.reply_form_any_group:u&&(M=b.wallTpl.reply_form_group),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(d&&b.wallTpl.reply_form_new?b.wallTpl.reply_form_new:b.wallTpl.reply_form,{add_buttons:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(M,{post_id:_,oid:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(_),owner_photo:P||"/images/blank.gif"}),post_id:_,oid:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(_),owner_photo:P,owner_href:D,owner_name:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.unclean)(m))})),r.parentNode.replaceChild(n,r),a=ge("reply_field"+_)}if(!a)throw new Error("Failed to init new reply or edit reply: no reply field");if(Wall.initReplyEditable(a,n,_,e,t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(a,"composer"))l&&l();else{var C,g,T,h,f=[],W=!1;window.mvcur&&mvcur.mvShown?C=mvcur.mvMediaTypes:cur.wallLayer==i?C=wkcur.options.rmedia_types:window.pvcur&&cur.pvShown?(C=pvcur.rmedia_types,g=0,T=0):C=b.options&&b.options.rmedia_types,(d||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o.parentElement,"VerticalVideoLayerInfo__commentsReply"))&&(W=!0,g=0,T=0),each(C||b.options&&b.options.media_types||[],(function(){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(this[0],["photo","video","audio","doc","link","page"])&&f.push(this)}));var A=!1,L=i.match(/^(\d+_)?-?\d+_(photo|video|topic|market)?\d+(mv)?(_\d+)?$/);f.length>0&&L?(h={lnk:d?ge("reply_more_attaches"+_):ge("reply_add_media_"+_),preview:ge("reply_media_preview"+_),actionsEl:!1,gearEl:!1,types:f,options:{from:"topic"===L[2]?"board":"comment",limit:2,disabledTypes:["album","market","market_album","poll",_web_ui_media_selector_ui_media_selector__WEBPACK_IMPORTED_MODULE_37__.MEDIA_SELECTOR_GROUP],toggleLnk:!0,maxShown:void 0!==g?g:void 0,hideAfterCount:void 0!==T?T:void 0,vectorIcon:W,hideLabel:getLang("wall_reply_add_attach_label"),toId:"full"===cur.wallType?cur.oid:cur.postTo,onToggleBlock:function(e){var t=ge("reply_box"+_),l=geByClass1("reply_box_photo",t);l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)(l,e)},onMediaChanged:function(){Wall.hideCheckTimer(_,"editing"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)("reply_button"+_,"reply_send_disabled",!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Emoji.editableVal(a))&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)("reply_media_preview"+_,"media_preview_has_medias"))}}},i.match(/^-?\d+_topic/)&&(extend(h.options,{disabledTypes:["album","share","link","page"],limit:10,editable:1,sortable:1,teWidth:280,teHeight:200}),A=!0)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("reply_add_media_"+_),Wall.initComposer(a,{lang:{introText:getLang("profile_mention_start_typing"),noResult:getLang("profile_mention_not_found")},toup:A,wddClass:"reply_composer_dd",width:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(a.parentNode)[0],media:h,isReply:!0},l)}return void 0!==a.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),{postId:i,postEl:o,isReply:c,rf:a}},showEditReply:function(_,e,t,l,o,i){if(cur.viewAsBox)return setTimeout((function(){ge("reply_field"+_).blur()}),0),cur.viewAsBox();if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)("post"+_,"Post--with_closed_comments_donut"))return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)("replies_wrap"+_,{display:""}),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(e);var a=wall.initEditReply(_,t,o,i);if(a.rf){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("reply_box_wrap",a.rf));var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",a.rf);s&&addClass(s,"replies_deep_has_field")}return cur.wallMyOpened&&(cur.wallMyOpened[_]=cur.wallMyOpened[_]||!1),cur.editing===_?(Emoji.editableFocus(a.rf,!1,!0),!1):(Wall.hideEditPostReply(),a.isReply?addClass(ge("replies_wrap_deep"+_),"deep_reply_box_open"):addClass(a.postEl,"reply_box_open"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)("replies_wrap"+_,{display:""}),cur.editing=_,window.Emoji&&setTimeout((function(){Emoji.editableFocus(a.rf,!1,!0),Wall.repliesSideOver(_)}),0),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.triggerEvent)(window,"scroll"),void 0!==a.rf.emojiId&&cur.afterEmojiInit&&cur.afterEmojiInit[_]&&(cur.afterEmojiInit[_](),delete cur.afterEmojiInit[_]),cur.wallTpl&&cur.wallTpl.reply_multiline_intro&&ajax.post("al_wall.php",{act:"a_ctrl_submit_intro",hash:cur.wallTpl.poll_hash},{onDone:function(e){e&&cur.editing===a.postId&&Wall.replySubmitTooltip(_,1)},onFail:function(){return!0}}),window.mvcur&&(mvcur.post==a.postId&&Videoview.onShowEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),mvcur.scrollBottom&&mvcur.scrollBottom()),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(cur.onReplyFormSizeUpdate)&&cur.onReplyFormSizeUpdate(a.rf),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(cur.onReplyFormFocus)&&cur.onReplyFormFocus(a.rf),!1)},hideEditReply:function(_,e){cur.editing=!1;var t,l=ge("reply_field"+_),o=ge("post"+_),i=ge("reply_box"+_),a=cur.reply_to&&Wall.getReplyName(cur.reply_to[0]),s=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(window.Emoji?Emoji.editableVal(l):""),r=Wall.hasComposerMedia(l),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"reply");if(!(t=cur.wallLayer?ge("wl_reply_form_inner"):n?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",o):o)&&i&&(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_post_wrap",i)),l&&(!r||e)){if(a&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(a)&&a[1]&&(s&&a[1].indexOf(s)||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(l,""),s="")),e&&(s||r)){var c=l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(l,"composer");c?Composer.reset(c):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(l,""),s="",hide(geByClass1("reply_warn",t))}if(!(browser.opera_mobile||browser.safari_mobile||s)){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)()&&Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)().isVisible()||(n?removeClass(ge("replies_wrap_deep"+_),"deep_reply_box_open"):removeClass(t,"reply_box_open")),ge("reply_link"+_)&&hide("replies_wrap"+_),window.tooltips&&i&&tooltips.hideAll(i),l.blur(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.triggerEvent)(window,"scroll"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to"+_,""),hide("reply_to_title"+_),cur.reply_to=!1;var b=Wall.emojiOpts[_];b>=0&&Emoji.opts[b]&&Emoji.opts[b].onChange&&Emoji.opts[b].onChange(),cur.onReplyFormSizeUpdate&&cur.onReplyFormSizeUpdate();var d=cur.replySubmitSettings;d&&d.tt&&d.tt.el&&d.tt.destroy(),window.mvcur&&mvcur.post==_&&(Videoview.onHideEditReply(),mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate())}}},replyNamesRE:function(){wall.addReplyNames({});var _=wall.getReplyNames();if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isEmpty)(_))return!1;var e=[];return each(_,(function(_,t){t&&(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(t)&&(t=t[1]),"string"==typeof t&&e.push(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.escapeRE)(t)))})),new RegExp("^("+e.join("|")+")")},replyTo:function(_,e,t,l){var o=window.cur.wallLayer==_?wkcur:window.cur;Wall.showEditReply(_,l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to"+_,e);var i=o.reply_to&&Wall.getReplyName(o.reply_to[0]);o.reply_to=[t,e];var a=Wall.getReplyName(t),s=ge("reply_as_group"+_),r=_.match(/^(-?\d+)_([a-z]+)?(\d+)([a-z]+)?$/),n=r[1],c=r[2]||"",b=r[4]||"",d=ge("post"+n+c+"_"+e),E=d&&geByClass1("reply_to",d,"a"),O=Wall.replyNamesRE(),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",d)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",d),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(p,"deep_active"),w=u?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",d):null,P=w?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(w,"post-id"):_,D="";if(!u||w){var m=(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(a)?a[0]:a)||"";m='<a class="reply_to_mem" onclick="return wall.showReply(this, \''+P+"', '"+n+c+"_"+e+b+"', event);\">"+m+"</a>";var M='<span class="reply_to_cancel" onclick="return Wall.cancelReplyTo(\''+P+"', event);\"></span>",C='<div class="reply_to_label">'+langStr(getLang("global_reply_to"),"user",m)+"</div>";D=u?C+M:M+C}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to_title"+P,D);var g=ge("reply_field"+P);if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(a)&&a[1]&&window.Emoji){var T=g,h=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Emoji.val(T)));!(h=h.replace(/&nbsp;/g," "))||i&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(i)&&!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.winToUtf)(i[1]).indexOf(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.winToUtf)(h))?Emoji.val(T,a[1]):O&&(h=h.replace(O,a[1]),Emoji.val(T,h));var f=Wall.emojiOpts[_];f>=0&&Emoji.opts[f]&&Emoji.opts[f].onChange&&Emoji.opts[f].onChange(),Emoji.focus(T,!0)}if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)("reply_to_title"+P,D),s){var W=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(s.parentNode)&&n<0&&E&&E.getAttribute("rid")===n;Wall.setReplyAsGroup(s,{from:W?n:vk.id})}var A=Object(_web_wall_reply_utils__WEBPACK_IMPORTED_MODULE_42__.getFixedReplyField)();return u&&g&&A&&Object(_web_wall_deep_replies_utils__WEBPACK_IMPORTED_MODULE_41__.scrollOutsideFixedReplyArea)(g,A),o.onReplyFormSizeUpdate&&o.onReplyFormSizeUpdate(),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.stopEvent)(l),!1},cancelReplyTo:function(_,e){var t=window.cur.wallLayer==_?wkcur:window.cur,l=ge("reply_field"+_),o=t.reply_to&&Wall.getReplyName(t.reply_to[0]),i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(window.Emoji?Emoji.editableVal(l):"")),a=Wall.replyNamesRE(),s=ge("post"+_),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",s)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",s),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(r,"deep_active");if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(o)&&o[1]&&window.Emoji){i&&o[1].indexOf(i)?a&&(i=i.replace(a,""),Emoji.val(l,i)):(i="",Emoji.val(l,i));var c=Wall.emojiOpts[_];c>=0&&Emoji.opts[c]&&Emoji.opts[c].onChange&&Emoji.opts[c].onChange(),Emoji.focus(l,!0)}if(hide("reply_to_title"+_),n){var b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(s,"answering-id");if(b){var d=_.split("_")[1];t.reply_to=[Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(b),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(d)],Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to"+_,d)}else t.reply_to=!1,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to"+_,"")}else window.mvcur&&mvcur.post==_?mvcur.mvReplyTo=!1:t.reply_to=!1,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to"+_,"");return t.onReplyFormSizeUpdate&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(t.onReplyFormSizeUpdate)&&t.onReplyFormSizeUpdate(l),window.mvcur&&mvcur.onReplyFormSizeUpdate&&mvcur.onReplyFormSizeUpdate(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.stopEvent)(e),!1},replySubmitTooltip:function(_,e,t){var l=_&&window.cur.wallLayer==_?wkcur:window.cur,o=_&&(ge("reply_box"+_)||ge("reply_fakebox"+_)),i=o&&geByClass1("button_blue",o,"div"),a=l.replySubmitSettings;if(!(t&&i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(i)))if(t=t||i,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"flat_button")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isButtonLocked)(t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"button_disabled"))!e&&a&&a.tt&&a.tt.hide&&a.tt.hide();else if(a||(a=l.replySubmitSettings=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"reply_submit_hint_tt_point"})),e){if(t)if(a.parentNode==t&&a.tt&&a.tt.show)a.tt.show();else{a.tt&&a.tt.el&&a.tt.destroy(),t.insertBefore(a,t.firstChild);var s=Wall.customCur().wallTpl.reply_multiline?1:0,r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(Wall.customCur().wallTpl.reply_multiline_hint,{enabled:s?"on":"",disabled:s?"":"on"}),n=o&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",o)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",o)),c=n&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(n,"deep_active");Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(a,{text:r,typeClass:"tt_default_right",slide:15,shift:c?[15,8]:[0,8],asrtl:1,hasover:1,toup:!1,showdt:700,hidedt:700,dir:"auto",noZIndex:!0,onCreate:function(){radioBtns.reply_submit={els:Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("radiobtn",ge("reply_submit_hint_opts"))),val:r?1:0}}})}}else a&&a.tt&&a.tt.hide&&a.tt.hide()},onReplySubmitChanged:function(_,e){if(cur.wallTpl?cur.wallTpl.reply_multiline=_:mvcur.wallTpl&&(mvcur.wallTpl.reply_multiline=_),Wall.customCur().wallTpl&&(Wall.customCur().wallTpl.reply_multiline=_),e){var t=cur.replySubmitSettings;t&&t.tt&&t.tt.el&&t.tt.destroy()}else ajax.post("al_wall.php",{act:"a_save_ctrl_submit",value:_,hash:Wall.customCur().wallTpl.poll_hash}),window.Notifier&&Notifier.lcSend("wall_reply_multiline",{value:_})},getReplyFromId:function(_){var e=ge("reply_as_group"+_);return!(!e||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(e.parentNode))&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_submit_post_box",e),"from-oid")},showCheckTimer(_,e,t){var l=ge("reply_field"+_),o=ge("reply_box"+_),i=o&&geByClass1("WallCheckComment__timer",o);if(l&&i){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(l,{text:t.description,showdt:0,hidedt:0,shift:[0,-1],width:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(l)[0],forcetoup:!0,nohide:!0,noZIndex:browser.msie_edge,className:"WallCheckComment__tt"}),geByTag("span",i).forEach(_=>{_.style.animationDuration=t.delay+"s"}),o.classList.add("WallCheckComment--shown");var a=setTimeout(()=>{o.classList.remove("WallCheckComment--shown"),Wall.sendReply(_,void 0,e)},1e3*t.delay);i.timeout=a,i.onclick=()=>{Wall.hideCheckTimer(_,"button")},cur.destroy||(cur.destroy=[]),cur.destroy.push(()=>{a&&clearTimeout(a)}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.elfocus)(l)}},hideCheckTimer(_){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=ge("reply_field"+_),l=ge("reply_box"+_),o=l&&geByClass1("WallCheckComment__timer",l);if(t&&o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"check_timestamp");e&&i&&Wall.isCheckTimerShown(_)&&ajax.post("al_wall.php",{act:"check_comment_cancelled",post_raw:_,timestamp:i,reason:e}),o.timeout&&clearTimeout(o.timeout),t.tt&&t.tt.hide&&t.tt.hide(),l.classList.remove("WallCheckComment--shown"),"button"===e&&setTimeout(()=>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.elfocus)(t),0)}},isCheckTimerShown(_){var e=ge("reply_box"+_);return e&&e.classList.contains("WallCheckComment--shown")},sendReply:function(_,e,t){t=extend({},t);var l,o=ge("replies_wrap_deep"+_),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("reply_to"+_);if(o?(l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",o)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",o),"post-id"),i=i||_.split("_")[1]):l=_,window.mvcur&&mvcur.post==l)return Videoview.sendComment(l,e,t);var a,s,r,n=window.cur.wallLayer==l,c=n?ge("wl_post"):ge("post"+l),b=ge("replies"+_),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(c,"deep_active"),E=n?wkcur:window.cur,O=ge("reply_field"+_),p=O&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(O,"composer"),u=E.reply_to&&Wall.getReplyName(E.reply_to[0]),w=O&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(O,"send");if(w&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(w))return w(_,e,t);if(t.stickerId)s={message:"",attach1_type:"sticker",attach1:t.stickerId,sticker_referrer:t.sticker_referrer};else if(t.suggest)s={message:t.suggest};else{if((s=p?Composer.getSendParams(p,Wall.sendReply.pbind(_)):{message:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Emoji.editableVal(O))}).delayed)return;if(!s.attach1_type&&(!s.message||Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(u)&&u[1]&&!u[1].indexOf(s.message)))return void Emoji.editableFocus(ge("reply_field"+_),!1,!0)}var P=window.wkcur&&ge("wk_content");if(O&&(P&&P.contains(O)?wkcur.wallCheckComments:E.wallCheckComments)){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(O,"check_in_progress"))return;if(!(r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(O,"check_timestamp")||void 0))return Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.stopEvent)(e),void ajax.post("al_wall.php",{act:"check_comment",post_raw:l,text:s.message},{onDone(e){e&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(O,"check_timestamp",e.timestamp),e.description&&e.delay)?Wall.showCheckTimer(_,t,e):Wall.sendReply(_,void 0,t)},onFail:()=>(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(O,"check_timestamp",Date.now()),Wall.sendReply(_,void 0,t),!0),showProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(O,"check_in_progress",!0)},hideProgress(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(O,"check_in_progress",null)}});if(Wall.isCheckTimerShown(_))return void Wall.hideCheckTimer(_,"button");Wall.hideCheckTimer(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(O,"check_timestamp",null)}t.stickerId||t.suggest||(p?a=Composer.reset(p):window.Emoji&&Emoji.val(O,""),O.autosize&&O.autosize.update()),E.wallMyOpened=E.wallMyOpened||{},E.wallMyReplied[l]=1,E.wallMyOpened[l]=1;var D=ge("post_hash"+l)?ge("post_hash"+l).value:E.options.post_hash,m=null,M=d&&(o||!n&&"full"!==E.wallType),C=wall.getRepliesOrder(l),g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(b,"top-ids"),T=!1;if(M&&b){var h=!o&&wall.isDescRepliesOrder(l,C)?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(b):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domLC)(b);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(h,"replies_next")&&(M=!1,T=!0)}extend(s,{act:"post",type:E.wallType,reply_to:l,reply_to_msg:i,reply_to_user:E.reply_to&&E.reply_to[0]||0,start_id:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("start_reply"+l),from:n?"wkview":"",hash:D,only_new:M?1:0,need_last:T?1:0,order:C,top_replies:g||null,timestamp:r}),E.reverse&&(s.rev=1);var f,W=wall.getReplyFromId(_);if(W&&(s.from_oid=W),f=E.wallType?"feed"==E.wallType?"news"==E.section?"feed_"+(E.subsection?E.subsection:E.section):"recommended"==E.section?"feed_recommended"+("recent"!=E.subsection?"_"+E.subsection:""):-1!==["friends","groups","videos","photos","list"].indexOf(E.section)?"feed_"+E.section+(E.subsection?"_"+E.subsection:""):"feed_"+E.section:"top"==E.wallType?"wall_top":"wall_"+(E.onepost?"one":(E.wallType||"").indexOf("full_")?"page":"full"):E.module,extend(s,{ref:f}),browser.mobile?Wall.hideEditReply(_):(Emoji.editableFocus(O,!1,!0),Wall.cancelReplyTo(_,e)),hide("reply_warn"+_),ajax.post("al_wall.php",Wall.fixPostParams(s),{onDone:function(e,t,o,i){if(d){if(M)return wall.onOnlyNewReplySent.apply(window,arguments);if(T)return wall.onLastChunkReplySent.apply(window,arguments);if(n)return wall.onNewReplySentLayer.apply(window,arguments)}if("full"===E.wallType)return d?FullWall.onNewReplySent.apply(window,arguments):FullWall.onReplySent.apply(window,arguments);E.wallMyReplied[l]=0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("reply_link"+l),hide("reply_warn"+l),Wall._repliesLoaded(_,!1,t,o,i),Wall.processPostReplyActions(e)},onFail:function(_){if(m&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(m),p?a=Composer.restore(p,a):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(O,s.message),O.autosize&&O.autosize.update(),_)return Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)(getLang("global_error"),_),!0},showProgress:function(){d?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disableButton)(ge("reply_button"+_),!0):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(ge("reply_button"+_))},hideProgress:function(){d?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disableButton)(ge("reply_button"+_),!1):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(ge("reply_button"+_))}}),window.cur.onPostReply&&window.cur.onPostReply(_),!s.from_oid&&s.message&&!M){var A=-++E.wallMyRepliesCnt,L=Emoji.emojiToHTML(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(s.message),!0),B=wall.getReplyNames(),R=s.reply_to_user<0?getLang("wall_replied_to_group"):B[s.reply_to_user]&&B[s.reply_to_user][0],v=R?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(E.wallTpl.reply_link_to,{to_user:R}):"";if(m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(E.wallTpl.reply_fast,{reply_id:"0_"+A,message:L.replace(/\n/g,"<br/>"),to_link:v,date:Wall.getNowRelTime(E)})),b&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(b)||ge("reply_link"+_))Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("reply_link"+_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("replies_wrap"+_);else if(!E.onepost){var I=b.nextSibling;if(I&&"replies_open"==I.className&&Wall.openNewComments(_),!n){var j=geByClass1("wr_header",b,"a"),U=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply",b,"div").length+1,K=U;j&&(K=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(j.getAttribute("offs").split("/")[1])+1),(K>5||U<K)&&(j||b.insertBefore(j=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("a",{className:"wr_header"}),b.firstChild),Wall.updateRepliesHeader(_,j,U,K))}}E.reverse?b.insertBefore(m,b.firstChild):b.appendChild(m),n&&(WkView.wallUpdateReplies(),E.reverse||(wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()))}},onOnlyNewReplySent:function(_,e,t){var l=ge("post"+_),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(l,"reply"),i=o?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",l)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",l):l,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(i,"post-id"),s=!o&&wall.isDescRepliesOrder(a);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"deep_active")){var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",l);o&&r&&(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"post-id"));var n=cur.wallLayer===a,c=Wall._getRepliesInfoBeforeAddNewReply(_,n),b=Wall._checkVisibilityBeforeAddNewReply(_,c,s,n);o&&wall.addDeepRepliesBlock(_);var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(e);s&&c.repliesListEl.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(d,c.repliesListEl.firstChild):c.repliesListEl.appendChild(d),Wall._fixScrollAfterAddNewReply(_,c,b,s,n),o&&wall.updateCollapseDeepReplies(_),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(d),wall.incReplyCounter(i),wall.addReplyNames(t)}},onLastChunkReplySent:function(_,e,t,l,o,i){var a=ge("post"+o),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(a,"reply"),r=s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",a)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",a):a,n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"post-id"),c=!s&&wall.isDescRepliesOrder(n);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(r,"deep_active")){var b=cur.wallLayer===n,d=Wall._getRepliesInfoBeforeAddNewReply(o,b),E=Wall._checkVisibilityBeforeAddNewReply(o,d,c,b);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(d.repliesListEl,e),Wall._fixScrollAfterAddNewReply(o,d,E,c,b);var O=ge("post"+i);Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(O),s&&wall.updateCollapseDeepReplies(o),wall.incReplyCounter(r,1,_),wall.addReplyNames(l)}},_getRepliesInfoBeforeAddNewReply:function(_,e){var t=e?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)(),l=window.innerHeight||document.documentElement.clientHeight,o=t+(e?0:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header_cont")[1]),i=t+l,a=ge("replies"+_),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(a,e)[1],r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(a)[1];return{repliesListEl:a,scrollY:t,topY:o,bottomY:i,viewportHeight:l,repliesListY:s,repliesListH:r,repliesListEndY:s+r,layerFieldH:e?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("wl_reply_form")[1]:0}},_checkVisibilityBeforeAddNewReply:function(_,e,t,l){return t?l?e.repliesListY>0&&e.repliesListY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListY&&e.bottomY>e.repliesListY:l?e.repliesListEndY>0&&e.repliesListEndY<e.viewportHeight-e.layerFieldH:e.topY<e.repliesListEndY&&e.bottomY>e.repliesListEndY},_fixScrollAfterAddNewReply:function(_,e,t,l,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(e.repliesListEl)[1];if(l)t||Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(e.repliesListY-100,300,!1,!0);else if(t){var a=e.scrollY+i-e.repliesListH;o?wkLayerWrap.scrollTop=a:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(a,0,!1,!0)}else{var s=e.repliesListY+i-300;o?Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.animate)(wkLayerWrap,{scrollTop:e.scrollY+s},300):Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(s,300,!1,!0)}},incReplyCounter:function(_,e,t){e=e||1;var l,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"post-id"),i=geByClass1("comment",_);i&&(t||(l=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(i,"count"),t=Math.max(0,l+e)),Likes.update("wall"+o,{comment_num:t}))},onNewReplySentLayer:function(_,e,t,l){var o=ge("wl_post"),i=geByClass1("wl_replies",o);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(i,e);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domChildren)(i).filter((function(_){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"reply")})).length;extend(wkcur,{offset:t,loaded:a,count:_}),wall.addReplyNames(l),WkView.wallUpdateReplies();var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"post-id");wall.isDescRepliesOrder(s)?wkLayerWrap.scrollTop=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(o)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("wl_replies_wrap")[1]-30:wkLayerWrap.scrollTop=wkLayerWrap.scrollHeight,WkView.wallUpdateRepliesOnScroll()},postTooltip:function(_,e,t,l){if(!cur.viewAsBox){var o=(t||{}).reply,i=(t||{}).className||"",a=o&&!(o%2)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(_)[0]>420;l=l||{},o||(l.appendEl=bodyNode),Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(_,extend({url:"al_wall.php",params:extend({act:"post_tt",post:e},t||{}),slide:15,shift:[a?417:27,6,6],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",className:"rich wall_tt"+i,typeClass:a?"tt_default_right":"tt_default"},l))}},adsMarkTooltip:function(_){cur.viewAsBox||Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(_,{black:1,shift:[15,7,0],text:_.getAttribute("data-tooltip")})},hideEditPostReply:function(_,e){if(!1!==cur.editing&&(cur.wallLayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)("wl_post","deep_active")&&(e=!0),e||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(boxLayerBG)&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(layerBG))){var t=_&&_.target?_.target:{},l=t.id;cur.editing?cur.editingHide?cur.editingHide(cur.editing,t):_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_reply_wrap",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"reply_link")||l=="reply_field"+cur.editing||"reply_to_link"==t.className)||Wall.hideEditReply(cur.editing):(cur.wallAddMedia||{}).chosenMedia||_&&"post_field"==l||Wall.hideEditPost()}},postShowDeletedMessage:function(_,e){var t=ge("post"+_);if(t){var l=geByClass1("_post_content",t)||geByClass1("feedback_row_t",t);Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.revertLastInlineVideo)(l),hide(l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(l),"post_publish")&&hide(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(l));var o="post_del"+_,i=ge(o),a='<span class="dld_inner">'+e+"</span>";return i?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(i,a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(i)):t.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{id:o,className:"dld",innerHTML:a})),!0}return!1},postHideDeletedMessage:function(_){var e=ge("post"+_);if(e){var t=geByClass1("_post_content",e)||geByClass1("feedback_row_t",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(t),"post_publish")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(t));var l=ge("post_del"+_);return hide(l),!0}return!1},isArchiveWall:function(){return cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module},rollbackPostsArchiveState:function(_,e,t){if(Wall.isArchiveWall()&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.linkLocked)(_)){var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_rollback_state",from:ge("page_wall_more_tab")?"profile":"wall",postId:l,hash:t},{onDone:function(_){cur.wallArchiveRolledback=!0,Wall.postShowDeletedMessage(e,_)},showProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockLink)(_),hideProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockLink)(_)})}},restoreLastRollbackPostsArchiveState:function(_,e,t){if(Wall.isArchiveWall()&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.linkLocked)(_)){var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e.split("_")[1]);ajax.post("al_wall_archive.php",{act:"a_restore_last_rollback",from:ge("page_wall_more_tab")?"profile":"wall",postId:l,hash:t},{onDone:function(_){delete cur.wallArchiveRolledback,Wall.postShowDeletedMessage(e,_)},showProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockLink)(_),hideProgress:Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockLink)(_)})}},postSetArchiveState:function postSetArchiveState(actionEl,postRaw,hash,state,isRollback){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.actionsMenuItemLocked)(actionEl)&&!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.linkLocked)(actionEl)){var postId=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(postRaw.split("_")[1]),isActionMenuItem=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(actionEl,"ui_actions_menu_item"),localCur=cur.wallLayer?wkcur:cur;localCur&&(localCur.wallMyDeleted||(localCur.wallMyDeleted={}),localCur.wallMyDeleted[postRaw]=!Wall.isArchiveWall()==!state?0:1);var extended=!isRollback&&(Wall.isArchiveWall()?cur.wallArchiveRestored>=3&&!cur.wallArchiveRolledback:!cur.wallArchiveArchived);ajax.post("al_wall_archive.php",{act:"a_set_state",from:ge("page_wall_more_tab")?"profile":cur.pid?"post":"wall",hash,state:state?1:void 0,extended:extended?1:void 0,postId},{onDone:function onDone(msg,js){if(Wall.isArchiveWall()&&(state=!state,isRollback||(cur.wallArchiveRestored||(cur.wallArchiveRestored=0),cur.wallArchiveRestored++)),state&&(cur.wallArchiveArchived=!0),isRollback?Wall.postHideDeletedMessage(postRaw):Wall.postShowDeletedMessage(postRaw,msg)){"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(state?-1:1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(postEl,"reply")&&(state?--cur.pgOffset:++cur.pgOffset,state?--cur.pgCount:++cur.pgCount,FullWall.repliesSummary(cur.pgCount));var postEl=ge("post"+postRaw);"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(postEl,"own")&&(state?++cur.deletedCnts.own:--cur.deletedCnts.own),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(postEl,"all")&&(state?++cur.deletedCnts.all:--cur.deletedCnts.all),Wall.isArchiveWall()&&(state?--cur.deletedCnts.archive:++cur.deletedCnts.archive),Wall.update())}if(js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.logEvalError)(_,js)}},showProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem.pbind(actionEl):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockLink)(actionEl),hideProgress:isActionMenuItem?_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem.pbind(actionEl):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockLink)(actionEl)})}},deletePost:function(_,e,t,l,o){(cur.wallLayer?wkcur:cur).wallMyDeleted[e]=1;var i=ge("post"+e),a=geByClass1("post_actions",i),s={act:"delete",post:e,hash:t,root:l?1:0,confirm:o?1:0,from:"wall"};cur.suggestedDeletedCount&&cur.suggestedDeletedCount>=2&&(s.delete_all=1),Object(_internal_nospam_common__WEBPACK_IMPORTED_MODULE_43__.isClaimContent)()&&(s._nol=JSON.stringify(window.nav.objLoc)),ajax.post("al_wall.php",s,{onDone:function(o,a,s){if(s)var r=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)(o,s,getLang("global_delete"),(function(){r.hide(),wall.deletePost(_,e,t,l,1)}),getLang("box_cancel"));else{Wall.postShowDeletedMessage(e,o),"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(-1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"reply")&&(cur.pgOffset--,cur.pgCount--,FullWall.repliesSummary(cur.pgCount));var n=ge("post_publish_wrap"+e);n&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(n,"suggest")&&(void 0===cur.suggestedDeletedCount&&(cur.suggestedDeletedCount=0),cur.suggestedDeletedCount++),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"suggest")?Wall.suggestUpdate(-1):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"own")&&++cur.deletedCnts.own,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"all")&&++cur.deletedCnts.all,Wall.isArchiveWall()&&++cur.deletedCnts.archive,Wall.update())}},showProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(_):addClass(a,"post_actions_progress")},hideProgress:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem)(_):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"flat_button")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(_):removeClass(a,"post_actions_progress")}});var r=ge("delete_post"+e);r&&r.tt&&r.tt.el&&r.tt.destroy()},markAsSpam:function markAsSpam(el,post,hash,inline){var postEl="block_market-items"===post?ge(post):ge("post"+post),adData=postEl?postEl.getAttribute("data-ad"):"";ajax.post("al_wall.php",{act:"spam",post,ad_data:adData,hash,from:inline?"inline":""},{onDone:function onDone(msg,js){if(inline)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(el).replaceChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:msg}),el);else{var postSelector="#post"+post,r=el.closest(postSelector)||document.querySelector(postSelector),t=geByClass1("_post_content",r)||geByClass1("feedback_row_t",r);Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.revertLastInlineVideo)(r);var pd=ge("post_del"+post);pd?(pd.innerHTML='<span class="dld_inner">'+msg+"</span>",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(pd)):r.appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{id:"post_del"+post,className:"dld",innerHTML:'<span class="dld_inner">'+msg+"</span>"})),hide(t)}if(js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.logEvalError)(_,js)}},showProgress:function(){el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(el,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem)(el):inline&&(hide(el),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(el)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(el).appendChild(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span",{className:"progress_inline"}))))},hideProgress:function(){el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(el,"ui_actions_menu_item")?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem)(el):inline&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(el),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(el)))},stat:[jsc("web/privacy.js"),"privacy.css"]});var btn=ge("delete_post"+post);btn&&btn.tt&&btn.tt.el&&btn.tt.destroy()},showIgnoreItemReasons:function(_,e,t,l,o,i,a){var s="block_market-items"===e?ge(e):ge("post"+e);if(s){var r=s.getAttribute("data-ad");Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.revertLastInlineVideo)(s),ajax.post("/al_wall.php?misc",{act:"get_ignore_reasons",post_raw:e,feed_raw:t,caption_type:o,uids:i,hash:l,ad_data:r,mode:a},{onDone:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(s,_)},showProgress:function(){_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"ui_actions_menu_item")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem)(_)},hideProgress:function(){_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"ui_actions_menu_item")&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem)(_)}})}},ignoreAdsItem:function(_,e,t){var l=ge("post"+_),o=l.getAttribute("data-ad"),i=geByClass1("ui_actions_menu_wrap",l);if(l)return i&&uiActionsMenu.toggle(i,!1),Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.revertLastInlineVideo)(l),new Promise((i,a)=>{ajax.post("/al_feed.php?misc",{act:"a_ignore_item",post_raw:_,feed_raw:e,hash:t,ad_data:o,no_html:1},{onDone:function(){hide(l),i()},onFail:a})})},ignoreAdsOwner:function(_,e,t,l){var o=ge("post"+_);o&&ajax.post("/al_feed.php?misc",{act:"a_ignore_owner",post_raw:_,owner_id:e,hash:t,list:0,no_html:1},{onDone:function(_){hide(o)},showProgress:l&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind(l),hideProgress:l&&_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind(l)})},markAsAds:function(_,e,t,l){ajax.post("al_wall.php",{act:"mark_as_ads",post:_,hash:e,full:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(l)},{onDone:function(e){ge("ui_actions_menu_item_mark_as_ads"+_).innerHTML=e}})},restorePost:function(_,e,t){return(cur.wallLayer?wkcur:cur).wallMyDeleted[_]=0,ajax.post("al_wall.php",{act:"restore",post:_,hash:e,root:t?1:0},{onDone:function(e){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("post_del_btn"+_),Wall.postHideDeletedMessage(_)){var t=ge("post"+_);"full_own"==cur.wallType||"full_all"==cur.wallType?(Pagination.recache(1),FullWall.updateSummary(cur.pgCount)):"full"==cur.wallType&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"reply")&&(cur.pgOffset++,cur.pgCount++,FullWall.repliesSummary(cur.pgCount)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"suggest")?Wall.suggestUpdate(1):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"postponed")?wall.postponeUpdateCount():"own"!=cur.wallType&&"all"!=cur.wallType&&"archive"!=cur.wallType||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"own")&&--cur.deletedCnts.own,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"all")&&--cur.deletedCnts.all,Wall.isArchiveWall()&&--cur.deletedCnts.archive,Wall.update())}}}),!1},blockPostApp:function(_,e,t,l){ajax.post("al_wall.php",{act:"block_post_app",aid:_,from:e,hash:t},{onDone:function(_){l.parentNode.parentNode.innerHTML=_},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind(l),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind(l)})},checkPostClick:function(_,e,t){if(e=e||window.event,!_||!e)return!0;var l=e.target||e.srcElement,o=8,i=!1,a=/wall_post_text|published_comment|post_media|page_event_share|page_public_share|page_group_share|feed_friends|feed_videos|feed_explain_list|explain|feed_photos|feedback_row/;do{if(!l||l==_||l.onclick||l.onmousedown||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(l.tagName,["A","IMG","TEXTAREA","EMBED","OBJECT"])||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(l.className,["play_new","video_box_wrap"])||(i=l.className.match&&l.className.match(a)))break}while(o--&&(l=l.parentNode));if(!i)return!1;if(cur.postClicked||(cur.postClicked={}),!t||!cur.postClicked[_]){if(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return!1;t&&(cur.postClicked[_]=!0,setTimeout((function(){cur.postClicked[_]=!1}),2e3))}return l||!0},postClick:function(_,e,t){t=t||{};var l,o=(_||"").match(/^(-?\d+)_(wall)?(\d+)$/),i=ge("post"+_);if(l=!!t.skipCheck||Wall.checkPostClick(i,e)){if(!0!==l){var a=geByClass1("wall_post_more",l,"a");if(a&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(a))return a.onclick(),void(o||removeClass(i,"wall_post_over"))}if(o&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(i,"suggest")&&!cur.onepost){var s=i&&i.getAttribute("data-ad"),r=i&&i.getAttribute("data-ad-block-uid"),n="/wall"+o[1]+"_"+o[3];if(browser.mobile&&e){var c={};s&&r&&(c.params={_post_ad_data:s,_post_ad_block_unique_id:r}),nav.go(n,null,c)}else Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.checkEvent)(e)?window.open(n,"_blank"):(s&&r&&(t.ads_params={post_ad_data:s,ad_block_unique_id:r}),Wall.hideEditPostReply(),Wall.postFull("wall"+o[1]+"_"+o[3],!1,t))}}},postClickStat:function(_){var e=(_=Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.normEvent)(_)).currentTarget,t=[];e.getAttribute("data-ad-view")&&(t.push(Wall.postsGetRaws(e)),Page.postsSeen(t));var l=_.target;Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(l.getAttribute("data-post-click-type"),["post_owner_img","post_owner_link"])||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(l,"author")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(l,"post_image")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(l,"post_img")?Wall.triggerAdStat(e,"click_post_owner"):("A"==_.target.nodeName&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wall_post_text",_.target,e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("page_media_thumbed_link",_.target,e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_.target,"lnk")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("lnk",_.target,e))&&Wall.triggerAdStat(e,"click_post_link")},adBlockClickStat:function(_,e){var t=(_=Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.normEvent)(_)).currentTarget;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"_ads_block_data_w")||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_ads_block_data_w",t));var l=[];t.getAttribute("data-ad-view")&&(l.push(Wall.postsGetRaws(t)),Page.postsSeen(l)),Wall.triggerAdStat(t,e)},getAdsEvents:function(){var _=Wall._lsAdsEvents;return _||(_=Wall._lsAdsEvents=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.get(Wall.LS_ADS_EVENTS)||{}),_},cleanAdsEvents:function(){var _=Wall.getAdsEvents(),e=(new Date).getTime()/1e3|0,t=!1;each(_,(function(l,o){e-o>=3600&&(delete _[l],t=!0)})),t&&_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.set(Wall.LS_ADS_EVENTS,_)},triggerAdPostStat:function(_,e){Wall.triggerAdStat(_,e)},triggerAdStat:function triggerAdStat(elIdOrEl,event){for(var el="string"==typeof elIdOrEl?Wall.domPost(elIdOrEl):elIdOrEl,pixels=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(el,"ad-stat-"+event);pixels;){var adBlockUID=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(el,"ad-block-uid"),isUniqueEvent=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(event,["load","impression","impression_long","video_start","video_play_3s","video_play_10s","video_play_25","video_play_50","video_play_75","video_play_95","video_play_100"]);if(isUniqueEvent&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(el,"ad-disabled-stat-"+event,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(el,"ad-stat-"+event)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(el,"ad-stat-"+event,null)),adBlockUID&&isUniqueEvent)try{var eventKey=Object(_web_lib_utils__WEBPACK_IMPORTED_MODULE_32__.hashCode)(""+event+adBlockUID),lsData=Wall.getAdsEvents();if(lsData[eventKey])break;var now=(new Date).getTime()/1e3|0;lsData[eventKey]=now,_shared_lib_ls__WEBPACK_IMPORTED_MODULE_19__.default.set(Wall.LS_ADS_EVENTS,lsData)}catch(_){try{console.log(_.message)}catch(_){}}pixels=pixels.split("$$$"),each(pixels,(function(_,e){Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.vkImage)().src=e}));break}var statHtml=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(el,"ad-stat-html-"+event);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(el,"ad-stat-html-"+event,null),statHtml)for(var statElemWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:statHtml}),elem;elem=statElemWrap.firstChild;)if(el.appendChild(elem),"SCRIPT"===elem.tagName)try{eval(elem.innerHTML)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.logEvalError)(_,elem.innerHTML)}},copyHistory:function(_,e,t,l){var o=(_=_||window.event).target||_.srcElement,i=8,a=!1,s=/published_a_quote/;do{if(!o||(a=o.className.match(s))||o.onclick||o.onmousedown||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(o.tagName,["A","IMG"]))break}while(i--&&(o=o.parentNode));if(a&&!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString()))return ajax.post("al_wall.php",{act:"copy_history",post:t,offset:l,from:cur.module},{onDone:function(_){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(e)&&(hide(e),_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(e),"published_by_quote")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(e):e;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(t).insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(t)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isAncestor)(t,"im_rows")?IM.updateScroll(!0):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isAncestor)(t,"wl_post")&&WkView.wallUpdateReplies()}}}),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(_)},postFull:function(_,e,t){if(_.match(/^wall-?\d+_\d+$/)&&!(t||{}).nolist&&(!cur.pgParams||!cur.pgParams.owners_only&&!cur.pgParams.q))switch(cur.wallType){case"all":case"full_all":_+="/all"}return Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.showWiki)({w:_},!1,e,t)},checkReplyClick:function(_,e){if(e=e||window.event,!_||!e)return!1;var t=e.target||e.srcElement,l=8,o=!1;do{if(!t||t==_||t.onclick||t.onmousedown||"A"==t.tagName&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"_reply_lnk")||Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(t.tagName,["IMG","TEXTAREA","EMBED","OBJECT"])&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"emoji")||"wpe_cont"==t.id||(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"_reply_content")))break}while(l--&&(t=t.parentNode));return!o||!!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)((window.getSelection&&window.getSelection()||document.getSelection&&document.getSelection()||document.selection&&document.selection.createRange().text||"").toString())},replyClick:function(_,e,t,l){var o=_.split("_"),i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(o[0]),a=o[1].replace(/-?\d+$/,""),s=ge("post"+i+a+"_"+e),r=ge("post"+_);if(!(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(r,"closed_comments")||!cur.stickerClicked&&Wall.checkReplyClick(s,t))){(t||{}).cancelBubble=!0;var n=geByClass1("wall_reply_more",s,"a");if(n&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(n))return removeClass(s,"reply_moreable"),void n.onclick();if(l){r=cur.wallLayer?ge("wl_post"):r;var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(r,"deep_active"),b=cur.stickerClicked||!1,d=_;if(c){var E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",s);d=E?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(E,"post-id"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(s,"post-id")}var O=ge("reply_field"+d);cur.stickerClicked=!1,!b||O&&O.emojiInited||(cur.afterEmojiInit=cur.afterEmojiInit||{},cur.afterEmojiInit[d]=function(){Emoji.clickSticker(b,ge("reply_field"+d))}),Wall.replyTo(d,e,l,t),b&&O&&O.emojiInited&&Emoji.clickSticker(b,O)}}},stickerClick:function(_,e,t){if((t||{}).cancelBubble=!0,window.Emoji)if(e){var l=Emoji.isStickerPackEnabled(_,Wall.stickerClick.pbind(_,e));if(0!==l)if(l){var o=e.parentNode,i=8;do{if(!o||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"reply"))break}while(i--&&(o=o.parentNode));o&&o.onclick&&(cur.stickerClicked=_,o.onclick())}else Emoji.clickSticker(_,!1)}else Emoji.clickSticker(_,!1);else stManager.add([jsc("web/emoji.js"),"notifier.css"],(function(){Wall.stickerClick(_,e)}))},domPost:function(_){return ge("post"+_)},formatCount:function(_,e){return e=e||{},Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.formatCount)(_,e)},likeFullUpdate:function(_,e,t){var l=e.match(/^(wall|photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(-?\d+_)(\d+)/);Likes.update(l?(l[1]||"wall")+l[2]+l[3]:e,t)},likeUpdate:function(_,e,t,l,o,i,a){a||(l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(l)),!1===_&&cur.wallLayer===e&&(_=ge("wl_post_body"));var s=e.match(/(-?\d+)(_?)(photo|video|note|topic|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),r=s[1]+"_"+s[4],n=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",_))||wall.domPost(r),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(n,a?"_views_wrap":i?"_share_wrap":"_like_wrap"),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(c,"_count");if(b){if(!a&&!i){var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(n,"_views_wrap"),E=d&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(d,"_count");!E||!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(d,"_auto_update")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(E)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(E)!=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(b)||wall.likeUpdate(_,e,0,this.formatCount(l),void 0,void 0,1)}var O=c.tt||{},p=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clone)(O.opts||{}),u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(O.container,"_value"),w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(O.container,"_content"),P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(O.container,"_title");o&&P&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(P,o),O&&(O.likeInvalidated=!0),u&&(u.value=l),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.animateCount)(b,a?l:Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.langNumeric)(l,"%s",!0),{str:"auto",noWrapWidth:!!a}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(c,i?"my_share":"my_like",t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(c,a?"no_views":i?"no_shares":"no_likes",!l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(w,"me_hidden",!t&&!a),l?O.el&&(!1===o?O.destroy&&O.destroy():Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(O.container)||o||!1===o||tooltips.show(O.el,extend(p,{showdt:0}))):O.el&&O.hide();var D=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.langNumeric)(l,"%s",!0);if(a){var m=geByClass1("feedback_views",n),M=0;M=l.match(/^\d+$/)?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(l):5,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(m,"<em>"+l+"</em> "+getLang("global_X_post_views",M,!0))}else if(i){var C="";l>0&&(C="<em>"+D+"</em> "+getLang("global_X_shared",l,!0)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(geByClass1("feedback_share",n),C)}else{var g="";l>0&&(g="<em>"+D+"</em> "+getLang("global_like")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(geByClass1("feedback_like",n),g)}Wall.updateFeedbackVisibility(n)}},updateFeedbackVisibility:function(_){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(geByClass1("feedback_views",_))),t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(geByClass1("feedback_share",_))),l=!Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(geByClass1("feedback_like",_)))&&!t&&!e;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(geByClass1("post_feedback_info",_),"empty",l)},likeShareUpdate:function(_,e,t,l,o){return Wall.likeUpdate(_,e,t,l,o,!0)},like:function(_,e){if(vk.id&&!cur.viewAsBox){var t=wall.domPost(_),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(t,"_like_wrap"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(l,"_icon"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(l,"_count"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"fw_like_icon")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(o,"fw_my_like"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(l,"my_like"),s=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),r=(s[3]||"wall")+s[1]+"_"+s[4],n=cur.module;cur.wallType&&(n="feed"==cur.wallType?"feed_"+("news"==cur.section&&cur.subsection?cur.subsection:cur.section):"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full")),ajax.post("like.php",{act:"a_do_"+(a?"un":"")+"like",object:r,hash:e,wall:2,from:n},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(i);Wall.likeUpdate(!1,_,!a,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(c)+(a?-1:1)),cur.onWallLike&&cur.onWallLike()}},bookmark:function(_,e){Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(e),addClass(_,"bookmarked")},likeShare:function(_,e){if(vk.id&&!cur.viewAsBox){var t=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),l=(t[3]||"wall")+t[1]+"_"+t[4],o=ge("like_share_"+l),i=Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(o),a=cur.wallType?"feed"==cur.wallType?"feed_"+cur.section:"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module;"top"==cur.wallType&&(a="wall_top"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(o),ajax.post("like.php",{act:"a_do_"+(i?"un":"")+"publish",object:l,hash:e,wall:2,ref:a},{onDone:Wall.likeFullUpdate.pbind(!1,_)});var s=wall.domPost(_),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(s,"_like_wrap"),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(r,"_icon"),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(s,"_count")),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(n,"fw_like_icon")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(n,"fw_my_like"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(r,"my_like");Wall.likeUpdate(!1,_,!0,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(c)+(b?0:1))}},likeShareCustom:function(_,e){var t=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/),l=(t[3]||"wall")+t[1]+"_"+t[4];Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showBox)("like.php",extend({act:"publish_box",object:l},e))},likeShareCheckLen:function(_,e,t){_=ge(_),e=ge(e),t=t||255;var l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_)).replace(/\n\n\n+/g,"\n\n");if(_.lastLen!==l.length){var o=_.lastLen=l.length,i=o-l.replace(/\n/g,"").length;o>t-50||i>4?(o>t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,getLang("text_exceeds_symbol_limit",o-t)):i>4?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,getLang("global_recommended_lines",i-4)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,getLang("text_N_symbols_remain",t-o)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(e)):hide(e)}},showLikesPage:function(_,e,t){cur.likesBox.loadTabContent("like.php",{act:"a_get_members",object:_,published:e,offset:t,wall:1},e)},clearLikesCache:function(_,e){var t="^/like.php#"+Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_27__.toQueryString)({act:"a_get_members",object:_,published:e,offset:12345,wall:1,tab:e,only_content:1}).replace("12345","\\d+")+"$",l=new RegExp(t,"i");for(var o in ajaxCache)l.test(o)&&delete ajaxCache[o]},subscribeByButton:function(_,e,t,l,o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_subscribed"),a={showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton.pbind(_),onDone:function(){i=!i,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(_,"_subscribed",i)}},s={};e>0&&o&&(s.from=o),Wall.subscribeToAuthor(i,e,t,l,a,s)},subscribeByAction:function(_,e,t,l){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.actionsMenuItemLocked)(_)){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"value"))?1:0,i={showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem.pbind(_),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem.pbind(_)},a={};e>0&&l?a.from=l:e<0&&(i=extend(i,{onDone:function(l,a,s){if(a){var r=Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)(getLang("global_warning"),a,getLang("group_leave_group"),(function(){r.hide(),Wall.subscribeToAuthor(o,e,t,i,"",{confirm:1})}),getLang("global_cancel"));return!0}Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_,l),_.setAttribute("data-value",1-o),s&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(_))}})),Wall.subscribeToAuthor(o,e,t,"",i,a)}},subscribeToAuthor:function(_,e,t,l,o,i){o=extend({onFail:function(_){setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showFastBox)(getLang("global_error"),_).hide,3e3)}},o),i=i||{},e>0?ajax.post("al_friends.php",extend({act:_?"remove":"add",mid:e,hash:t,from:"feed"},i),o):ajax.post("al_groups.php",extend({act:_?"list_leave":"list_enter",gid:-e,hash:t},i),o),l&&ajax.post("al_feed.php?act=viral_subscribe_stat",{author_id:e,subscribe:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(!_),hash:l})},showPhoto:function(_,e,t,l,o){return!Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showBox)("al_photos.php",{act:"photo_box",to_id:_,photo:e,hash:t},{cache:1},!!l.href&&o)},_animDelX:function(_,e,t,l){},domFC:function(_){for(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(_);_&&_.id.match(/page_wall_count_/);)_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(_);return _},domPS:function(_){for(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPS)(_);_&&_.id.match(/page_wall_count_/);)_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPS)(_);return _},scrollCheck:function(_,e,t){var l,o,i=null==e?Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)():e,a=0,s=[],r=window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight;if(window.scrollAnimation)return!1;if((Wall.repliesSideUpdate(i),cur.wallPage)&&(o="suggested"==cur.wallTab?ge("page_suggested_posts"):"top"==cur.wallTab?ge("page_top_posts"):"donut"===cur.wallTab?ge("page_donut_posts"):ge("page_wall_posts"),(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(cur.topRow)!=o||((cur.topRow||{}).id||"").match(/page_wall_count_/))&&(cur.topRow=Wall.domFC(o)),vk.id&&cur.topRow&&!cur.topRow.id.match(/page_wall_count_/)&&!((window.curNotifier||{}).idle_manager||{}).is_idle)){for(var n=[],c=Wall.domPS(cur.topRow);c;c=Wall.domPS(c))cur.topRow.offsetTop>i&&(cur.topRow=c),c.unseen||(c.unseen=!0,n.push(Wall.postsGetRaws(c)));Page.postsUnseen(n);for(var b=cur.topRow;b;b=l){LongView&&LongView.register(b,"Wall");var d=a||b.offsetTop;if(d>=i+r)break;(((l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(b))||{}).id||"").match(/page_wall_count_/)&&(l=null),(a=l?l.offsetTop:d+b.offsetHeight)<i&&l&&(cur.topRow=l);var E=b.bits||0;E>=3||(E|=(d>=i&&d<i+r?1:0)|(a>=i&&a<i+r?2:0))&&(b.bits=E,3==E&&s.push(Wall.postsGetRaws(b)))}LongView&&LongView.onScroll(i,r),Page.postsSeen(s)}if(cur.wallAutoMore&&!cur.wallLoading&&!cur.viewAsBox){var O=ge("wall_more_link");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(O)&&i+lastWindowHeight+1500>Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(O)[1]&&O.onclick()}},postsGetRaws:function(_){var e,t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.indexOf)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_).children,_),l={};if(!_)return l;l.module=cur.module,l.index=t;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_ads_promoted_post"),i=_.getAttribute("data-ad-view");i&&(l["ad_"+i]=1,o&&(l.module+="_ads_promoted_post"));var a=_.getAttribute("post_view_hash");if(a&&(l.hash=a),"block_"===_.id.substr(0,6)){l[_.id]=1,l.block=_.id.substr(6);var s=attr(_,"data-contain");s&&(s=s.split(",")).forEach((function(_){_=_.split(":"),l[_[0]]=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(_[1])||1}))}else(e=_.id.match(/^post(-?\d+_\d+)$/))&&(l[e[1]]=1,(e=(_.getAttribute("data-copy")||"").match(/^(-?\d+_\d+)$/))&&(l[e[1]]=-1));return l},votingExtendParams:function(_,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"fixed")&&(_.is_fixed=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"preview")&&(_.is_preview=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"board")&&(_.is_board=1),vk.widget&&(_.is_widget=1,_.width=cur.widgetWidth,_.url=cur.url),cur.voteHash&&(_.vote_hash=cur.voteHash);var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"id");t&&(_.voting_id=t);var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"ref");l&&(_.ref=l);var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"hash");o&&(_.hash=o);var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"material");return!i||_.is_board||_.is_widget||(_.material=i),_},votingRevote:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"id");if(this.votingIsLocked(t))return;var l=this.votingExtendParams({act:"revote"},e);ajax.post("al_voting.php",l,{onDone:this.votingUpdateFull.bind(this,t),showProgress:this.votingLock.bind(this,t),hideProgress:this.votingUnlock.bind(this,t)})}},votingIsLocked:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_media_voting"+_),t=!1;return e.forEach(_=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"media_voting_locked")&&(t=!0)}),t},votingLock:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_media_voting"+_).forEach(_=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"disabled")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"queue")||addClass(_,"media_voting_locked")})},votingUnlock:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_media_voting"+_).forEach(_=>{removeClass(_,"media_voting_locked")})},votingUpdate:function(_,e){ajax.post("al_voting.php",{act:"get_layout",voting_id:_},{onDone:t=>{Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(e)&&!1===e(t)||(this.votingUpdateFull(_,t),this.votingUnlock(_))},onFail:()=>this.votingUnlock(_),showProgress:()=>this.votingLock(_)})},votingUpdateFull:function(_,e){if(_&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isString)(e)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_media_voting"+_);t.length&&(t.forEach(_=>{if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"disabled")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"queue"))if(""===e)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(_);else{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"media_voting_can_vote")){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(t);addClass(l,"media_voting_just_voted"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(_,t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.removeClassDelayed)(l,"media_voting_just_voted")}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(_,t)}}),window.IMBRIDGE&&setTimeout(IMBRIDGE.syncHistory.bind(IMBRIDGE),0),vk.widget&&window.WPoll&&window.WPoll.resizeWidget())}},votingUpdatePartly:function(_,e){if(_&&isObject(e)&&!this.votingIsLocked(_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_media_voting"+_);if(t.length){var l=e.answers.reduce((_,e)=>Math.max(_,e.rate),0),o={};e.answers.forEach(_=>{_.isLeader=_.rate===l,o[_.id]=_}),t.some(t=>{if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"disabled")){if(t.classList.contains("media_voting_voted")&&!e.votes)return this.votingUpdate(_),!0;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("media_voting_option_wrap",t).forEach(_=>{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"id"),l=o[t];if(_.tt&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isFunction)(_.tt.destroy)&&_.tt.destroy(),l){var i=geByClass1("media_voting_option_bar",_),a=geByClass1("media_voting_option_percent",_),s=geByClass1("media_voting_option_count",_),r=geByClass1("media_voting_option_counter",_),n=Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.langNumeric)(l.votes,"%s",!0),c=new Array(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(n).textContent.split("").length+2).join("0");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domLC)(s),c),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domLC)(r),n),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(a,e.votes?l.rate:""),i.style.transform=`scaleX(${.01*l.rate})`,i.style.oTransform=`scaleX(${.01*l.rate})`,l.votes?s.classList.remove("media_voting_option_count_hidden"):(s.classList.add("media_voting_option_count_hidden"),_.classList.remove("media_voting_option_voted")),l.isLeader?_.classList.add("media_voting_option_leader"):_.classList.remove("media_voting_option_leader")}});var l=geByClass1("_media_voting_footer_voted_text",t);if(l){var i;i=e.votes?vk.widget?"voting_x_voted_short":"voting_x_voted":"voting_nobody_voted",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(l,getLang(i,e.votes,!0));var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("media_voting_footer_voted_friend",t);a.length>e.votes&&a.forEach(_=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(_)})}}}),window.IMBRIDGE&&window.IMBRIDGE.syncHistory(),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()}}},votingUpdateByPostRaw:function(_){if(vk.id){_=_.split("_");var e=positive(_[1]),t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(_[0]),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_post_media_voting"+t+"_"+e);if(l&&l.length){var o=geByClass1("media_voting",l[0]);if(o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"id");this.votingUpdate(i)}}}},votingVote:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"id");if(!this.votingIsLocked(t)&&vk.id){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"queue"))return this.votingUpdate(t,_=>{if(_&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isString)(_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(_));if(t&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"queue")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"disabled"))return this.votingVote(t,e,!0),!1}});if(e.length){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_),"wk_voting_box"),o=this.votingExtendParams({act:"vote",option_ids:e.join(",")},_);ajax.post("al_voting.php",o,{onDone:(_,e)=>{l?nav.reload():(vk.widget&&window.WPoll&&window.WPoll.updateShareMessage(e),this.votingUpdateFull(t,_))},showProgress:this.votingLock.bind(this,t),hideProgress:()=>{l||this.votingUnlock(t)}})}}else vk.widget&&Widgets.oauth()},votingButtonVote:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"media_voting_multiple")){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("media_voting_option_selected",e),l=[];t.forEach((function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"id");e&&l.push(e)})),this.votingVote(e,l)}},votingOptionVote:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"media_voting_multiple")){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"id");if(this.votingIsLocked(l)||!vk.id)return void(vk.widget&&Widgets.oauth());Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(_,"media_voting_option_selected");var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("media_voting_option_selected",t).length;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(t,"media_voting_has_selected_options",o)}else{var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"id");this.votingVote(t,[i])}Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(e)}},votingOptionTooltip:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"id"),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"owner-id"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"id"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"board");Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(_,{url:"al_voting.php",params:{act:"option_tt",option_id:t,owner_id:l,is_board:i,voting_id:o},slide:15,ajaxdt:100,showdt:400,hidedt:200,dir:"auto",shift:[0,10,10],typeClass:"voting_tt"})}},votingLayer:function(_,e){var t=!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"media_voting_option_wrap")&&_,l=t?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"id"):0,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"media_voting")?_:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"id"),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"owner-id"),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"board"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"ref"),n={w:(s?"board_poll":"poll")+a+"_"+i};if(l&&(n.opt_id=l),vk.widget)window.open(location.origin+"/"+n.w,"poll");else{var c={queue:1,noloader:!!Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)()};"story"===r&&(c.customRef="story"),Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.showWiki)(n,!1,void 0,c)}Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(e)}},votingExport:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"board")){var t=this.votingExtendParams({act:"export_box"},e);(vk.widget?window.showBox:_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showBox)("al_voting.php",t,{onDone:function(){Object(_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_21__.curBox)().setOptions({width:500})}})}},votingOnMain:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(t){if(this.votingIsLocked(l))return;var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"id"),o=this.votingExtendParams({act:"onmain",state:e?1:0},t);ajax.post("al_voting.php",o,{onDone:this.votingUpdateFull.bind(this,l),showProgress:this.votingLock.bind(this,l),hideProgress:this.votingUnlock.bind(this,l)})}},votingClosed:function(_,e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(t){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"id");if(this.votingIsLocked(l))return;var o=this.votingExtendParams({act:"closed",state:e?1:0},t);ajax.post("al_voting.php",o,{onDone:this.votingUpdateFull.bind(this,l),showProgress:this.votingLock.bind(this,l),hideProgress:this.votingUnlock.bind(this,l)})}},votingNarrowAction:function votingNarrowAction(votingId,hash,action){var act,state;switch(action){case 101:act="closed",state=0;break;case 102:act="closed",state=1;break;case 103:act="onmain",state=0;break;case 104:act="onmain",state=1}act&&!cur.votingNarrowActionProgress&&ajax.post("al_voting.php",{act,voting_id:votingId,is_fixed:1,state,narrow:1,hash},{onDone:function onDone(html,js){var votingModuleEl=ge("group_voting");if(votingModuleEl&&(votingModuleEl=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(votingModuleEl),html?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(votingModuleEl,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(html)):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(votingModuleEl)),js)try{eval(js)}catch(_){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_30__.logEvalError)(_,js)}},showProgress:function(){cur.votingNarrowActionProgress=!0},hideProgress:function(){cur.votingNarrowActionProgress=!1}})},votingReport:function(_,e){if(!Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.actionsMenuItemLocked)(_)){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("media_voting",_);if(t){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"id");if(this.votingIsLocked(l))return;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"board");ajax.post("al_voting.php",{act:"a_report_form",voting_id:l,is_board:o,hash:e},{onDone:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cf)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"media_voting_board")&&addClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(e),"media_voting_board"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(t,e),vk.widget&&window.WPoll&&window.WPoll.resizeWidget()},showProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockActionsMenuItem)(_),this.votingLock(l)}.bind(this),hideProgress:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockActionsMenuItem)(_),this.votingUnlock(l)}.bind(this)})}}},foTT:function(_,e,t){t&&t.oid&&(e=t.oid==vk.id?getLang("wall_my_friends_only"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("wpfo"+t.pid)),Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTitle)(_,e)},update:function(){if(cur.wallLayer)WkView.wallUpdateReplies();else{var _="top"===cur.wallType,e="archive"===cur.wallType,t="donut"===cur.wallType;if(("all"===cur.wallType||"own"===cur.wallType||_||e||t)&&("all"===cur.wallTab||"own"===cur.wallTab||"top"===cur.wallTab||"archive"===cur.wallTab||"donut"===cur.wallTab)){var l=e?"all":_||t?"own":cur.wallType,o=ge("wall_more_link"),i=Wall.getPostsWrap(cur.wallType),a=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(cur.deletedCnts[l]),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)(l,i).length-a,r=!1;if((_||e||t)&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(geByClass1("no_posts",i))||_&&cur.wallTopFinished===cur.oid||e&&cur.wallArchiveFinished===cur.oid||t&&(cur.wallDonutFinished===cur.oid||Wall.cantAccessDonutPosts())))r=!0;else{var n;if(n=e?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_archive")):_?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_top")):t?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_donut")):"own"===l?Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_own")):Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_all")),"suggested"!==cur.wallTab){var c=n;cur.oid<0&&cur.options.fixed_post_id&&(c-=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_posts_count",c?Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.langNumeric)(c,cur.options.wall_counts):cur.options.wall_no)}var b=s;!_&&!e&&cur.options.fixed_post_id&&cur.options.wall_oid<0&&(b+=1),r=b>=n-a}r?hide(o):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(o),o.onclick=Wall.showMore.pbind(s)),cur.wallTab==cur.wallType&&(shortCurrency(),cur.gifAutoplayScrollHandler&&cur.gifAutoplayScrollHandler(),cur.videoAutoplayScrollHandler&&cur.videoAutoplayScrollHandler())}}},getAbsDate:function(_,e){e=e||window.cur;var t,l=new Date(_||Date.now()),o=l.getHours(),i=l.getMinutes(),a="";return e.wallTpl.time_system&&(a=e.wallTpl.time_system[o>11?1:0],o=o%12||12),t=o>9?o:"0"+o,i=i>9?i:"0"+i,e.wallTpl.date_format.replace("{am_pm}",a).replace("{hour}",o).replace("{num_hour}",t).replace("{minute}",i)},getNowRelTime:function(_){_=_||window.cur;var e=Date.now();return'<span class="rel_date rel_date_needs_update" time="'+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e/1e3-(_.tsDiff||0))+'" abs_time="'+Wall.getAbsDate(e,_)+'">'+getLang("wall_just_now")+"</span>"},getNewPostHTML:function(_,e,t,l){l=l||window.cur;var o,i=[],a=_[2],s=a.split("_")[0],r="",n=_[4].split("|"),c=Wall.getNowRelTime(l),b="1"===_[8];b?r=l.wallTpl.reply_link||"":s!=vk.id&&(r=l.wallTpl.own_reply_link||"");var d=_[3].replace("mem_link","author").replace("memLink","author"),E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(d),O=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.unclean)(E.innerText||E.textContent||""));-1!=_[6].indexOf('id="wpfo')&&(d+='<span class="page_fronly inl_bl" onmouseover="Wall.foTT(this, false, {oid: \''+s+"', pid: '"+_[2]+"'})\"></span>"),l.wallTpl.custom_del&&(e>(_[9]==s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||s==vk.id||_[9]==vk.id||_[2].split("_")[0]!=_[4])&&i.push(l.wallTpl.custom_del),e>(_[9]==s?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER)||s==vk.id||_[9]==vk.id?i.push(l.wallTpl.del):_[2].split("_")[0]!=_[4]&&i.push(l.wallTpl.spam);var p=e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&_[9]==s||s==vk.id||_[9]==vk.id;p&&"rss"!==_[13]&&i.push(l.wallTpl.edit),s!=vk.id&&_[9]!=vk.id||!_[6]||(_[6]=_[6].replace("vk2017_snippet_show_layer_button","vk2017_snippet_show_layer_button_hidden"));var u=s<0&&_[9]==s&&e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR,w=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_36__.getReactionsButtonPostTemplate)(_,l);return o={oid:s,name:d,actions:i.length?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l.wallTpl.post_actions,{actions:i.join("")}):"",replies:"",reply_link:r,own_reply_link:l.wallTpl.own_reply_link,reply_box:b&&l.wallTpl.reply_box?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l.wallTpl.reply_box,{actions:"",class:u?" reply_fakebox_with_official":""}):"",photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.psr)(n[0]),link:_[5],text:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.psr)(_[6]),date:c,post_id:_[2],poll_hash:l.wallTpl.poll_hash,date_postfix:"",user_image:"",post_url:"/wall"+a.replace("_wall_reply","_"),can_reply_as_group:u?1:"",owner_photo:u?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.psr)(n[1]||n[0]):"",owner_href:u?_[5]:"",owner_name:u?O:"",online_class:s>0?" online":"",likes:Likes.makeTemplate(l.wallTpl.post_likes,{buttons_prepend:null==w?void 0:w.template,like_class_name:null==w?void 0:w.likeClassName,object_raw:_[2]}),class:""},t&&extend(o,t(o,_)),p&&l.wallTpl.author_data&&(o.date=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l.wallTpl.author_data,{date:o.date,post_id:a})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l.wallTpl.post,o),o)},updateAnonNewPost:function(_,e){if("anon"==_[13]){var t=geByClass1("author",e),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span");l.innerHTML=t.innerHTML,l.className=t.className,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(t,l);var o=geByClass1("post_image",e),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span");i.innerHTML=o.innerHTML,i.className=o.className,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(o,i)}return e},getNewReplyHTML:function(_,e,t,l){l=l||window.cur;var o=[],i=ge("reply_field"+_[2])||ge("reply_fakebox"+_[2])||ge("fwr_text"),a="",s="",r="",n=_[10]||"",c=Object(_web_reactions_reactions_wall_reactions_wall__WEBPACK_IMPORTED_MODULE_36__.getReactionsButtonReplyTemplate)(_,l);(e>constants.Groups.GROUPS_ADMIN_LEVEL_USER||!_[2].indexOf(vk.id+"_")||_[4]==vk.id?o.push(l.wallTpl.del_reply):_[2].split("_")[0]!=_[4]&&o.push(l.wallTpl.spam_reply),(e>constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR&&_[4]==Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(_[2])||_[4]==vk.id)&&o.push(l.wallTpl.edit_reply),-1!=_[8].indexOf('class="wall_reply_more"')&&(a+="reply_moreable"),i)&&(a+=" reply_replieable",s=l.wallTpl.reply_link_wrap,wall.getReplyNames()[_[4]]||wall.addReplyName(_[4],[_[11],_[12]]));a&&(r=" onclick=\"Wall.replyClick('%post_id%', %reply_msg_id%, event, %reply_uid%)\""),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l.wallTpl.reply_actions,{actions:o.join("")});var b={name:_[5].replace("mem_link","author"),photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.psr)(_[6]),link:_[7],text:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.psr)(_[8]),classname:a,actions:o,attr:r,date:Wall.getNowRelTime(l),to_link:n,answer_link:s,post_id:_[2],reply_id:_[3],like_id:_[3].replace("_","_wall_reply"),reply_msg_id:_[3].split("_")[1],reply_uid:_[4]||"false",likes:Likes.makeTemplate(l.wallTpl.reply_likes,{buttons_prepend:null==c?void 0:c.template,like_class_name:null==c?void 0:c.likeClassName,object_raw:_[2]})};return t&&extend(b,t(b)),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l.wallTpl.reply,b)},updatePostImages:function(_){return _.replace(/<img[^>]+>/g,(function(_){return _.match(/class=/)?_.replace("src=","data-src=").replace('class="','class="__need_img '):_}))},loadPostImages:function(_){each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("__need_img",_,"img"),(function(){var _=this.getAttribute("data-src");_&&(this.src=_,this.removeAttribute("data-src")),removeClass(this,"__need_img")}))},openNewComments:function(_){var e=ge("replies"+_),t=e.nextSibling,l=geByClass1("wr_header",e,"a"),o=0,i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply",e,"div").length,a=i,s=t.newCnt;Wall.loadPostImages(e),each(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clone)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("new_reply",e,"div")),(function(){if(removeClass(this,"new_reply"),Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(this),100==++o)return!1})),l&&(a=o+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(l.getAttribute("offs").split("/")[1])),i+=-s+o,(a>3||i<a)&&(l||e.insertBefore(l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("a",{className:"wr_header"}),e.firstChild),Wall.updateRepliesHeader(_,l,i,a)),cur.wallMyOpened[_]=1,t&&"replies_open"==t.className&&(s>100?(t.innerHTML=getLang("news_x_new_replies_more",Math.min(100,s-o)),t.newCnt-=o):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(t)),Wall.repliesSideSetup(_)},langWordNumeric:function(_,e,t){return Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.langWordNumeric)(_,e,t)},updateTimes:function(_){var e=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Date.now()/1e3),t=[];e-=cur.tsDiff,each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("rel_date_needs_update",_||ge("page_wall_posts"),"span"),(function(_,l){if(l){var o=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(l.getAttribute("time")),i=e-o,a=Object(_web_lib_date__WEBPACK_IMPORTED_MODULE_45__.getFormattedDiffTimeText)(i);a||(a=l.getAttribute("abs_time"),t.push(l)),l.innerHTML=a}})),each(t,(function(){removeClass(this,"rel_date_needs_update")}))},updateRepliesHeader:function(_,e,t,l){if(!cur.onepost){var o,i,a=e.href,s=3,r=0;if(!a&&(i=_.match(/^(-?\d+)_(photo|video|note|topic|video|)(\d+)$/))){var n=i[2]||"wall";switch(a="/"+n+i[1]+"_"+i[3],n){case"topic":a+="?offset=last&scroll=1";break;case"wall":a+="?offset=last&f=replies"}e.href=a}l>t?t<100?(o=l>100?getLang("wall_show_n_last_replies",100):getLang("wall_show_all_n_replies",l),s=!1):o=getLang("wall_hide_replies"):(o=getLang("wall_hide_replies"),r=1),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(e,"wrh_all",r),e.innerHTML=o,e.onclick=Wall.showReplies.pbind(_,s,!1),e.setAttribute("offs",t+"/"+l)}},processQueueEvent(_){if(isObject(_)&&_.entity_type)switch(_.entity_type){case"voting":this.votingUpdatePartly(_.data.id,_.data)}},updated:function(_,e,t){var l=_?window.wkcur:window.cur;if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(l.wallQueues)&&Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(t.events)&&t.events.length){var o=l.wallQueues.filter(_=>_.key===e).pop();if(o)if(t.failed)l.wallQueues=!1;else{o.ts=t.ts;var i=_?wkLayerWrap.scrollTop:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollGetY)(),a=i,s=!(l.wallType||"").indexOf("full"),r=l.onepost,n=!!_,c=_;s&&(nav.objLoc.q||nav.objLoc.search||nav.objLoc.day)||(each(t.events,(function(){if(isObject(this))return Wall.processQueueEvent(this);var e=this.split("<!>"),t=e[0],o=e[1],i=e[2],b=0,d=0,E=_&&window.cur.wallLayer==i&&ge("wl_post");if(E&&"del_reply"!=o||(E=ge("post"+i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isAncestor)(E,_?wkLayerWrap:pageNode)||(E=null)),t==l.options.qversion){switch((Wall.isArchiveWall()?"archive_post"===o:"reveal_post"===o)&&(o="res_post"),(Wall.isArchiveWall()?"reveal_post"===o:"archive_post"===o)&&(o="del_post"),o){case"new_post":if(E)break;if(s&&l.pgStart>0){l.pgOffset++;break}if(l.oid==vk.id&&vk.id==e[9]&&window.curNotifier&&curNotifier.idle_manager.is_idle&&Wall.clearInput(),"own"!==l.wallType&&"all"!==l.wallType&&!Wall.hasPosts("own"))break;var O=ge("page_wall_posts"),p=O.lastChild,u=!!s&&FullWall.addTetaTet,w=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e[e.length-1]),P=void 0!==l.options.is_admin?l.options.is_admin:l.options.wall_oid<0?8&w?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&w?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,D=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Wall.getNewPostHTML(e,P,u,l)),m=O.firstChild;if(Wall.updateAnonNewPost(e,D),ge("post"+i))break;for(p&&p!=D?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(p):p=!1,s?p||l.pgOffset++:(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_all"))+1),addClass(D,"all"),Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e[10])&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_own"))+1),addClass(D,"own"))),0==e[8]&&addClass(D,"closed_comments"),l.deepRepliesActive&&addClass(D,"deep_active");m&&("INPUT"==m.tagName||1!=m.nodeType||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(m,"post_fixed"));)m=m.nextSibling;O!==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(m)&&Wall.sendInsertBeforeError(),O.insertBefore(D,m),Wall.votingUpdateByPostRaw(i),b=D.offsetHeight+15,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(D,c)[1],Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(D),Object(_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_29__.updateAriaElements)(),Wall.updateMentionsIndex(),AudioUtils.updateQueueReceivedPost(D);break;case"edit_post":var M=ge("wpt"+i);if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(E)||!M)break;var C=geByClass1("wall_post_more",M);C&&(C=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(C))),b=-M.offsetHeight,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(M,c)[1];var g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.psr)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(e[3],{poll_hash:l.wallTpl.poll_hash})),T=l.videoInlinePlayer&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isAncestor)(window._videoLastInlined[0],M),h=T&&"playing"==l.videoInlinePlayer.getState();if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(M,g),T){var f=geByClass1("page_post_sized_thumbs",M);1==Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domChildren)(f).length&&(f.innerHTML="",f.appendChild(window._videoLastInlined[1]),f.appendChild(window._videoLastInlined[0]),h&&setTimeout((function(){l.videoInlinePlayer.play()}),0))}C&&(C=geByClass1("wall_post_more",M))&&C.onclick(),Wall.votingUpdateByPostRaw(i),b+=M.offsetHeight,Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(M),Wall.updatePostAuthorData(i);break;case"edit_reply":var W=e[3],A=ge("wpt"+W);if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)("post"+W)||!A)break;var L=geByClass1("wall_reply_more",A);L&&(L=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(L)));var B=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.psr)(e[4]);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(A,B),b=-A.offsetHeight,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(A,c)[1],L&&(L=geByClass1("wall_reply_more",A))&&L.onclick(),b+=A.offsetHeight,Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(A);break;case"post_parsed_link":if(!E)break;var R=geByClass1("wall_postlink_preview_btn_disabled",E);if(!R)break;var v=e[3];if("1"===v)removeClass(R,"wall_postlink_preview_btn_disabled"),removeClass(R,"button_disabled");else if("0"===v)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(R);else if(v){var I=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("a",{href:v,className:"flat_button",innerHTML:getLang("wall_preview_link")});Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(R,I)}break;case"del_post":E&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(E)&&!l.wallMyDeleted[i]&&!r&&(b-=E.offsetHeight+15,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(E,c)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.revertLastInlineVideo)(E),addClass(E,"unshown"),s||n||(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_all"))-1),e[3]&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_own"))-1),Wall.isArchiveWall()&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_archive",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_archive"))-1)));break;case"res_post":E&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(E)&&((l.wallRnd==e[4]||Wall.isArchiveWall())&&removeClass(E,"unshown"),s?l.pgOffset++:(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_all",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_all"))+1),e[3]&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_own",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_own"))+1),Wall.isArchiveWall()&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_archive",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)("page_wall_count_archive"))+1)));break;case"new_reply":if(!E||l.wallMyReplied[i]||ge("post"+e[3])||r&&l.pgOffset<l.pgCount||n&&(l.reverse?l.offset:l.offset+l.loaded<l.count))break;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(n?ge("wl_post"):ge("post"+i),"deep_active")){var j=wall.addNewReply(e);b+=j[0],d=j[1];break}var U,K=ge("replies"+i),y=ge("replies_wrap"+i),k=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e[e.length-1]),x=void 0!==l.options.is_admin?l.options.is_admin:l.options.wall_oid<0?8&k?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&k?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,S=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Wall.getNewReplyHTML(e,x,!1,l)),F=n?K.offsetHeight:E.offsetHeight,N=!1;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(K)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(y)&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)("reply_link"+i)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("wall_fixed",y)){U=K.nextSibling;var H=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("new_reply",K,"div").length+1;if(n||r||l.wallMyOpened[i]){if(!r){U&&"replies_open"==U.className&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(U),N=!0;var V=geByClass1("wr_header",K,"a"),G=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply",K,"div").length+1,q=G;V&&(q=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(V.getAttribute("offs").split("/")[1])+1),(q>5||G<q)&&(V||K.insertBefore(V=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("a",{className:"wr_header"}),K.firstChild),Wall.updateRepliesHeader(i,V,G,q))}}else addClass(S,"new_reply"),U&&"replies_open"==U.className||(U=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{className:"replies_open",onclick:Wall.openNewComments.pbind(i),role:"button",tabIndex:0}),K.parentNode.insertBefore(U,K.nextSibling)),U.innerHTML=getLang("wall_x_new_replies_more",Math.min(100,H)),U.newCnt=H}else Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)("reply_link"+i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(y,K),N=!0;_&&l.reverse&&K.firstChild?K.insertBefore(S,K.firstChild):K.appendChild(S),N&&Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(S),n?(l.count++,l.loaded++,WkView.wallUpdateReplies(),b=K.offsetHeight-F,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(S,c)[1]):(r&&(FullWall.repliesSummary(e[13]),l.pgOffset++,l.pgCount++,FullWall.repliesSummary(l.pgCount),Pagination.pageReady(!1),FullWall.onePostOnScroll(!1,!1,!0)),b=E.offsetHeight-F,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(N?S:U)[1],Wall.repliesSideSetup(i)),Wall.updateMentionsIndex(),Likes.update("wall"+i,{comment_num:e[13]});break;case"del_reply":if(l.wallMyDeleted[i]||!E)break;var Y=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",E)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",E);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(Y,"deep_active")){var z=wall.removeDeepReply(e);b+=z[0],d=z[1];break}if(b-=E.offsetHeight,d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(E,c)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.revertLastInlineVideo)(E),l.layerpost)hide(E),l.count--,l.loaded--;else{r&&(l.pgOffset--,l.pgCount--,FullWall.repliesSummary(l.pgCount));var X=E.parentNode.id.match(/replies(-?\d+_\d+)/);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(E),X&&Wall.repliesSideSetup(X[1])}break;case"view_post":Wall.likeUpdate(!1,i,0,Wall.formatCount(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e[3])),void 0,void 0,1);break;case"like_post":case"like_reply":if(!E)break;var Q="like_reply"==o?"wall_reply"+i:i,$=E&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(E,"_like_wrap"),Z=E&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(E,"_share_wrap");wall.likeFullUpdate($,Q,{like_my:$&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)($,"my_like"),like_num:e[3],like_title:!1,share_my:Z&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(Z,"my_share"),share_num:e[4],share_title:!1});break;case"upd_ci":var J=e[2],__=ge("current_info"),e_=__||ge("page_current_info");if(!e_)break;switch(e[3]){case"audio":var t_=geByClass1("current_audio_cnt");t_&&t_.tt&&t_.tt.hide();var l_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e[5]||""),o_=l_?"":" hidden",i_="";__||(i_+=" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+l.options.ciAudioTip+"', black: 1, shift: [14, 5, 5]})\" onclick=\"Page.playCurrent(this, '"+e[4]+"')\""),J=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l.options.ciAudioTpl,{text:J,attrs:i_,count:l_,cnt_class:o_}),wall.updateOwnerStatus(J,e_,e,__);break;case"app":var a_=e[6]?"[12, 5, 5]":"[15, 5, 5]",s_=e[6]?" current_app_icon":"",r_=__?' onclick="cur.ciApp = '+e[4]+'"':" onmouseover=\"showTooltip(this, {forcetoup: true, text: '"+l.options.ciAppTip+"', black: 1, shift: "+a_+'})" href="'+e[5]+'?ref=14" onclick="return showApp(event, '+e[4]+', 1, 14, cur.oid)"';e[6]&&(r_+=" style=\"background-image: url('"+e[6]+"'); background-size: 16px 16px;\""),J='<a class="current_app'+s_+'"'+r_+">"+J+"</a>",wall.updateOwnerStatus(J,e_,e,__);break;default:stManager.add([jsc("web/emoji.js")],(function(){J=J?'<span class="current_text">'+Emoji.emojiToHTML(J,!0)+"</span>":J,wall.updateOwnerStatus(J,e_,e,__)}))}break;case"upd_ci_cnt":var n_=ge("current_info"),c_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(e[2]),b_=n_||ge("page_current_info"),d_=b_&&geByClass1("current_audio_cnt",b_);d_&&(d_.tt&&d_.tt.destroy(),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(d_,"hidden",0==c_),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_24__.animateCount)(d_,Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.langNumeric)(c_,"%s",!0),{str:"auto"}));break;case"cover_updated":var E_=geByClass1("_page_cover");if(E_&&e[2]){var O_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.vkImage)(),p_=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.isRetina)()?e[3]:e[2];O_.src=p_,O_.onload=function(){E_.style.backgroundImage="url('"+p_+"')",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(O_)}}}b&&(_?d<0:a+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)("page_header_cont")[1]>d)&&(a+=b)}})),a!=i&&i>100&&!l.onepost&&(_?wkLayerWrap.scrollTop=a:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(a,0,!1,!0)),Wall.update())}}},updateOwnerStatus:function(_,e,t,l){l&&(_='<span class="'+(_?"my_current_info":"no_current_info")+'">'+(_||getLang("change_current_info"))+"</span>",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e.parentNode.nextSibling,_),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)("currinfo_editor")&&cur.oid>0&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)("currinfo_audio","app"!=t[3]),t[2]&&"app"!=t[3]&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(ge("currinfo_audio"),Boolean(t[2])),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)("currinfo_app","app"==t[3]),addClass("currinfo_app","on")));Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,_)},updateMentionsIndex:function(_){if(clearTimeout(cur.wallUpdateMentionsIndexTO),_){var e={},t=[],l=new RegExp("^(https?://(vk.com|"+location.host.replace(/\./,"\\.")+"))?/?"),o=[];each(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("author",bodyNode,"a"),(function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(this),o=this.href.replace(l,"");if(void 0===e[o]){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(this.getAttribute("data-from-id"));i&&i!=vk.id&&(e[o]=t.length,t.push([i,_,"@"+o,"/images/camera_c.gif"]))}})),o=(o=o.concat(Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post_image",bodyNode,"a")))).concat(Array.prototype.slice.apply(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply_image",bodyNode,"a"))),each(o,(function(){var _=this.href.replace(l,""),o=e[_];if(void 0!==o){for(var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(this);i&&"IMG"!=i.tagName;)i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(i);i&&(t[o][3]=i.getAttribute("src"),delete e[_])}})),cur.wallMentions=t}else cur.wallUpdateMentionsIndexTO=setTimeout(wall.updateMentionsIndex.pbind(!0),300)},initUpdates:function(_){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_&&_.length&&window.Notifier){var t=e?window.wkcur:window.cur,l=()=>{t.wallQueues&&t.wallQueues.forEach(_=>{Notifier.addKey(_,(_,t)=>{Wall.updated(e,_,t)})})};if(!t.wallQueues){var o=setInterval(l,1e4);e?t._hide.push(()=>clearInterval(o)):t.destroy.push(()=>clearInterval(o))}t.wallQueues=_,l()}},initWallOptions:function(_){extend(cur,{wallCheckComments:_.check_comments,wallType:_.wall_type,wallTpl:_.wall_tpl,wallMyDeleted:{},tsDiff:_.wall_tpl&&_.wall_tpl.abs_timestamp?900*Math.round((Date.now()/1e3-_.wall_tpl.abs_timestamp)/900):0,wallMyOpened:{},wallMyReplied:{},wallMentions:[],wallMyRepliesCnt:0,wallUploadOpts:_.upload,wallUploadVideoOpts:_.upload_video,hasGroupAudioAccess:_.hasGroupAudioAccess,wallAdsReplacedFeatureTooltip:_.ads_replaced_feature_tooltip,wallAdsReplacedFeatureTooltipHash:_.ads_replaced_feature_tooltip_hash}),_.wall_tpl&&_.wall_tpl.lang&&(cur.lang=extend(cur.lang||{},_.wall_tpl.lang)),window.Notifier&&Notifier.addRecvClbk("wall_reply_multiline","wall",(function(_){Wall.onReplySubmitChanged(_.value,1)}),!0)},onPostLoaded:function(_,e){_=ge(_),Wall.onAdBlockLoaded(_,e),e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_post")&&(_=geByClass1("_post",_)),_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_post")&&cur.onPostLoaded&&cur.onPostLoaded(_)},onAdBlockLoaded:function(_,e){var t;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_ads_block_data_w")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_ads_promoted_post_data_w")?t=_:e&&(t=geByClass1("_ads_block_data_w",_)||geByClass1("_ads_promoted_post_data_w",_)),t&&Wall.triggerAdStat(t,"load")},init:function(_){var e;Wall.initWallOptions(_),extend(cur,{wallInited:!0,postField:ge("post_field"),wallSearch:ge("wall_search"),wallPage:ge("profile")||ge("group")||ge("public"),wallPageNarrow:ge("narrow_column"),wallUploadOpts:_.upload||!1,wallOnClearInput:[],deletedCnts:{own:0,all:0,archive:0},posterFeatureTooltip:_.poster_feature_tooltip,posterFeatureTooltipHash:_.poster_feature_tooltip_hash,postCopyrightFeatureTooltip:_.post_copyright_feature_tooltip,postCopyrightFeatureTooltipHash:_.post_copyright_feature_tooltip_hash}),cur.destroy.push((function(_){Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.serviceWallUsers),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.serviceWallGroups),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.removeSearchPositionTracker)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.serviceNews),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.cleanElems)(_.postField)}));var t=removeEvent.pbind(document,"click",Wall.hideEditPostReply);cur._back?(cur._back.hide.push(t),cur._back.show.push(t),cur._back.show.push(addEvent.pbind(document,"click",Wall.hideEditPostReply))):cur.destroy.push(t),cur.wallTab=cur.wallType,Wall.update(),Wall.initUpdates(_.add_queues),_.wall_tpl&&(cur.timeUpdateInt=setInterval((function(){Wall.updateTimes(_.wallCont)}),1e4),cur.destroy.push((function(){clearInterval(cur.timeUpdateInt)})));var l=window;addEvent(l,"scroll",Wall.scrollCheck),addEvent(window,"resize",Wall.scrollCheck),cur.destroy.push((function(){removeEvent(l,"scroll",Wall.scrollCheck),removeEvent(window,"resize",Wall.scrollCheck)})),cur.wallAutoMore=_.automore;var o=!1;if((null===(e=cur.options)||void 0===e?void 0:e.no_draft)||(o=_.draft||cur.oid!=vk.id&&Wall.getOwnerDraft(cur.oid)),Wall.initPostEditable(o),cur.wallSearch&&placeholderInit(cur.wallSearch),removeEvent(document,"click",Wall.hideEditPostReply),addEvent(document,"click",Wall.hideEditPostReply),_.poster_options&&Wall.initPosterEditor(_.poster_options),_.media_types){var i=extend({onAddMediaChange:(_,e,t)=>{cur.postCopyrightFeatureTT&&cur.postCopyrightFeatureTT.hide(),Wall.hidePosterFeatureTooltip(),Wall.postChanged(10),["poll","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_33__.MEDIA_TYPE_DONUT_DURATION].includes(_)||wall.focusOnEnd(),cur.oid!=vk.id&&Wall.saveOwnerDraftMedia(cur.oid,_,e,t),setTimeout(Wall.checkPosterAvailability)},onChangedSize:()=>{setTimeout(()=>{var _=ge("submit_post_box"),e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("VideoRestriction",_);each(e,(_,e)=>{var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(e)[1],l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(e)[0];Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(e,"VideoRestriction--onlyIcon",l<200),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(e,"VideoRestriction--small",l>=200&&l<300&&l>t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(e,"VideoRestriction--medium",l>=300&&l<400)})})},onMediaChange:()=>{Wall.postChanged()},onMediaUploadStarted:()=>{Wall.postChanged()},editable:1,from:"post",sortable:1,poster:cur.poster},_.media_opts||{});if(cur.wallAddMedia=new MediaSelector(ge("page_add_media"),"media_preview",_.media_types,i),cur.wallAddMedia.menu){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(cur.wallAddMedia.menu.menuNode,"_type_podcast"),s=ge("official");a&&s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_submit_post_box",s),"from-oid")!=cur.postTo&&hide(a)}}if(Wall.initPostVisibilitySelector(cur.wallAddMedia),Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.isPostTopicSettingEnabled)(window.cur)){var r=cur.wallAddMedia&&cur.wallAddMedia.id||"",n=Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.initPostTopicCreatingSelector)(String(r),ge("post_actions_btns"));n&&(window.cur.destroy.push(n.onDestroy),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(window.cur.wallOnClearInput)&&window.cur.wallOnClearInput.push(n.clearSelection))}if(cur.withUpload=window.WallUpload&&!browser.safari_mobile&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.inArray)(cur.wallType,["all","own","feed","full_all","ads_promoted_stealth"])&&Wall.withMentions&&cur.wallUploadOpts,cur.withUpload&&WallUpload.checkDragDrop()){var c=function(){removeEvent(document,"dragover dragenter drop dragleave",E)},b=!1,d=!1,E=function(_){if(!1!==b&&(clearTimeout(b),b=!1),cur.uploadInited)return c(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(_);switch(_.type){case"drop":d=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox");break;case"dragleave":b=setTimeout((function(){d=!1,delete cur.wallUploadFromDrag,hide("post_upload_dropbox")}),100);break;case"dragover":case"dragenter":d||2==(d=!_.target||"IMG"!=_.target.tagName&&"A"!=_.target.tagName?2:1)&&setTimeout(WallUpload.initCallback,0),2==d&&(cur.wallUploadFromDrag=1)}return Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(_)};addEvent(document,"dragover dragenter drop dragleave",E),cur.destroy.push(c)}Wall.updateMentionsIndex(),_.top_wall_feature_tooltip?setTimeout((function(){Wall.showTopWallTooltip(_.top_wall_feature_tooltip_hash)}),800):_.order_feature_tooltip&&setTimeout((function(){Wall.showOrderTooltip(_.order_feature_tooltip_hash)}),800)},initPosterEditor:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)('<div class="page_block"></div>'),t=Wall.getMainPostBlock();"feed"===cur.module&&addClass(e,"feed_post_field_wrap");var l=function(){return!1},o=function(){Wall.closeFancyTooltipsInPost(),Wall.openPosterEditor(),cur.poster.sendStatsInfo("open")},i={onPreOpen:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(e,t)},onPostOpen:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onPreHide:function(){Wall.saveCaretPositionForPoster(cur.poster.getTextInputEl()),Wall.closeFancyTooltipsInPost();var _=ge("submit_post_error"),e=ge("submit_post_box"),t=ge("post_actions_btns"),l=ge("submit_post");Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(t,l),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(_)&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(e))},onPostHide:function(){var _=ge("post_settings_btn"),l=cur.options.suggesting&&ge("check_sign");_&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(_,cur.openPosterBtn),l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(l,cur.openPosterBtn),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(t);var o=cur.poster.getTextAsHtml();o&&o.match(Emoji.emojiRegex)&&(o=o.replace(Emoji.emojiRegex,Emoji.emojiReplace)),cur.postField.innerHTML=o,Wall.restoreCaretPositionForPoster(cur.postField),setTimeout((function(){Composer.updateArticleConvertSuggest(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(cur.postField,"composer"))})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(e)},onPreUploaderOpen:function(){var _=cur.poster.getTextInputEl();Wall.saveCaretPositionForPoster(_)},onPostUploaderClose:function(){var _=cur.poster.getTextInputEl();Wall.restoreCaretPositionForPoster(_)},onOverTextLimit:function(){Wall.disablePoster(!0),cur.poster.closeEditor(),cur.poster.sendStatsInfo("auto_disable"),cur.poster.state.toggled=!0},onChangeData:Wall.postChanged,onSend:function(_){Wall.sendPost(!0,_)},onDestroy:function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(e)},getPostOwnerId:function(){return+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(ge("submit_post_box"),"from-oid")},width:Wall.getMainPostBlock().clientWidth,containerClasses:"poster_wall-creating",placeholder:attr(cur.postField,"placeholder"),appendToElem:e};cur.openPosterBtn=ge("page_poster_btn"),cur.poster=new Poster(_.poster_config,i),addEvent(cur.openPosterBtn,"click",o),addEvent(cur.openPosterBtn,"mousedown",l),cur.destroy.push((function(){removeEvent(cur.openPosterBtn,"click",o),removeEvent(cur.openPosterBtn,"mousedown",l)}))},openPosterEditor:function(_){if(cur.poster&&!cur.poster.state.disabled&&!cur.poster.state.opened){_=_||{},cur.posterFeatureTT&&cur.posterFeatureTT.hide();var e=Wall.getMainPostBlock(),t=_.bkgId,l=window.browser.windows7||window.browser.windowsVista||window.browser.windowsXp;Wall.saveCaretPositionForPoster(cur.postField);var o=_.text||cur.postField.innerHTML;if(o=(o=o.replace(/\n/g,"<br/>")).replace(/<img[^>]*>/g,(function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:_}).firstChild,t=Emoji.getCode(e);return t?l?" ":Emoji.codeToChr(t):_})),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(e))return cur.poster.setBkg(t,!0),void cur.poster.setText(o);hide(e);var i=ge("post_settings_btn"),a=ge("submit_post_error"),s=cur.options.suggesting&&ge("check_sign"),r=cur.poster.getPostOptionsWrapperEl();if(i&&r.appendChild(i),s&&r.appendChild(s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(a)){var n=cur.poster.getErrorWrapperElement();n.innerHTML="",n.appendChild(a)}var c=cur.poster.getBtnsWrapper(),b=ge("post_actions_btns");b&&(c.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(b,c.firstChild):c.appendChild(b),b.children.length||c.children.length>1?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(c):hide(c)),cur.poster.openEditor(),cur.poster.setBkg(t,!0),cur.poster.setText(o)}},checkPosterAvailability:function(){if(cur.poster){var _=cur.wallAddMedia?cur.wallAddMedia.getMedias():[],e=cur.poster.isTextFieldValid(cur.postField),t=Wall.checkAttachesForPoster(_),l=e&&t;!l!==cur.poster.state.disabled&&Wall.disablePoster(!l),l&&cur.poster.state.toggled&&(Wall.openPosterEditor(),cur.poster.sendStatsInfo("auto_enable"),cur.poster.state.toggled=!1)}},checkAttachesForPoster(_){if(!Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(_))return!1;if(!_.length)return!0;var e=0;return _.some(_=>{if(Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_39__.isArray)(_)){var t=_slicedToArray(_,1)[0];["copyright","postpone",_web_donut__WEBPACK_IMPORTED_MODULE_33__.MEDIA_TYPE_DONUT_DURATION].includes(t)||++e}}),0===e},disablePoster:function(_){cur.poster&&(void 0===_&&(_=!0),cur.poster.state.disabled=_,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(cur.openPosterBtn,"_disable",_))},isPosterEditorOpen:function(){return cur.poster&&cur.poster.isOpen()},saveCaretPositionForPoster:function(_){if(document.activeElement===_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span"),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("span");e.classList.add("poster__marker","poster__marker_start"),t.classList.add("poster__marker","poster__marker_end");var l=getSelection().getRangeAt(0);(l=l.cloneRange()).insertNode(e),l.collapse(!1),l.insertNode(t)}},restoreCaretPositionForPoster:function(_){var e=geByClass1("poster__marker_start",_),t=geByClass1("poster__marker_end",_);if(e&&t){var l=document.createRange();l.setStartBefore(e),l.setEndBefore(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(e),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(t);var o=window.getSelection();o.removeAllRanges(),o.addRange(l)}else wall.focusOnEnd(_)},getMainPostBlock:function(){var _=cur.mainPostBlock;return _||(_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(ge("submit_post_box")),cur.mainPostBlock=_),_},changeAuthorInPoster:function(_){cur.poster&&_&&cur.poster.changeBkgAuthor({authorName:_.authorName,authorUrl:_.authorUrl})},sendInsertBeforeError:function(){ajax.post("al_page.php",{act:"insert_before_error",trace:(new Error).stack,owner_id:cur.oid,module:cur.module})},closeFancyTooltipsInPost:function(){var _=cur.wallAddMedia.lnkId;cur["postPostponeTT"+_]&&cur["postPostponeTT"+_].hide(),cur["post_action_btn"+_]&&cur["post_action_btn"+_].hide(),Object(_web_discover_category_post_topic__WEBPACK_IMPORTED_MODULE_38__.topicUISelectorHide)(_)},switchOwner:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(geByClass1("_ui_toggler",_),"on"),uiSearch.showProgress("wall_search"),cur.options.params.owners_only=cur.options.params.owners_only?null:1,nav.change({owners_only:cur.options.params.owners_only,offset:null})},fakeReplyAsGroupOver:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("reply_fakebox_with_official",_)&&wall.replyAsGroupOver(_)},fakeReplyAsGroupCheck:function(_,e,t){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("reply_fakebox_with_official",_))return window.tooltips&&window.tooltips.hide(_),Wall.showEditReply(e,null,!1,!1,!0,(function(){var _=ge("reply_as_group"+e);_&&(_.focus(),_.click())})),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(t)},setReplyAsGroup:function(_,e){if(!_)return!1;if(_.hasAttribute("data-reinit-ads-needs-confirmation")&&window.AdsEdit&&!e.reinitConfirmed&&AdsEdit.reinitCreatingPostFormNeeded())return AdsEdit.reinitCreatingPostFormConfirm(wall.setReplyAsGroup.pbind(_,extend({},e||{},{reinitConfirmed:!0}))),!1;var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("_submit_post_box",_),l=t&&ge("signed"),o=t&&ge("close_comments"),i=t&&ge("mute_notifications"),a=t&&ge("official"),s=t&&ge("mark_as_ads"),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"tt"),n=e.from||(e.fromGroup?cur.oid:vk.id),c=n==vk.id?wall.replyAsProfileData():window.replyAsData&&window.replyAsData[n]||wall.replyAsGroupDomData(_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"from-oid")==n||!c||c[0]!=n)return!1;var b=ge("submit_post_box"),d=!t&&cur.poster&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("poster",_),E=t===b;d&&(t=b,l=ge("signed"),s=ge("mark_as_ads"),o=ge("close_comments"),i=ge("mute_notifications"),a=ge("official")),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"from-oid",n),wall.replyAsAnimate(t,c[2],c[1]),cur.poster&&(E||d)&&Wall.changeAuthorInPoster({authorName:c[3],authorUrl:c[2]}),r&&r.rows&&each(r.rows,(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(this,"active",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(this,"from-oid")==n)})),l&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(l,n>0),s&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(s,n>0),o&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(o,n>0),i&&(Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.isChecked)(s)?(addClass(i,"on"),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(i,1)):Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.disable)(i,n>0)),a&&Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(a,n!==vk.id),_.setAttribute("aria-label",getLang(n<0?"wall_reply_as_group":"wall_reply_as_user")),_.hasAttribute("data-replace-owner-name")&&(_.innerHTML=c[3],"A"===_.tagName&&(_.href=c[2])),_.hasAttribute("data-replace-post-to")&&(cur.postTo=c[0]),_.hasAttribute("data-replace-oid")&&(cur.oid=c[0]),_.hasAttribute("data-reinit-ads-post-editor")&&window.AdsEdit&&(e.withoutRedraw?AdsEdit.reinitCreatingPostFormBoundWithoutRedraw():AdsEdit.reinitCreatingPostFormBound()),"official"==_.id&&Wall.postChanged(!0);var O=cur.wallAddMedia&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(cur.wallAddMedia.menu.menuNode,"_type_podcast");if(O){var p=cur.postTo==n;each(cur.wallAddMedia.getMedias()||[],(function(_,e){if("podcast"===e[0])return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(e[2],"attach_disabled",!p),p=!1,!1})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)(O,p)}return _.id&&Wall.hideCheckTimer(_.id.replace("reply_as_group",""),"editing"),cur.wallAddMedia&&cur.wallAddMedia.donutUpdateVisibility(t),!1},replyAsAnimate:function(_,e,t){var l=_&&geByClass1("_post_field_author",_),o=l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_post_field_image",l),i=_&&geByClass1("_post_field_official",_),a=i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_post_field_image",i),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"author_secondary")?0:1;l&&o&&o[s]&&(l.href=e,o[s].src=t),a&&a[s]&&(a[s].src=t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(_,"author_secondary")},replyAsGroupOver:function(_){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"checkbox_official")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"reply_fakebox_wrap_image")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"disabled"))return!1;var e,t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_submit_post_box",_),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("deep_active",_);if(e=l&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",_)?[7,8,8]:l?[2,8,8]:[9,8,8],Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(_,{text:function(){return(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"from-oid")||vk.id)<0?getLang("global_on_behalf_group"):getLang("global_on_behalf_me")},black:1,shift:e}),!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"reply_fakebox_wrap_image")&&(wall.isWallReply(_)||wall.isAdsCreatingPost(_))){var o="/al_groups.php",i="get_editor_clubs";wall.isAdsCreatingPost(_)&&(o="/ads_edit.php",i="a_get_promoted_post_stealth_groups"),ajax.post(o,{act:i},{cache:1})}},replyAsGroupFocus:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"tt");e&&e.isShown()||wall.replyAsGroupOver(_)},replyAsGroup:function(_,e,t){if(!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"checkbox_official")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"disabled"))return t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(t);if(!(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"can_reply_as_any_group")>0)&&wall.isWallReply(_))return wall.replyAsGroupTT(_,e,[]),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(t);if(!wall.isWallReply(_)&&!wall.isAdsCreatingPost(_)||cur.replyAsLoaded)wall.showReplyAsGroupTooltip(_,e);else{var l="/al_groups.php",o="get_editor_clubs";wall.isAdsCreatingPost(_)&&(l="/ads_edit.php",o="a_get_promoted_post_stealth_groups"),ajax.post(l,{act:o},{cache:1,onDone:function(t){cur.replyAsLoaded=t,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(_)&&wall.showReplyAsGroupTooltip(_,e)}})}return t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(t)},showReplyAsGroupTooltip(_,e){var t=!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("can_reply_only_verified",_),l=(cur.replyAsLoaded||[]).filter(_=>!t||_[0]>0||_[4]);wall.replyAsGroupTT(_,e,l)},replyAsGroupDomData:function(_){var e,t,l,o,i;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",_)){var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",_),"post-id");a&&(e=ge("reply_box"+a)||ge("reply_fakebox"+a),t=a.split("_")[0])}else e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_submit_post_box",_),t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"oid");return e&&(l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"owner-photo"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"owner-href"),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"owner-name")),t&&l&&o&&i&&[t,l,o,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.unclean)(i))]||cur.wallTpl&&cur.wallTpl.ownerData||!1},isWallReply:function(_){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_submit_post_box",_);return e&&e.id.match(/reply_box(-?\d+)_(\d+)/)},isAdsCreatingPost:function(_){return!!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("ads_edit_ad_submit_post_header",_)},replyAsProfileData:function(){return window.cur&&cur.wallTpl&&cur.wallTpl.profileData||window.wkcur&&wkcur.wallTpl&&wkcur.wallTpl.profileData||window.mvcur&&mvcur.wallTpl&&mvcur.wallTpl.profileData},replyAsGroupList:function(_,e){var t=_.hasAttribute("data-disallow-profile")?[]:[wall.replyAsProfileData()],l=wall.replyAsGroupDomData(_);return l&&t.push(l),(wall.isWallReply(_)||wall.isAdsCreatingPost(_))&&each(window.replyAsList,(function(){this[0]!=e&&t.push(this)})),t},replyAsGroupTT:function(_,e,t){window.replyAsList=t||[],window.replyAsData={},each(window.replyAsList,(function(){window.replyAsData[this[0]]=this}));var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"tt"),o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_submit_post_box",_),i=o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"from-oid");if(!wall.replyAsProfileData())return!1;if(!l){var a=wall.replyAsGroupList(_,e),s="";_.hasAttribute("data-enable-search")&&(s+='<div class="post_from_tt_row_search_wrap"><input class="clear_fix post_from_tt_row post_from_tt_row_search" value="" placeholder="'+getLang("global_search")+'" /><div class="post_from_tt_row_search_progress"></div></div>');var r=function(_,e,t,l,o){return'<a id="_post_from_tt_row_oid_'+e+'" class="clear_fix post_from_tt_row _post_from_tt_row_searchable'+_+'" data-from-oid="'+e+'" href="'+t+'"><img class="post_from_tt_image" src="'+l+'" aria-label="'+o+'">'+o+"</a>"};each(a,(function(){var _=i==this[0]?" active":"";s+=r(_,this[0],this[2],this[1],this[3])}));var n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("deep_active",_);l=new ElementTooltip(_,{content:'<div class="post_from_tt_choose _post_scroll_wrap">'+s+"</div>",appendToParent:!0,autoHide:!0,customShow:!0,defaultSide:"bottom",offset:function(){return wall.isAdsCreatingPost(_)?[_.offsetWidth/2+8.5,-2]:n?[1,-5]:[-10,-5]},onFirstTimeShow:function(e){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post_from_tt_row",e);each(t,(function(e,t){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"post_from_tt_row_search")||addEvent(t,"click",wall.setReplyAsGroup.pbind(_,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(this,"from-oid")}))}));var o=geByClass1("post_from_tt_row_search",e);if(o){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_post_from_tt_row_searchable",e),a=_.getAttribute("data-search-url"),s={};addEvent(o,"keyup valueChanged",(function(){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.trim)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(o)).toLowerCase();if(a&&t){_.searchRequestTimeout&&(clearTimeout(_.searchRequestTimeout),delete _.searchRequestTimeout);var n=geByClass1("post_from_tt_row_search_progress",e);geByClass1("pr",n)||Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.showProgress)(n),_.searchRequestTimeout=setTimeout((function(){s[t]?Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.hideProgress)(n):ajax.plainpost(a,{str:t},(function(o){s[t]=!0,o=JSON.parse(o),each(o,(function(){if(!ge("_post_from_tt_row_oid_"+this[0])){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(r("",this[0],this[2],this[1],this[3]));geByClass1("ui_scroll_content",e).appendChild(t),addEvent(t,"click",wall.setReplyAsGroup.pbind(_,{from:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"from-oid")})),window.replyAsData[this[0]]||(window.replyAsData[this[0]]=this)}})),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_post_from_tt_row_searchable",e),setTimeout((function(){l.scroll.update(),l.updatePosition()}),0),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.hideProgress)(n)}),(function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.hideProgress)(n)}))}),500)}each(i,(function(_,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggle)(e,""===t||-1!==e.innerText.toLowerCase().indexOf(t))}))}))}this.rows=t,this.scroll=new uiScroll(geByClass1("_post_scroll_wrap",e)),setTimeout((function(){l.scroll.update(),l.updatePosition()}),0)},onShow:function(_){setTimeout((function(){if(l.scroll){var e=geByClass1("active",_),t=e?e.offsetTop-(l.scroll.data.viewportHeight-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(e)[1])/2:0;l.scroll.scrollTop(t);var o=geByClass1("post_from_tt_row_search",_);o&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.elfocus)(o)}}),0)},onHide:function(_){var e=geByClass1("post_from_tt_row_search",_);e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,"")}}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"tt",l)}e&&l.isShown()&&!_.hasAttribute("data-disallow-profile")&&wall.setReplyAsGroup(_,{from:i==vk.id?e:vk.id}),_.tt&&_.tt.hide&&_.tt.hide(),l.isShown()||l.show()},reportPost:function(_,e,t){stManager.add([jsc("web/privacy.js"),"privacy.css"],(function(){return Privacy.show(_,e,"report_"+t)}))},parsePostId:function(_){var e=_.match(/(-?\d+)(_?)(photo|video|note|topic|market|wall_reply|note_reply|photo_comment|video_comment|topic_comment|market_comment|)(\d+)/);return{type:e[3]||"wall",id:e[1]+"_"+e[4]}},likeIt:function(_,e,t,l){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.stopEvent)(l),!vk.id)return!1;if(cur.viewAsBox)return cur.viewAsBox(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(l);var o,i=wall.parsePostId(e),a=i.type,s=i.id,r=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",_))||wall.domPost(s),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(r,"_like_wrap"),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(n,"_count"),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(n,"my_like");o=e==cur.wallLayer?"wkview":cur.wallType?"feed"==cur.wallType?"news"==cur.section?"feed_"+(cur.subsection?cur.subsection:cur.section):"recommended"==cur.section?"feed_recommended"+("recent"!=cur.subsection?"_"+cur.subsection:""):"friends"==cur.section||"groups"==cur.section||"videos"==cur.section||"photos"==cur.section?"feed_"+cur.section+(cur.subsection?"_"+cur.subsection:""):"feed_"+cur.section:"top"==cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,ajax.post("like.php",{act:b?"a_do_unlike":"a_do_like",object:a+s,hash:t,wall:2,from:o},{onDone:Wall.likeFullUpdate.pbind(_,e),onFail:function(){return!0}});var d=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.stripHTML)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(c)).replace(/(\s|,)/g,"");return Wall.likeUpdate(_,e,!b,Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(d)+(b?-1:1)),"wall"==a&&window.cur.onLike&&window.cur.onLike(_,a,e,b),cur.onWallLike&&cur.onWallLike(),"wall"==a&&Wall.triggerAdStat(s,"like_post"),!1},likesShow:function(_,e,t){if(!_.postDontShowLikes){t=t||{};var l=wall.parsePostId(e),o=l.type,i=l.id,a=o+i,s=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",_))||wall.domPost(i),r=t.views?"_views_wrap":t.share?"_share_wrap":"_like_wrap",n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(s,r),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"_feedback_info_item")?_:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(n,"_icon"),b=s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(s,"_share_wrap");if(c&&!cur.viewAsBox){var d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(n)[0],E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(c)[0],O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(c,!0)[0],p=E+O/2-d-41,u=t.views?{views:1}:t.share?{published:1}:{};if(t.listId&&(u.list=t.listId),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(c,"_feedback_info_item")){var w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByTag1)("em",c);p=-40,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(c,"feedback_share")&&(p+=7),p+=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(w)[0]/2}var P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(c,"_feedback_info_item")?c:c.parentNode;Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(P,{url:"/like.php",params:extend({act:"a_get_stats",object:a,has_share:b?1:""},u),slide:15,shift:[-p,t.views?2:"wall_reply"==o?-3:7],ajaxdt:100,showdt:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,tip:{over:function(){Wall.likesShow(_,e,t)}},onShowStart:function(){var e=P.tt.container;setTimeout((function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.setStyle)(e,{left:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.floatval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getStyle)(e,"left"))+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(c)[0]-E})}),10),Object(_web_lib_stats__WEBPACK_IMPORTED_MODULE_22__.statlogsValueEvent)("likes_show",Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"shown"))},typeClass:"like_tt",className:t.cl||""})}}},likesShowList:function(_,e,t){t=t||{};var l=wall.parsePostId(e),o=l.type,i=l.id,a=o+i,s=_&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_post_content",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",_))||wall.domPost(i),r=t.share?"_share_wrap":"_like_wrap",n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(s,r);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domByClass)(n,"_icon")&&!cur.viewAsBox&&Object(_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_14__.showWiki)({w:(t.views?"views":t.share?"shares":"likes")+"/"+Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(a)},!1,!1,{queue:1})},sharesShow:function(_,e,t){Wall.likesShow(_,e,extend(t,{share:1}))},viewsShow:function(_,e,t){Wall.likesShow(_,e,extend(t,{views:1}))},sharesShowList:function(_,e,t){Wall.likesShowList(_,e,extend(t,{share:1}))},viewsShowList:function(_,e,t){Wall.likesShowList(_,e,extend(t,{views:1}))},viewsUpdate:function(_,e){var t=wall.parsePostId(e),l={act:"a_get_stats",object:t.type+t.id,views:1};ajax.post("/like.php",l,{cache:1,onDone:function(t,o){Wall.likeUpdate(!1,e,!1,t,void 0,void 0,1);var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.ce)("div",{innerHTML:o});_.setAttribute("title",i.innerText||i.textContent),setTimeout(ajax.invalidate.pbind("/like.php",l),3e3)}})},sharesOpen:function(_,e,t){if(cur.viewAsBox)return cur.viewAsBox(),Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(_);if(!vk.id)return!1;Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.stopEvent)(_);var l=wall.parsePostId(e),o=l.type,i=l.id,a=o+i;return Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_17__.showBox)("/like.php",extend({act:"publish_box",object:a},t)),"wall"==o&&Wall.triggerAdStat(i,"share_post"),!1},customCur:function(){return window.wkcur&&wkcur.shown?wkcur:window.mvcur&&mvcur.mvShown?mvcur:window.pvcur&&cur.pvShown?pvcur:cur},processPostReplyActions:function(_){},updatePostAuthorData:function(_){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("_post_author_data_"+_).forEach((function(_){_.post_author_data_update=!0}))},closeComments:function(_,e,t,l,o){var i=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"closed"))?0:1;ajax.post("al_wall.php",{act:"close_comments",owner_id:e,post_id:t,close:i,hash:l},{onDone:function(){if(o)o(i);else{var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",_);Wall.onCloseComments(i,e)}}})},onCloseComments:function(_,e,t){if(e&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"postponed")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"post")&&!vk.widget){var l=geByClass1("comment",e),o=geByClass1("reply_box_inner_wrap",e),i=cur.pgParams&&cur.pgParams.archive||"wall_archive"===cur.module,a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"Post--with_closed_comments_donut");if(t||a||l&&o){i||a||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(e,"closed_comments",_);var s=geByClass1("action_closing_comments",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(s,"closed",_),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(s,getLang(_?"wall_open_comments":"wall_closing_comments"))}else{var r=e.id.replace("post","").split("_");ajax.post("al_wall.php",{act:"comment_box",owner_id:r[0],post_id:r[1]},{onDone:function(t,l){if(!i){var o=geByClass1("comment",e),a=geByClass1("reply_box_inner_wrap",e);if(!o&&t){var s=geByClass1("like",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domNS)(s))}if(!a&&l){var r=geByClass1("replies_list",e);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(l),r)}}Wall.onCloseComments(_,e,!0)}})}}},showPostEditedTime:function(_){var e=(cur.lang||{}).wall_changed;if(e){var t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"time")),l=60*((new Date).getTimezoneOffset()+180);t&&Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(_,{text:e.replace("{time}",Object(_web_lib_lang__WEBPACK_IMPORTED_MODULE_26__.getDateText)(t,l)),black:1,shift:[0,4]})}},showPostAuthorData:function(_,e){var t=_.className.match(/_post_author_data_(-?\d+_\d+)/)[1]||"",l=e?e.target:window.event.srcElement;!t||l!=_&&l.onmouseover||(_.post_author_data_update&&(delete _.post_author_data_update,_.post_author_data_tt&&(_.post_author_data_tt.destroy(),_.post_author_data_tt=!1)),_.post_author_data_tt||ajax.post("al_page.php",{act:"post_author_data_tt",raw:t},{onDone:function(e){var l=geByClass1("post_link",_)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(_);if(e&&l){var o={content:e,arrowSize:"mini",cls:"post_author_data",defaultSide:"bottom",align:"left",id:"author_tt_"+t},i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("_im_mess_stack",_);i?o.appendTo=i:o.appendToParent=!0,vk.widget&&(o.offset=[0,-2],o.forceSide="bottom"),_.post_author_data_tt=new ElementTooltip(l,o),_.post_author_data_tt.show()}else _.post_author_data_tt=!0}}))},hideAdsReplacedTT:function(){cur.adsReplacedFeatureTT.destroy(),cur.wallAdsReplacedFeatureTooltip=null,cur.adsReplacedFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.wallAdsReplacedFeatureTooltipHash,type:"ads_in_post_replaced"})},showAdsReplacedTooltip:function(){if(!cur.adsReplacedFeatureTT){var _=setTimeout((function(){var _=geByClass1("addpost_opt");_&&(cur.adsReplacedFeatureTT=new ElementTooltip(_,{content:'<div class="ads_replaced_feature_tt__close" onclick="cur.adsReplacedFeatureTT.hide();"></div>'+getLang("global_ads_in_post_replaced"),forceSide:"top",cls:"feature_intro_tt ads_replaced_feature_tt",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_),offset:[1,-10],onHide:Wall.hideAdsReplacedTT}),cur.adsReplacedFeatureTT.show())}),800);cur.destroy.push((function(){clearTimeout(_)})),cur.destroy.push((function(){cur.adsReplacedFeatureTT&&cur.adsReplacedFeatureTT.destroy()}))}},createPostTooltip:_web_page_wall_post_tooltip__WEBPACK_IMPORTED_MODULE_40__.createPostTooltip,showTopWallTooltip:function(_){if(!cur.topWallFeatureTT){var e=ge("page_wall_top");e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(e)||(e=ge("page_wall_top_more")),e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.isVisible)(e)&&(cur.topWallFeatureTT=new ElementTooltip(geByClass1("ui_tab",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("ui_tab",e),{content:'<div class="feature_tooltip__close" onclick="cur.topWallFeatureTT.hide();"></div>'+getLang("wall_top_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domClosest)("page_block",e),onHide:function(){ajax.post("al_index.php",{act:"hide_feature_tt",hash:_,type:"top_wall_web"})}}),cur.topWallFeatureTT.show())}},hidePostCopyrightFeatureTooltip:function(){cur.postCopyrightFeatureTooltip&&cur.postCopyrightFeatureTooltipHash&&(cur.postCopyrightFeatureTooltip=!1,cur.postCopyrightFeatureTT.hide(),setTimeout(()=>{cur.postCopyrightFeatureTT.destroy()},ElementTooltip.FADE_SPEED),ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"}))},showPostCopyrightFeatureTooltip:function(){if(cur.postCopyrightFeatureTooltip&&!cur.postCopyrightFeatureTT){var _=setTimeout(()=>{var _=ge("post_settings_btn");_&&cur.postCopyrightFeatureTooltip&&(cur.postCopyrightFeatureTT=new ElementTooltip(_,{content:'<div class="feature_tooltip__close" onclick="Wall.hidePostCopyrightFeatureTooltip();"></div>'+getLang("wall_post_copyright_feature_text"),cls:"feature_intro_tt feature_info_tooltip",forceSide:"bottom",autoShow:!1,noOverflow:!1,noHideOnClick:!0,appendToParent:!0,offset:[-6.5,-8],onShow:()=>{ajax.post("al_index.php",{act:"show_feature_tt",hash:cur.postCopyrightFeatureTooltipHash,type:"post_copyright"})},onWindowClick:()=>{cur.postCopyrightFeatureTT&&(cur.postCopyrightFeatureTT.hide(),cur.postField.blur())}}),cur.postCopyrightFeatureTT.show())},800);cur.destroy.push(()=>clearTimeout(_))}},hidePosterFeatureTooltip:function(){cur.posterFeatureTooltip=!1,cur.posterFeatureTT&&cur.posterFeatureTooltipHash&&(cur.posterFeatureTT.destroy(),cur.posterFeatureTT=null,ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.posterFeatureTooltipHash,type:"poster_new_year"}))},showPosterFeatureTooltip:function(){if(cur.posterFeatureTooltip){var _=setTimeout((function(){var _=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domQuery1)(".poster__open-btn",ge("page_poster_btn"));if(_&&cur.posterFeatureTooltip){var e='<div class="poster_feature_tt__layout" onclick="cur.posterFeatureTT.hide(); cancelEvent(event);"><div class="poster_feature_tt__close"></div><div class="poster_feature_tt__info">'+getLang("wall_new_posters_new_year")+"</div>";cur.posterFeatureTT=new ElementTooltip(_,{content:e,forceSide:"bottom",cls:"eltt_fancy poster_feature_tt",autoShow:!1,noOverflow:!1,align:"left",centerShift:-28,noHideOnClick:!0,appendToParent:!0,offset:[0,-8],onHide:Wall.hidePosterFeatureTooltip,onWindowClick:function(){cur.posterFeatureTT.hide(),cur.postField.blur()}}),cur.posterFeatureTT.show(),cur.poster&&cur.poster.sendStatsInfo("new_bkg_tooltip_show")}}),800);cur.destroy.push((function(){clearTimeout(_)}))}},toggleRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__.FriendsRecommendGlobals.toggleRecommFriend,hideRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__.FriendsRecommendGlobals.hideRecommFriend,onClickRecommFriend:_web_page_friends_recommend__WEBPACK_IMPORTED_MODULE_34__.FriendsRecommendGlobals.onClickRecommFriend,replyEditPhoto:function(_,e,t){return Wall.showEditReply(e,null,!1,!1,!1,(function(){var t=ge("reply_more_attaches"+e);if(t){var l=geByClass1("ms_item_photo",t);tooltips.hide(_),l&&l.click()}})),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(t)},replyMoreAttachShow:function(_,e,t){return Wall.showEditReply(e,null,!1,!1,!0,(function(){var _=geByClass1("ms_items_more_wrap",ge("reply_more_attaches"+e));_&&(_.focus(),_.click())})),t&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(t)},replyFakeEmojiOver:function(_){wall.initEditReply(_,!1,!0,(function(){var e=ge("reply_smile"+_);if(e){var t=geByClass1("emoji_smile",e);t&&t.onmouseover()}}))},hideDeepReplies:function(_){var e=ge("post"+_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"reply")&&(e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",e),_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"post-id"));var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"replies-offset")||0,l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"replies-limit")||3,o=ge("replies"+_),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(cur.wallTpl.reply_deep_next,{post_id:_,reply_id:_,offset:t,count:l,text:"",class:" replies_next_main"}));o.innerHTML="",o.appendChild(i),Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_23__.scrollToY)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(o)[1]-100,0,null,!0),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(i,"collapse",!0),i.click(),cur.wallMyOpened[_]=0},addNewReply:function(_){var e,t=_[2],l=(_[10]||"").match(/wall.showReply\([^-)0-9]*(-?[_0-9]+)[^-)0-9]*(-?[_0-9]+)[^-)0-9]*\)/),o=l&&l[2]||"",i=o&&o!==t,a=cur.wallLayer&&cur.wallLayer===t,s=a?ge("replies"+t):ge("post"+t),r=s.offsetHeight,n=0,c=0;e=i?wall._addDeepReply(_,o):wall._addRootReply(_);var b=a?ge("wl_post"):ge("post"+t);return wall.incReplyCounter(b,1,_[13]),a?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(geByClass1("wl_replies_wrap",b)),cur.count++,cur.loaded++):(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)("replies_wrap"+t),Wall.repliesSideSetup(t)),Wall.updateMentionsIndex(),e&&(n=s.offsetHeight-r,c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(e,a)[1]),[n,c]},_addDeepReply:function(_,e){var t,l=_[2],o=_[10]||"",i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(o),a=i&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(i,"root-id")||e,s=ge("post"+a),r=s&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",s),n=cur.wallLayer&&cur.wallLayer===l?wkcur:cur;if(r&&(a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"post-id"),s=ge("post"+a)),!s)return null;var c=ge("replies"+a);if(!c){wall.addDeepRepliesBlock(a);var b=ge("reply_fakebox"+a)||ge("reply_box"+a);b&&hide(b),t=c=ge("replies"+a)}if(!c)return null;if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("reply",c).length){var d=wall._addNewReplyShowMore(l,a,c,"replies_next_deep");t=t||d}else{var E=ge("replies_short_deep"+a),O=wall.isDescRepliesOrder(l);if(E){var p=geByClass1("replies_short_text_count",E),u=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(p).replace(/[^0-9]/g,""))||0;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(p,getLang("global_replied_to_reply_count",u+1))}else{E=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(n.wallTpl.reply_deep_short,{post_id:l,reply_id:a,reply_msg_id:a.split("_")[1],img_src:_[6]||"",name:_[5]||"",count:getLang("global_replied_to_reply_count",1)}));var w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(c);if(w)Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(E,w),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(w,"replies_next_deep")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.toggleClass)(w,"replies_prev",O);else{c.appendChild(E);var P=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(n.wallTpl.reply_deep_next,{post_id:l,reply_id:a,offset:0,count:1,text:getLang("wall_next_n_replies",1),class:" replies_next_deep"+(O?" replies_prev":"")}));c.appendChild(P)}}addClass(r,"replies_deep_has_short"),t=E}return wall.updateCollapseDeepReplies(a),removeClass(r,"replies_deep_empty_list"),t},_addRootReply:function(_){var e=_[2],t=cur.wallLayer&&cur.wallLayer===e,l=t?wkcur:cur,o=ge("replies"+e),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domChildren)(o).length,a="full"===l.wallType,s=!i||i<3&&(t||a),r=wall.isDescRepliesOrder(e);if(s){var n=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.intval)(_[_.length-1]),c=void 0!==l.options.is_admin?l.options.is_admin:l.options.wall_oid<0?8&n?constants.Groups.GROUPS_ADMIN_LEVEL_EDITOR:2&n?constants.Groups.GROUPS_ADMIN_LEVEL_MODERATOR:constants.Groups.GROUPS_ADMIN_LEVEL_USER:constants.Groups.GROUPS_ADMIN_LEVEL_USER,b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Wall.getNewReplyHTML(_,c,!1,l));return Object(_web_lib_legacy__WEBPACK_IMPORTED_MODULE_28__.nodeUpdated)(b),r&&o.firstChild?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(b,o.firstChild):o.appendChild(b),b}return wall._addNewReplyShowMore(e,e,o,"replies_next_main",r)},_addNewReplyShowMore:function(_,e,t,l,o){var i,a,s=cur.wallLayer&&cur.wallLayer===_?wkcur:cur,r=s.options.replies_page_count||20,n=o?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domFC)(t):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domLC)(t);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(n,"replies_next"))return(i=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(n,"count")||0)<r?(i++,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(n,"count",i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(n,o?getLang("wall_prev_n_replies",i):getLang("wall_next_n_replies",i))):o&&(a=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(n,"offset")||0,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(n,"offset",a+1)),n;if(o)a=0;else{var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)(l,t),b=c[c.length-1],d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domChildren)(t);if(b){var E=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(b,"count")||r,O=+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(b,"offset")||0,p=d.indexOf(b);p=(p>=0?p:0)+1,a=O+E+d.slice(p).filter((function(_){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"reply")})).length}else a=d.filter((function(_){return Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(_,"reply")})).length}var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(s.wallTpl.reply_deep_next,{post_id:_,reply_id:e,offset:a,count:1,text:o?getLang("wall_prev_n_replies",1):getLang("wall_next_n_replies",1),class:" "+(o?" replies_prev":"")+(l?" "+l:"")}));return o?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertBefore)(u,t.firstChild):t.appendChild(u),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.show)(u),u},removeDeepReply:function(_){var e=_[2],t=ge("post"+e),l=0,o=0;if(cur.wallMyDeleted[e]||!t)return[l,o];o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getXY)(t,cur.layerpost)[1],Object(_web_lib_video__WEBPACK_IMPORTED_MODULE_25__.revertLastInlineVideo)(t);var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",t)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",t),a=i?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(i,"post-id"):"",s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("replies_wrap_deep",t);if(s)l=-t.offsetHeight,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(t),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.getSize)(s)[1]&&addClass(s,"replies_deep_empty_list"),wall.updateCollapseDeepReplies(e);else if(ge("replies_wrap_deep"+e)){var r=cur.wallLayer&&cur.wallLayer===a?wkcur:cur,n=geByClass1("reply_date",t),c=geByClass1("reply_link_wrap",t),b="",d=attr(t,"onclick");d&&(b+=' onclick="'+d+'"');var E=e.split("_")[0],O=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(E<0?r.wallTpl.reply_deleted_group:r.wallTpl.reply_deleted_user,{reply_id:e,date:n?n.innerHTML:"",answer:c?c.outerHTML:"",class:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"reply_replieable")?" reply_replieable":"",attr:b})),p=t.offsetHeight;Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domReplaceEl)(t,O),l=O.offsetHeight-p}else l=-t.offsetHeight,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.re)(t);return cur.layerpost&&(cur.count--,cur.loaded--),i&&(wall.repliesSideSetup(a),wall.incReplyCounter(i,-1)),[l,o]},addDeepRepliesBlock:function(_){var e=ge("post"+_);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(e,"reply")){var t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("wl_post",e)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("post",e);if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.hasClass)(t,"deep_active")){var l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(t,"post-id"),o=ge("replies_wrap_deep"+_),i=(cur.wallLayer?wkcur:cur).wallTpl;o||(o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(i.reply_deep,{post_id:l,reply_id:_,reply_msg_id:_.split("_")[1],text:"",offset:0,class:" replies_next_deep"})),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domInsertAfter)(o,e));var a=ge("reply_fakebox"+_),s=ge("reply_box"+_);if(!a&&!s){var r=ge("reply_fakebox"+l)||ge("reply_box"+l),n=geByClass1("checkbox_official",r)||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.gpeByClass)("reply_fakebox_with_official",r),c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(i.reply_box,{post_id:_,owner_name:Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_20__.clean)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"owner-name")||""),owner_photo:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"owner-photo")||"",owner_href:Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(r,"owner-href")||"",can_reply_as_group:n||"",class:n?" reply_fakebox_with_official":""}));o.appendChild(c),addClass(o,"replies_deep_has_field")}}}},addReplyName:function(_,e){var t={};t[_]=e,wall.addReplyNames(t)},addReplyNames:function(_){var e=cur.wallLayer?wkcur:cur;e.options||(e.options={}),e.options.reply_names=extend({},e.options.reply_names,_)},getReplyNames:function(){return(cur.wallLayer?wkcur:cur).options.reply_names||{}},getReplyName:function(_){return cur.pvShown&&cur.pvReplyNames?cur.pvReplyNames[_]||[]:window.mvcur&&mvcur.mvShown&&!mvcur.minimized?mvcur.mvReplyNames[_]||[]:wall.getReplyNames()[_]||[]},showReorderRepliesTooltip:function(_,e){var t=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;if(!t["postRepliesReorderTT"+e]&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.data)(_,"ett")){var l,o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domPN)(_);l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"hide-smart")||!1?t.wallTpl.replies_reorder_tooltip:t.wallTpl.replies_reorder_tooltip_with_smart;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(l||"",{postId:e})),a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("radiobtn",i),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"order")||"asc";radioBtns["post_replies_reorder"+e]={val:s,els:a},a.some((function(_){if(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"order")===s)return Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.checkbox)(_,!0),!0}));var r=new ElementTooltip(_,{appendTo:o,forceSide:"bottom",autoShow:!1,cls:"eltt_fancy eltt_fancy_actions",noOverflow:!1,centerShift:0,offset:[-10,0],content:i,align:"left"});t["postRepliesReorderTT"+e]=r,cur.destroy.push((function(){r&&r.destroy()})),r.show()}},reorderReplies:function(_,e,t){var l=cur.wallLayer&&cur.wallLayer===e?wkcur:cur;t=t||"asc",Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.radiobtn)(_,t,"post_replies_reorder"+e);var o=ge("post_replies_reorder"+e),i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"label")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_);Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(o,i),o.setAttribute("aria-label",i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"order",t),l["postRepliesReorderTT"+e]&&l["postRepliesReorderTT"+e].hide(),wall.moreReplies(e,0,0,{deep:!0,clear:!0,order:t,onDone:function(_,t,l){var o=ge("replies"+e);if(l.count>l.offset+l.num){var i=cur.wallLayer&&cur.wallLayer===e?wkcur:cur,a=i.options.replies_page_count||20,s=Math.min(a,l.count-l.offset-l.num),r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.se)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.rs)(i.wallTpl.reply_deep_next,{post_id:e,reply_id:e,offset:l.offset+l.num,count:s,text:getLang("wall_next_n_replies",s),class:" replies_next_main"}));o.appendChild(r)}l.top_reply_ids&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(o,"top-ids",l.top_reply_ids.join(",")),cur.wallMyOpened=cur.wallMyOpened||{},cur.wallMyOpened[e]=1,wall.repliesSideSetup(e)}})},getRepliesOrder:function(_){var e=ge("post_replies_reorder"+_);return(e?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(e,"order"):"")||"asc"},isDescRepliesOrder:function(_,e){return"desc"===(e=e||wall.getRepliesOrder(_))},postEventChangeStatus:function(_,e,t,l){var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"context");return stManager.add([jsc("web/groups.js")],()=>{Groups.enter(_,e,t,o,(_,t,l)=>{var i=o.split("_"),a=!i[1],s=i[0]+"_"+(a?"decline":""),r=a?getLang("events_snippet_will_participate_active"):getLang("events_snippet_cant_participate_active");l=l||{},Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post_event_action_btn"+e).forEach(_=>{addClass(_,"secondary"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(_,r),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.domData)(_,"context",s)}),l.members&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("page_media_event"+e).forEach(_=>{var e=geByClass1("page_media_event_members",_);e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.val)(e,l.members)})},{showProgress:()=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post_event_action_btn"+e).forEach(_=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.lockButton)(_)})},hideProgress:()=>{Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_13__.geByClass)("post_event_action_btn"+e).forEach(_=>{Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_18__.unlockButton)(_)})}})}),l&&Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_15__.cancelEvent)(l)},showEventFriends:function(_,e){Object(_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_16__.showTooltip)(_,{url:"/al_groups.php",params:{act:"a_event_friends_tt",owner_id:e},ajaxdt:100,showdt:400,hidedt:200,dir:"auto",noZIndex:!0,typeClass:"like_tt"})},showOrderTooltip:function(_){var e=geByClass1("post_replies_reorder");e&&(cur.orderFeatureTT=new ElementTooltip(e,{content:'<div class="feature_tooltip__close" onclick="cur.orderFeatureTT.hide();"></div>'+getLang("wall_order_feature_text"),forceSide:"top",cls:"feature_intro_tt feature_info_tooltip order_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendToParent:!0,offset:[0,-4],onHide:()=>{ajax.post("al_index.php",{act:"hide_feature_tt",hash:_,type:"order_web"}),cur.orderFeatureTT.destroy(),delete cur.orderFeatureTT}}),cur.orderFeatureTT.show())},updateRepliesOnScroll:function(){cur.wallLayer?WkView.wallUpdateRepliesOnScroll():"full"===cur.wallType&&FullWall.onePostOnScroll()}};__webpack_exports__.default=Wall}}]);try{stManager.done("cmodules/bundles/42c63f80984342f2f64e56433dd0512e.bc01b40ef604cf6468a8.js")}catch(_){}