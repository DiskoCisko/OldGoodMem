(window.webpackJsonp=window.webpackJsonp||[]).push([["8e301bafead91572e7bd323519a67b88"],{jXbq:function(e,t,i){"use strict";i.r(t),i.d(t,"UnauthActionBox",(function(){return c}));var o=i("FbVm"),n=i("r0fY"),a=i("OrGp"),s=i("EasH");var c={show:function(e){var t=new s.MessageBox({title:"",width:450,hideButtons:!0,containerClass:"UnauthActionBoxContainer"});t.content(e.html);var i=t.bodyNode.querySelector(".UnauthActionBox__close"),c=t.bodyNode.querySelector(".UnauthActionBox__join"),r=t.bodyNode.querySelector(".UnauthActionBox__login"),u=function(t){o.marketingTransitionItemStat.logEvent(n.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,e.action,window.location.href)};null==i||i.addEventListener("click",(function(){u(n.MarketingTransitionItemEventType.CLOSE),t.hide()})),null==c||c.addEventListener("click",(function(){u(n.MarketingTransitionItemEventType.CLICK_SIGN_UP),Object(a.showJoinBox)()})),null==r||r.addEventListener("click",(function(){u(n.MarketingTransitionItemEventType.CLICK_SIGN_IN),Object(a.showQuickLoginBox)()})),u(n.MarketingTransitionItemEventType.OPEN),t.show()}}},nTq2:function(e,t,i){"use strict";i.r(t),i.d(t,"Likes",(function(){return j}));i("91GP"),i("pIFo"),i("SRfc");var o=i("zxIV"),n=i("Egk5"),a=i("FWc3"),s=i("t7n3"),c=i("7jxN"),r=i("/PiP"),u=i("jE6c"),l=i("EasH"),d=i("4+be");function _(e){var t=e.match(/^([a-z_]+)([0-9\-_]+)$/);return t?{objectType:t[1],objectId:t[2]}:null}var h=i("jXbq");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}var p="like",w="share",b="views",m="comment",j={toggle(e,t,i,a){if(Object(n.cancelEvent)(t),Object(u.isObject)(window.cur)&&Object(u.isFunction)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();var s=Object(o.hasClass)(e,"active");Object(o.addClass)(e,"animate"),this.clientUpdate(i,p,s?-1:1,!s);var c=()=>{Object(o.toggleClass)(e,"active",s),this.clientUpdate(i,p,s?1:-1,s)};window.ajax.post("like.php",{act:s?"a_do_unlike":"a_do_like",object:i,hash:a,list:cur.pvListId,wall:2,from:this._getReference(i),from_widget:vk.widget?1:0},{onDone:t=>{if(t.unauth_action_box)return c(),void h.UnauthActionBox.show(t.unauth_action_box);this.update(i,t);var o=i.match(/^(wall|market)(.*)/);o&&cur.onLike&&cur.onLike(e,o[1],o[2],s)},onFail:()=>(c(),!1)}),Object(u.intval)(Object(o.domData)(e,"count"))>0?j.showLikes(e,i,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&window.mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?"feed_"+(cur.subsection?cur.subsection:cur.section):"recommended"===cur.section?"feed_recommended"+("recent"!==cur.subsection?"_"+cur.subsection:""):Object(s.inArray)(cur.section,["friends","groups","videos","photos"])?"feed_"+(cur.subsection?"_"+cur.subsection:""):"feed_"+cur.section:"top"===cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,share(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(vk.widget&&!vk.id)return window.Widgets.oauth();if(Object(u.isObject)(window.cur)&&Object(u.isFunction)(cur.viewAsBox))return cur.viewAsBox();var i=_(e),o=i.objectType,n=i.objectId;(vk.widget?window.showBox:l.showBox)("like.php",v({act:"publish_box",object:e,from_widget:vk.widget?1:0},t),{onDone:(e,t)=>{t.unauth_action_box&&(e.hide(),h.UnauthActionBox.show(t.unauth_action_box))},stat:["page.js","page.css","wide_dd.js","wide_dd.css",window.jsc("web/sharebox.js")]}),"wall"===o&&window.Wall&&window.Wall.triggerAdPostStat(n,"share_post"),cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>j.update(e,window.cleanObj(t)))},clientUpdate(e,t,i,n){var a=this._getButtonsByType(e,t);if(a.length){var s=Object(u.intval)(Object(o.domData)(a[0],"count"))+i;this._updateDom(e,t,s,n),this.updateExternalIndex(e,{type:t,count:s,isActive:n})}},update(e,t){if(!isNaN(parseInt(t.like_num))){var i=Object(u.isUndefined)(t.like_my)?void 0:!!Object(u.intval)(t.like_my);this._updateDom(e,p,t.like_num,i,t.like_title),this.updateExternalIndex(e,{type:p,count:t.like_num,isActive:i})}if(!isNaN(parseInt(t.share_num))){var o=Object(u.isUndefined)(t.share_my)?void 0:!!Object(u.intval)(t.share_my);this._updateDom(e,w,t.share_num,o,t.share_title),this.updateExternalIndex(e,{type:w,count:t.share_num})}Object(s.isNumeric)(t.views_num)&&this._updateDom(e,b,t.views_num,void 0,t.views_title),Object(s.isNumeric)(t.comment_num)&&this._updateDom(e,m,t.comment_num)},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,i,n,a){var r=this._getButtonsByType(e,t),l=t===b,_="";l?_=i:i>0&&(_=vk.widget?Object(s.formatCount)(i):Object(d.langNumeric)(i,"%s",!0)),l||(i=Object(u.intval)(i));for(var h=0;h<r.length;h++){var v=r[h];if(!Object(o.hasClass)(v,"no_counter")){var m=l?r[h]:Object(o.geByClass1)("like_button_count",r[h]);Object(c.animateCount)(m,_,{str:"auto",noWrapWidth:!l,noSpaceIfEmpty:!0}),Object(o.toggleClass)(v,"empty",i<=0),"boolean"==typeof n&&Object(o.toggleClass)(v,"active",n),Object(o.attr)(r[h],"data-count",i),l&&Object(o.attr)(r[h],"title",a||"");var j=r[h].tt;if(j){var k=Object(o.domByClass)(j.container,"_content"),O=Object(o.domByClass)(j.container,"_value"),g=Object(o.domByClass)(j.container,"_title"),f=Object(u.intval)(Object(o.val)(O));Object(o.val)(O,i),a&&Object(o.val)(g,a),Object(u.isObject)(j)&&(j.likeInvalidated=!0),(f!==i&&f<7||!1===a)&&(t===p?v.needReinitLikesTT=!0:t===w&&(v.needReinitShareTT=!0)),t===p&&Object(o.toggleClass)(k,"me_hidden",!n),!1===a&&j.destroy&&j.destroy()}}}},_getButtonsByType:(e,t)=>Object(o.domQuery)(`._like_${e} ._${t}`),showLikes(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e.postDontShowLikes||vk.widget&&vk.show_external_auth_box)){var n=i.views?{views:1}:i.share?{published:1}:{};i.listId&&(n.list=i.listId);var c,r,l=!!Object(o.geByClass1)("share",Object(o.gpeByClass)("like_wrap",e)),d=getComputedStyle(e),_=Object(u.intval)(d.getPropertyValue("padding-left").replace("px","")),h=Object(u.intval)(d.getPropertyValue("padding-top").replace("px","")),v=Object(o.geByClass1)("like_button_icon",e),p=[40-Object(o.getSize)(v)[0]/2-_,10-h],w=i.cl||"";if(i.share)w+="likes_tt_share";else if(w+="likes_tt_like","wpost"===i.from)p[0]=12;else if("widget_community"===i.from)p[0]=6;else if("wcomments"===i.from||"widget_comments"===cur.wallType){p[0]=Object(o.getSize)(e)[0]+16-Object(o.getSize)(v)[0]/2-10}else"photo_carousel"===i.from&&(p[1]=10);i.share?(c="needReinitLikesTT",r="resetLikesTTTimer"):(c="needReinitShareTT",r="resetShareTTTimer"),clearTimeout(e[r]),Object(a.showTooltip)(e,{url:"/like.php",params:Object(s.extend)({act:"a_get_stats",object:t,has_share:l?1:""},n),appendEl:document.body,slide:15,shift:p,ajaxdt:i.fast?0:100,showdt:i.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{j.showLikes(e,t,i)}},typeClass:"like_tt",className:w,onHide:()=>{clearTimeout(e[r]),e[c]&&(e[r]=setTimeout(()=>{delete e[c],e.tt&&e.tt.destroy&&e.tt.destroy()},200))}})}},showShare:function(e,t,i){j.showLikes(e,t,Object(s.extend)(i,{share:1}))},updateViews:function(e){vk.widget&&vk.show_external_auth_box||window.ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,i){var n=Object(o.ce)("div",{innerHTML:i});j._updateDom(e,b,t,void 0,n.innerText||n.textContent)}})},makeTemplate(e,t){return(t=Object(s.extend)({buttons_prepend:"",object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:"",like_class_name:"",reactions_count:"",reactions_class_name:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?Object(d.langNumeric)(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?Object(d.langNumeric)(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name+=t.likes_count>0?"":" empty",t.share_class_name=t.share_count>0?"":"empty",t.reactions_class_name+=t.reactions_count&&t.reactions_count>0?"":" empty",Object(o.rs)(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=_(e),o=i.objectType,n=i.objectId;switch(o){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==n)return;var a=cur.pvListId,s=cur.pvIndex,c=cur.pvData[a][s];t.type===p?(c.likes=t.count,c.liked=t.isActive,cur.pvCommsLikes[c.id][1]=t.count):t.type===w&&(c.shares=t.count);break;case"video":if(window.mvcur&&window.mvcur.mvShown&&window.mvcur.videoRaw===n&&t.type===p){var r=window.Videoview.getMvData();r.likes=t.count,void 0!==t.isActive&&(r.liked=t.isActive,window.Videoview.playerOnLiked(t.isActive),window.Videoview.recache())}}},showLikesList(e,t){cur.viewAsBox||Object(o.hasClass)(Object(o.gpeByClass)("like_btn",e),"no_counter")||Object(r.showWiki)({w:"likes/"+Object(s.clean)(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||Object(o.hasClass)(Object(o.gpeByClass)("like_btn",e),"no_counter")||Object(r.showWiki)({w:"shares/"+Object(s.clean)(t)},!1,!1,{queue:1})}}}}]);try{stManager.done("cmodules/bundles/8e301bafead91572e7bd323519a67b88.431c4da9f4ed712e1991.js")}catch(e){}