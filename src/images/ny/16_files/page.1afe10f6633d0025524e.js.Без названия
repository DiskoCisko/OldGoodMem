!function(e){function t(t){for(var a,d,n=t[0],l=t[1],s=t[2],_=0,u=[];_<n.length;_++)d=n[_],Object.prototype.hasOwnProperty.call(r,d)&&r[d]&&u.push(r[d][0]),r[d]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(p&&p(t);u.length;)u.shift()();return i.push.apply(i,s||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,n=1;n<o.length;n++){var l=o[n];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=d(d.s=o[0]))}return e}var a={},r={"web/page":0},i=[];function d(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,d),o.l=!0,o.exports}d.e=function(){return Promise.resolve()},d.m=e,d.c=a,d.d=function(e,t,o){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(d.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)d.d(o,a,function(t){return e[t]}.bind(null,a));return o},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var s=0;s<n.length;s++)t(n[s]);var p=l;i.push([231,"common","983f42e70b3e18d97715513130ff4d9c","7ff0c31fd89ceca852f0cf5e2f61c8c8","c6f51c78d2a3f17f935b490330a9da66","6bf9d574fcada9d6589f1522b8895ac0","42c63f80984342f2f64e56433dd0512e","e1eb3733f1f626a37fd0d2e038b98573"]),o()}({231:function(e,t,o){e.exports=o("FgzW")},"9at3":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Btvt"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pIFo"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("zxIV"),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("EasH"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("v+DW"),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ryw6"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("t7n3"),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("cGUQ"),WallUpload={_videoUploadIndex:null,photoUploaded:function(e,t){var o=void 0!==e.ind?e.ind:e,a=(e.fileName?e.fileName:e).replace(/[&<>"']/g,""),r=e.fileName?o+"_"+e.fileName:e,i=ge("upload"+r+"_progress_wrap");i&&hide(geByClass1("progress_x",i)),ajax.post("al_photos.php",extend({act:"choose_uploaded"},t),{onDone:function(e,t){WallUpload.addMedia().chooseMedia("photo",e,extend(t,{upload_ind:o+"_"+a}))},onFail:WallUpload.uploadFailed.pbind(e)})},uploadFailed:function(e,t){var o=void 0!==e.ind?e.ind:e,a=Upload.options[o],r=(e.fileName?e.fileName:e).replace(/[&<>"']/g,"");if("fileApi"==Upload.types[o]&&!a.wiki_editor){var i,d=e.fileName?o+"_"+e.fileName:e;cur.imMedia?(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)("upload"+d+"_progress_wrap"),i=cur.imMedia.lnkId,cur.addMedia[i].unchooseMedia()):cur.addMedia&&(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.re)("upload"+d+"_progress_wrap"),(i=(cur.attachMediaIndexes||{})[r])&&cur.addMedia[i].unchooseMedia()),1==a.filesTotalCount&&setTimeout(Object(_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:getLang("global_error")},getLang("wall_add_photo_error")).hide,2e3)}Object(_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_6__.topError)("Upload failed",{dt:-1,type:102,url:(ge("file_uploader_form"+o)||{}).action}),Upload.embed(o)},show:function(){cur.uploadInited&&("feed"==cur.wallType?removeClass(cur.uploadWrap,"post_upload_min_wrap"):Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)(cur.uploadWrap))},hide:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){cur.uploadInited&&("feed"==cur.wallType?addClass(cur.uploadWrap,"post_upload_min_wrap"):hide(cur.uploadWrap),hide("post_upload_dropbox"))})),addMedia:function(){return cur.dropboxAddMedia||cur.wallAddMedia},attachEl:function(){return WallUpload.dropboxAttachEl||ge("submit_post_box")},attachToEl:function(e){e=ge(e);var t=ge("post_upload_dropbox");if(WallUpload.dropboxAttachEl=e,!e||!t)return!1;e.insertBefore(t,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(e))},checkDragDrop:function(){var e=browser,t=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_7__.floatval)(browser.version);return!!(e.msie&&t>=9||e.mozilla&&t>=3.5||e.chrome||e.safari)&&((window.XMLHttpRequest||window.XDomainRequest)&&(window.FormData||window.FileReader&&(window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary||window.ArrayBuffer&&window.Uint8Array&&(window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder))))},initCallback:function(){cur.editingPost?WallUpload.init():Wall.showEditPost()},init:function(){cur.withUpload&&(cur.uploadAdded?WallUpload.show():(cur.uploadAdded=!0,window.Upload&&window.VideoInlineUpload?(WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()):stManager.add([jsc("web/upload.js"),"video_upload.js"],(function(){WallUpload.initLoader(),Wall._videoUploadIndex=WallUpload.initVideoUploader()}))))},initVideoUploader:function(){var e=cur.wallUploadVideoOpts;if(e){var t=ge("post_field_upload_video"),o=ge("post_upload_video_dropbox");e.options.from="post";var a=ge("send_post"),r={onUploadAllCompleteDone:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.disableButton)(a,!1)},onUploadStartDone:function(){Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_5__.disableButton)(a,!0)}};return window.VideoInlineUpload.getUploadModule(t,o,e,WallUpload.addMedia(),r)}},initLoader:function initLoader(){removeEvent(bodyNode,"dragover dragenter");var data=cur.wallUploadOpts,field=ge("post_field");if(WallUpload.checkDragDrop()){cur.uploadWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="post_field_upload" class="post_upload"></div>'}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domInsertBefore)(cur.uploadWrap,field),cur.uploadVideoWrap=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div",{className:"post_upload_video_wrap fl_r",innerHTML:'<div id="post_field_upload_video" class="post_upload_video"></div>'}),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.domInsertBefore)(cur.uploadVideoWrap,field);var submitBox=WallUpload.attachEl();submitBox.insertBefore(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div",{id:"post_upload_dropbox",className:"post_upload_dropbox",innerHTML:'<div class="post_upload_dropbox_inner"><div class="post_upload_label drop_label">'+(data.opts.lang.wall_drop_media_here||"Drop files here")+'</div><div class="post_upload_label release_label">'+(data.opts.lang.wall_release_media_here||"Release button to attach files")+"</div></div>"}),submitBox.firstChild),cur.wallUploadInd=Upload.init("post_field_upload",data.url,data.params,{accept:"image/jpeg,image/png,image/gif",dragEl:bodyNode,dropbox:"post_upload_dropbox",file_input:null,file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_match:data.opts.ext_re,lang:data.opts.lang,noFlash:1,multiple:1,multi_progress:1,max_files:10,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:data.opts.server,error:data.opts.default_error,error_hash:data.opts.error_hash,label:data.opts.label,wiki_editor:0,onUploadStart:function(e,t){var o=void 0!==e.ind?e.ind:e,a=Upload.options[o];"form"==Upload.types[o]&&(geByClass1("file",ge("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[o]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),a.multi_progress&&this.onUploadProgress(e,0,0))},onUploadComplete:function onUploadComplete(info,res){var params;try{params=eval("("+res+")")}catch(e){params=Object(_shared_lib_convert__WEBPACK_IMPORTED_MODULE_8__.fromQueryString)(res)}params.photos?WallUpload.photoUploaded(info,params):Upload.onUploadError(info)},onUploadProgress:function(e,t,o){var a=void 0!==e.ind?e.ind:e;if("fileApi"==Upload.types[a]){var r=(cur.attachMediaIndexes||{})[a];if(void 0===r||r&&cur.addMedia[r].chosenMedia||cur.imMedia){var i={loaded:t,total:o};e.fileName&&(i.fileName=e.fileName.replace(/[&<>"']/g,"")),WallUpload.addMedia().showMediaProgress("photo",a,i)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(e){"form"==Upload.types[e]&&Upload.embed(e)},onDragEnter:function(){cur.editingPost?(Wall.hidePosterFeatureTooltip(),WallUpload.init()):Wall.showEditPost()},onNoFilteredCallback:function(e){Wall._videoUploadIndex&&Upload.onFileApiSend(Wall._videoUploadIndex,e)}}),cur.uploadInited=!0,WallUpload.show(),cur.wallUploadFromDrag&&(1==cur.wallUploadFromDrag&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_3__.show)("post_upload_dropbox"),delete cur.wallUploadFromDrag)}}};__webpack_exports__.default=WallUpload},FgzW:function(e,t,o){"use strict";o.r(t);var a=o("oBWH"),r=o("qwyz"),i=o("9at3"),d=o("aG8I");window.Page=a.default,window.page=a.default,window.Wall=r.default,window.wall=r.default,window.WallUpload=i.default,window.Composer=d.default,window._postsSendTimer||(window._postsSendTimer=setTimeout(a.default.postsSend,1e4));try{stManager.done("page.js")}catch(e){}},aG8I:function(e,t,o){"use strict";o.r(t);o("KKXr"),o("Oyvg"),o("pIFo"),o("SRfc");var a=o("zxIV"),r=o("t7n3"),i=o("Egk5"),d=o("/PiP"),n=o("7jxN"),l=o("lXE5"),s={init:function(e,t){if(!(e=ge(e)))return null;var o=Object(a.data)(e,"composer");if(o)return o;o={input:e,inited:!1,options:t},Object(a.data)(e,"composer",o),o.wddWrap=Object(a.ce)("div",{className:"composer_wdd clear_fix "+(t.wddClass||""),id:e.id+"_composer_wdd",innerHTML:'<input type="hidden" id="'+e.id+'_composer_wdd_term"/>'},{width:t.width||Object(a.getSize)(e)[0]}),t.appendTo&&Object(r.isFunction)(t.appendTo)?t.appendTo(o.wddWrap):Object(a.domInsertBefore)(o.wddWrap,e.nextSibling),o.wddInput=o.wddWrap.firstChild,o.wdd=WideDropdown.initSelect(o.wddWrap,extend({text:o.wddInput,input:e,noResult:t.lang.noResult||"",introText:t.lang.introText||"",toup:t.toup,wddOpts:t.wddOpts,searchKeys:t.searchKeys,width:"auto",onItemSelect:s.onItemSelect.bind(s).pbind(o)},t.wddOpts||{url:"hints.php",params:{act:"a_json_friends",from:"composer"}})),e.dd=o.wddWrap.id,s.initEvents(o),t.media&&(o.addMedia=new MediaSelector(t.media.lnk,t.media.preview,t.media.types,t.media.options,t.media.gearEl,t.media.actionsEl)),Object(a.setStyle)(o.wddWrap,"width",""),o.inited=!0,s.updateAutoComplete(o),o.edit=t.edit,o.isReply=t.isReply,s.updateArticleConvertSuggest(o);var i=cur.onMediaChanged;return cur.onMediaChanged=function(){s.updateArticleConvertSuggest(o),i&&i()},o},initEvents:function(e){addEvent(e.input,"keyup keydown keypress",s.onKeyEvent.pbind(e)),addEvent(e.input,"click mousedown mouseup focus blur paste",s.onMouseEvent.pbind(e))},destroy:function(e){WideDropdown.deinit(e.wddWrap),Object(a.cleanElems)(e.input,e.wddWrap),Object(a.re)(e.wddWrap),e.inited=!1,e.addMedia&&e.addMedia.destroy(),Object(a.data)(e.input,"composer",null),Object(a.re)(e.articleConvertEl),e.articleConvertEl=!1},onKeyEvent:function(e,t){var o=!t.shiftKey&&inArray(t.keyCode,[KEY.UP,KEY.DOWN,KEY.RETURN]),d=e.wdd&&o;if("keypress"==t.type||"keydown"==t.type){if(t.keyCode==KEY.RETURN||10==t.keyCode){if(e.select&&e.select.isVisible())return Object(i.triggerEvent)(document,t.type,t),Object(i.cancelEvent)(t);if(t.ctrlKey&&Object(r.isFunction)(e.options.onSubmit))return!0}if(t.keyCode==KEY.TAB){var n=e.input,l=window.Emoji?Emoji.editableVal(n):"",p=s.getCursorPosition(n),_=(l.substr(0,p)+String.fromCodePoint(1)+l.substr(p)).match(/^[\s\S]*(@|\*)[\S]+\s*\([\s\S]*?\001[\s\S]*?\)\s*/);if(_){var u=_[0].length-1;return Object(a.elfocus)(e.input,u,u),Object(i.cancelEvent)(t)}}var c=0;for(var f in e.wdd.shown)c+=1;if(d&&Object(a.isVisible)(e.wdd.listWrap)&&c)return t.type==(browser.opera&&!browser.chrome?"keypress":"keydown")&&WideDropdown._textEvent(t),Object(i.cancelEvent)(t)}if("keyup"==t.type&&!d){if(65==t.keyCode&&t.ctrlKey)return;e.wdd&&inArray(t.keyCode,[KEY.SPACE,KEY.HOME,190,191,78,55,49])&&s.hideSelectList(e)}"keyup"!=t.type||d&&t.keyCode!=KEY.RETURN||s.updateAutoComplete(e,t),s.updateArticleConvertSuggest(e)},isArticleConvertSuggestAvailable:function(e){if(e.edit||e.isReply)return!1;var t=!!cur.wallAddMedia&&cur.wallAddMedia.types,o=!1;if(t)for(var a=0;a<t.length;a++)if("article"==t[a][0]){o=!0;break}if(!o||!Object(d.isArticleEditorAvailable)())return!1;var r=!0;return each(cur.wallAddMedia.getMedias()||[],(function(e,t){if(!inArray(t[0],["photo","video","postpone","mark_as_ads"]))return r=!1,!1})),!!r&&!!(cur.options.articleConvertThreshold>0&&e.curValue.length>=cur.options.articleConvertThreshold)},updateArticleConvertSuggest:function(e){if(s.isArticleConvertSuggestAvailable(e)){if(!e.articleConvertEl){var t=gpeByClass("post_field_wrap",e.input),o=geByClass1("post_actions_btns",t);e.articleConvertEl=Object(a.se)('<button class="article_post_convert round_button">'+getLang("profile_convert_to_article_short")+"</button>"),o?(t!==domPN(o)&&Wall.sendInsertBeforeError(),t.insertBefore(e.articleConvertEl,o)):t.appendChild(e.articleConvertEl),removeEvent(e.articleConvertEl),addEvent(e.articleConvertEl,"click",(function(){cur.postComposer=e;var t=[];each(cur.wallAddMedia.getMedias()||[],(function(e,o){inArray(o[0],["photo","video"])&&t.push(o[0]+"_"+o[1])})),Object(d.openArticleEditor)(cur.oid,0,{text:e.curValue,medias:t})}))}Object(a.show)(e.articleConvertEl)}else Object(a.re)(e.articleConvertEl),delete e.articleConvertEl},onMouseEvent:function(e,t){"blur"!=t.type?("focus"!=t.type&&"click"!=t.type||s.updateAutoComplete(e,t),"paste"==t.type&&setTimeout(s.updateAutoComplete.pbind(e,t),0)):s.hideSelectList(e)},updateAutoComplete:function(e,t){var o=e.input,a=(e.options&&e.options.getValue||window.Emoji&&Emoji.editableVal||val)(o),r=Math.max(a.lastIndexOf("@"),a.lastIndexOf("*")),i=!1;if(r>-1){var d=s.getCursorPosition(o),n=a.substr(0,d),l=n.match(/(^|[\s.,:\'\"«»;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);r=Math.max(n.lastIndexOf("@"),n.lastIndexOf("*")),l&&"."!==l[2].substr(-1)&&(i=l[2])}!1===i&&delete e.ignoredTerm,void 0!==e.ignoredTerm&&i==e.ignoredTerm&&(i=!1),e.curValue=a,e.curTerm=i,e.curPos=r,val(e.wddInput,i),s.toggleSelectList(e),!t||"keyup"!=t.type&&"paste"!=t.type||(e.options.onValueChange&&e.options.onValueChange(a,"keyup"!=t.type),e.addMedia&&e.addMedia.checkMessageURLs(a,"keyup"!=t.type),e.options.checkLen&&e.options.checkLen(a))},toggleSelectList:function(e){var t=e.curTerm;!1===t?s.hideSelectList(e):s.showSelectList(e,t)},hideSelectList:function(e){e.wddInput.focused=!1,WideDropdown._hideList(e.wdd);var t=e.options||{};t.onHide&&t.onHide()},showSelectList:function(e,t){function o(o){e.wddInput.focused=!0,WideDropdown.items(e.wdd.id,o||[]),WideDropdown._updateList(e.wdd,!1,t);var a=e.options||{};a.onShow&&a.onShow()}"function"==typeof cur.wallMentions&&(cur.wallMentions=cur.wallMentions()),cur.wallMentions&&"function"==typeof cur.wallMentions.then?cur.wallMentions.then((function(e){o(e)})):o(cur.wallMentions)},onItemSelect:function(e,t){if(!t)return!1;var o=t[2].replace("@",""),i=t[8]||t[1],d=e.curValue.substr(0,e.curPos),n=e.curValue.substr(e.curPos),l=!!d.match(/\#[\w_\.\u0400-\u04FF]+$/i);document.activeElement.classList.contains("_im_text")&&(/^(?:id|club)\d{1,}$/.test(o)||(l=!0));var p=e.options.poster,_=window.Emoji&&void 0!==e.input.emojiId||p;_||p?n=Object(r.clean)(n):i=Object(r.replaceEntities)(i),cur.selNum=(cur.selNum||0)+1;var u=new RegExp("^(@|\\*)"+Object(r.escapeRE)(e.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");return n=n.replace(u,(function(e,t,a){var r=t+o+" ";return l?r+=_||p?'<span id="tmp_sel_'+cur.selNum+'"></span>':"":(r+=(_||p?'<span id="tmp_sel_'+cur.selNum+'">':"")+"(",r+=i.replace(/[\(\)\]\[]/g,""),r+=")"+(_||p?"</span>":"")+" "),r})),l||!d||d.match(/[\.\(\)\?\!\s\n\r\'\"«» \u00A0]$/)||(n=" "+n),s.hideSelectList(e),_||p?(Emoji.val(e.input,Object(r.clean)(d)+n),Emoji.focus(e.input),Emoji.editableFocus(e.input,ge("tmp_sel_"+cur.selNum),!0),p&&p.checkText()):(val(e.input,d+n),Object(a.elfocus)(e.input)),Object(r.isFunction)(e.options.onItemSelect)&&e.options.onItemSelect(t),!1},getCursorPosition:function(e){if(void 0!==e.selectionStart)return e.selectionStart;if(void 0!==window.getSelection){var t=window.getSelection();if(!t||!t.rangeCount)return 0;var o=t.getRangeAt(0),r=o.cloneRange(),i=Object(a.ce)("div");return r.selectNodeContents(e),r.setEnd(o.startContainer,o.startOffset),i.appendChild(r.cloneContents()),(window.Emoji?Emoji.editableVal:val)(i).replace(/\n$/,"").length}return 0},getSendParams:function(e,t,o){var i=e.addMedia||{},d=i.chosenMedia||{},s=i&&i.getMedias?i.getMedias():[],p=i.shareData||{},_=e&&e.options.media&&e.options.media.options.limit||0,u=e.input,c=cur.posterWpe&&cur.posterWpeSendParams?cur.posterWpeSendParams.text:Object(r.trim)(window.Emoji?Emoji.editableVal(u):val(u)),f={message:c},b=0,m=hasClass(gpeByClass("post",u),"suggest");isArray(d)&&d.length&&s.push(clone(d)),Object(a.setStyle)(bodyNode,{cursor:"default"});var w=ge("wpe_cont"),g=geByClass1("wpe_error",w);function h(e){g||(g=Object(a.se)('<div class="wpe_error error"><div>'),w.insertBefore(g,Object(a.domFC)(w))),g.innerHTML=e.length>60?'<div class="msg_text">'+e+"</div>":e,Object(a.isVisible)(g)||(Object(n.slideDown)(g,100),Object(l.scrollToY)(Object(a.getXY)(g)[1]-15),Object(n.animate)(ge("box_layer_wrap"),{scrollTop:0}))}if(g&&hide(g),s.length&&each(s,(function(e,a){if(isArray(a)&&a.length){var d=this[0],n=this[1];if(b>=_&&"postpone"!=d)return!1;switch(d){case"poll":var l=i.pollData(o);if(!l)return f.delayed=!0,!1;Object(r.intval)(n)&&(f.poll_id=Object(r.intval)(n)),n=l.question,delete l.question,f=extend(f,l);break;case"copyright":var u=i.copyrightData();if(u)return void(f=extend(f,u));break;case"share":if(p.failed||!p.title&&(!p.images||!p.images.length)&&!p.photo_url&&!p.video)return cur.shareLastParseSubmitted&&Date.now()-cur.shareLastParseSubmitted<2e3?(f.delayed=!0,!1):void 0;if((cur.options.share||{}).button_exclusive&&p.button_text&&p.button_action){var w;s.length>1&&(w=getLang("global_share_too_many_attachments")),f.message.split("\n").length-1>(cur.options.share||{}).button_exclusive_max_message_newlines&&(w=getLang("global_share_too_many_newlines")),f.message.length>(cur.options.share||{}).button_exclusive_max_message_len&&(w=getLang("global_share_too_long_message"));var g=Object(r.extractUrls)(" "+f.message+" "),v=Object(r.extractUrls)(" "+p.url+" ")[0];if(v&&g.length){"/"===v.query&&(v.query=""),"www."===v.domain.substr(0,4)&&(v.domain=v.domain.substr(4));for(var E=0;E<g.length;++E){var O=g[E];if("/"===O.query&&(O.query=""),"www."===O.domain.substr(0,4)&&(O.domain=O.domain.substr(4)),v.domain!=O.domain||v.query!=O.query){w=getLang("global_share_too_many_links");break}}}if(w)return h(w),f.delayed=!0,!1}if(!p.title)return h(getLang("global_share_title_required")),f.delayed=!0,!1;if(!p.url)return h(getLang("global_share_url_required")),f.delayed=!0,!1;if(p.url=new URL(p.url).href,p.video?(n=p.video_owner_id+"_"+p.video_id,f.snippet_video=1):n=p.prometheus?p.media:p.user_id&&p.photo_id&&!p.noPhoto?p.user_id+"_"+p.photo_id:"",p.share_upload_failed&&!n)return p.share_upload_failed=0,f.delayed=!0,!1;if(p.images&&p.images.length&&!isArray(p.images[cur.shareShowImg])&&!o&&!n&&!p.noPhoto&&!p.video)return i.uploadShare(t),f.delayed=!0,!1;if((cur.options.share||{}).require_image&&!n)return h(getLang("global_share_image_required")),f.delayed=!0,!1;p.initialPattern&&Object(r.trim)(c)==p.initialPattern&&(f.message=""),extend(f,{url:p.url,mode:p.mode,title:Object(r.replaceEntities)(p.title),description:Object(r.replaceEntities)(p.description),button_text:Object(r.replaceEntities)(p.button_text),button_action:p.button_action,extra:p.extra,extra_data:p.extraData,photo_url:p.video?"":Object(r.replaceEntities)(p.photo_url),placeholder_inserted:p.placeholder_inserted,open_graph_data:(p.openGraph||{}).data,open_graph_hash:(p.openGraph||{}).hash});break;case"page":p.initialPattern&&Object(r.trim)(c)==p.initialPattern&&(f.message="");break;case"postpone":return f.postpone=val("postpone_date"+i.lnkId),void(cur.postponedLastDate=f.postpone);case"donut_duration":return;case"mark_as_ads":return void(f.mark_as_ads=1);case"pretty_cards":if(!i.prettyCardGallery)return;if(i.prettyCardGallery.needSendData())return i.prettyCardGallery.saveCards(t,(function(e){h(e)})),f.delayed=!0,!1;n=i.prettyCardGallery.getSendData().attachVal}this[3]&&Object(r.trim)(c)==this[3]&&(f.message=""),m&&this[4]&&(n+="_"+this[4]),f["attach"+(b+1)+"_type"]=d,f["attach"+(b+1)]=n,b++}})),!i.multi&&(f.postpone||(i.postponeDate&&i.postponeIsTooltip||i.postponePreview)&&(f.postpone=val("postpone_date"+i.lnkId),cur.postponedLastDate=f.postpone),!f.copyright&&i.copyrightData)){var v=i.copyrightData();v&&(f=extend(f,v))}return i.multi||f.mark_as_ads||!i.markAsAds||(f.mark_as_ads=1),f},reset:function(e){var t=e.input,o=val(t),r=e.addMedia,i={value:o};return window.Emoji?Emoji.val(t,""):t.innerHTML="",r&&(i.urlsCancelled=clone(r.urlsCancelled),r.unchooseMedia(),r.urlsCancelled=[]),Object(a.re)(e.articleConvertEl),i},restore:function(e,t){var o=e.input,a=s.reset(e);return val(o,t.value||""),a}};t.default=s}});